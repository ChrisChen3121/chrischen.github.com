<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Network</title>
<!-- 2016-05-01 Sun 12:03 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="ChrisChen" />
<meta  name="keywords" content="Network" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "left",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Network</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Physical Layer</a>
<ul>
<li><a href="#sec-1-1">1.1. Latency</a></li>
<li><a href="#sec-1-2">1.2. Media</a></li>
<li><a href="#sec-1-3">1.3. Signal</a></li>
<li><a href="#sec-1-4">1.4. Modulation</a></li>
<li><a href="#sec-1-5">1.5. Limit</a></li>
<li><a href="#sec-1-6">1.6. Other Hints</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Data Link Layer</a>
<ul>
<li><a href="#sec-2-1">2.1. Frame</a></li>
<li><a href="#sec-2-2">2.2. Error Detection</a></li>
<li><a href="#sec-2-3">2.3. Error Correction</a></li>
<li><a href="#sec-2-4">2.4. Detection vs. Correction</a></li>
<li><a href="#sec-2-5">2.5. ARP(Address Resolution Protocol)</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Medium Access Control Sublayer</a>
<ul>
<li><a href="#sec-3-1">3.1. Retransmissions</a></li>
<li><a href="#sec-3-2">3.2. Multiplexing</a></li>
<li><a href="#sec-3-3">3.3. Multiple Access Control</a></li>
<li><a href="#sec-3-4">3.4. Switching</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Network Layer</a>
<ul>
<li><a href="#sec-4-1">4.1. Service Models</a></li>
<li><a href="#sec-4-2">4.2. IP(Internet Protocol)</a></li>
<li><a href="#sec-4-3">4.3. Traceroute</a></li>
<li><a href="#sec-4-4">4.4. NAT(Network Address Translation)</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Routing</a>
<ul>
<li><a href="#sec-5-1">5.1. Distance Vector Routing</a></li>
<li><a href="#sec-5-2">5.2. Flooding</a></li>
</ul>
</li>
<li><a href="#sec-6">6. Transport Layer</a>
<ul>
<li><a href="#sec-6-1">6.1. TCP vs UDP</a></li>
<li><a href="#sec-6-2">6.2. Well-known Ports</a></li>
<li><a href="#sec-6-3">6.3. UDP socket</a></li>
<li><a href="#sec-6-4">6.4. TCP socket</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Application Layer</a>
<ul>
<li><a href="#sec-7-1">7.1. DHCP(Dynamic Host Configuration Protocol)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Physical Layer</h2>
<div class="outline-text-2" id="text-1">
<p>
Concerns how signals are used to transfer message bits over a link.
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Latency</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Message Latency is the delay to send a message over a link.
</p>
<ul class="org-ul">
<li>Transmission Delay
Time to put M-bit message "on the wire"
$$T-delay = \frac{M(bits)}{Rate(bits/sec)} = \frac{M}{R}\ seconds$$
</li>
<li>Propagation Delay
Time for bits to propagate across the wire
$$P-delay = \frac{Length}{speed\ of\ signals} \approx \frac{Length}{\frac{2}{3}C} = D\ seconds$$
C is the speed of light.
<p class="verse">
In wireless communication, s=c, i.e. the speed of light.<br  />
In copper wire, the speed s generally ranges from .59c to .77c<br  />
</p>
</li>
</ul>


<p>
so $$L = \frac{M}{R} + D$$
Often one delay component dominates.
</p>
</div>
<ol class="org-ol"><li><a id="sec-1-1-1" name="sec-1-1-1"></a>Bandwidth-Delay<br  /><div class="outline-text-4" id="text-1-1-1">
<p>
BD is the amount of data in flight. Reperesents the data "in the network".
$$BD = R\times D$$
Small for LANs, big for "long fat" pipes.
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Media</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Media propagate signals that carry bits of information
</p>
</div>
<ol class="org-ol"><li><a id="sec-1-2-1" name="sec-1-2-1"></a>Wires<br  /><div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>Twisted Pair
<p class="verse">
Widely used in LANs and telephone lines<br  />
Twist reduce radiated signal.<br  />
</p>
</li>
<li>Coaxial Cable
</li>
</ul>
</div>
</li>
<li><a id="sec-1-2-2" name="sec-1-2-2"></a>Fiber<br  /><div class="outline-text-4" id="text-1-2-2">
<p>
Long, thin, pure strands of glass. Properties:
</p>
<ul class="org-ul">
<li>Enormous bandwidth
</li>
</ul>
</div>
</li>
<li><a id="sec-1-2-3" name="sec-1-2-3"></a>Wireless<br  /><div class="outline-text-4" id="text-1-2-3">
<p>
Sender radiates signal over a region. Properties:
</p>
<ul class="org-ul">
<li>In many directions, to potentially many receivers.
</li>
<li>Receiver need to coordinate use(choose a sender).
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Signal</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Analog signals encode digital bits.
</p>
</div>
<ol class="org-ol"><li><a id="sec-1-3-1" name="sec-1-3-1"></a>Frequency Representation<br  /><div class="outline-text-4" id="text-1-3-1">
<p>
A signal over time can be represented by its frequency components.(Fourier analysis)
$$g(t)=\frac{1}{2}c+\sum_{n=1}^\infty a_n sin(2\pi nft) + \sum b_n cos(2\pi nft)$$
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Modulation</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>NRZ(Non-Return to Zero)
Let a high voltage(+V) represent a 1, and low voltage(-V)represent a 0.
</li>
<li>Passband
<p class="verse">
Carriers is simply a signal oscillatiog at a desired frequency.<br  />
To modulate these signal, we can change amplitude, frequency, or phase.<br  />
</p>

<div class="figure">
<p><img src="../resources/network/SignalModulation.png" alt="SignalModulation.png" />
</p>
<p><span class="figure-number">Figure 1:</span> Modulations</p>
</div>
</li>

<li>more signal levels
eg: voltage splits into four levels. reperents 2bits per symbol.
</li>
<li>Clock Recovery
Clock recovery is designed for the case like 1000000000&#x2026;0
<ul class="org-ul">
<li>4B/5B
<p class="verse">
The baseband for wires.<br  />
Map every 4 bits into 5bits without long runs of zeros/ones.(called NRZI)<br  />
eg: 0000-&gt;11110, 0001-&gt;01001, 1110-&gt;11100, 1111-&gt;11101<br  />
Not work for fiber/wireless.Need to send at higher frequencies.<br  />
</p>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Limit</h3>
<div class="outline-text-3" id="text-1-5">
</div><ol class="org-ol"><li><a id="sec-1-5-1" name="sec-1-5-1"></a>Nyquist Limit<br  /><div class="outline-text-4" id="text-1-5-1">
<p>
$$Maximum\ data\ rate = 2Hlog_{2}V\ bits/sec$$
</p>
<p class="verse">
V is the discrete levels the signal consists.<br  />
H is the bandwidth<br  />
</p>
</div>
</li>
<li><a id="sec-1-5-2" name="sec-1-5-2"></a>Shannon Capacity<br  /><div class="outline-text-4" id="text-1-5-2">
<p>
$$Maximum\ data\ rate = Hlog_{2}(1+S/N)\ bits/sec$$
</p>
<p class="verse">
S/N is the signal-to-noise ratio, S is the signal power, N is the noise power.<br  />
S/N in db unit \(=10log_{10}(S/N)\)<br  />
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Other Hints</h3>
<div class="outline-text-3" id="text-1-6">
</div><ol class="org-ol"><li><a id="sec-1-6-1" name="sec-1-6-1"></a>Metric Units<br  /><div class="outline-text-4" id="text-1-6-1">
<p class="verse">
Use power of 10 for rates, 2 for storage.<br  />
\(Mbps=1,000,000bps, 1KB = 2^{10}bytes\)<br  />
"B" is for bytes, "b" is for bits<br  />
</p>
</div>
</li>
<li><a id="sec-1-6-2" name="sec-1-6-2"></a>BandWidth<br  /><div class="outline-text-4" id="text-1-6-2">
<p>
The range of frequencies transmitted without being strongly attenuated is called the bandwidth
</p>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Data Link Layer</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Frame</h3>
<div class="outline-text-3" id="text-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">FLAG</td>
<td class="left">Header</td>
<td class="left">Payload field</td>
<td class="left">Trailer</td>
<td class="left">FLAG</td>
</tr>
</tbody>
</table>
</div>
<ol class="org-ol"><li><a id="sec-2-1-1" name="sec-2-1-1"></a>Bit Stuffing<br  /><div class="outline-text-4" id="text-2-1-1">
<p>
After five 1s in the data, insert a 0.
</p>
</div>
</li>
<li><a id="sec-2-1-2" name="sec-2-1-2"></a>Example(PPP)<br  /><div class="outline-text-4" id="text-2-1-2">
<p class="verse">
PPP is a Point-to-Point Protocal.<br  />
FLAG in PPP is 0x7E, ESC is 0x7D.<br  />
To stuff(unstuff) a byte, add(remove) ESC(0x7D),<br  />
and XOR byte with 0x20.<br  />
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Error Detection</h3>
<div class="outline-text-3" id="text-2-2">
</div><ol class="org-ol"><li><a id="sec-2-2-1" name="sec-2-2-1"></a>Keywords<br  /><ul class="org-ul"><li><a id="sec-2-2-1-1" name="sec-2-2-1-1"></a>Codeword<br  /><div class="outline-text-5" id="text-2-2-1-1">
<p>
An n-bit unit containing data and check bits is often referred to as an n-bit codeword.
</p>
</div>
</li>
<li><a id="sec-2-2-1-2" name="sec-2-2-1-2"></a>Hamming distance<br  /><div class="outline-text-5" id="text-2-2-1-2">
<p>
The number of bit positions in which two codewords differ is called the Hamming distance.
</p>

<ul class="org-ul">
<li>To detect <b>d</b> errors, we need <b>d+1</b> distance.
</li>
</ul>
<pre class="example">
000, 111
001, 101 are both wrong.
</pre>

<ul class="org-ul">
<li>To correct <b>d</b> errors, we need <b>2d+1</b> distance.
</li>
</ul>
<pre class="example">
0000000000, 0000011111, 1111100000, 1111111111
Hamming distance: 5
Number of errors will be corrected: 2
When we get 0000000111,
If 2 errors occured, the rec
When we get 0000000111(2 errors occured), we can correct it: 0000011111
if three errors happen(0000000011), this code doesn't work.
</pre>
</div>
</li></ul>
</li>

<li><a id="sec-2-2-2" name="sec-2-2-2"></a>Parity<br  /><div class="outline-text-4" id="text-2-2-2">
<p class="verse">
Take D data bits, add 1 check bit.<br  />
Check bit is the sum of the D bits module 2.(diff by even sum or odd)<br  />
Distance: 2<br  />
Detect 1 error<br  />
</p>
</div>
</li>

<li><a id="sec-2-2-3" name="sec-2-2-3"></a>Checksums<br  /><div class="outline-text-4" id="text-2-2-3">
<ul class="org-ul">
<li>Sending
</li>
</ul>

<p>
Sum is defined in 1s complement.
</p>
<ol class="org-ol">
<li>Arrange data in 16-bit words
</li>
<li>Add all
</li>
<li>Add with the carryover back to get 16bits
</li>
<li>Trans to 1s Complement
</li>
</ol>

<pre class="example">
0001+f203+f4f5+f6f7=2ddf0
ddf0+2=ddf2
ddf2-&gt;220d
</pre>

<ul class="org-ul">
<li>Receiving
</li>
</ul>


<ol class="org-ol">
<li>Arrange data in 16-bit words
</li>
<li>Add all + checksum
</li>
<li>Add any carryover back to get 16bits.
</li>
<li>Negate the result and check it is 0.
</li>
</ol>

<pre class="example">
0001+f203+f4f5+f6f7+220d=2fffd
fffd+2 = ffff
ffff-&gt;0
</pre>

<ul class="org-ul">
<li>Conclusion
</li>
</ul>
<p class="verse">
Distance: 2<br  />
Detect 1 error<br  />
</p>
</div>
</li>

<li><a id="sec-2-2-4" name="sec-2-2-4"></a>CRC(Cyclic Redundancy Check)<br  /><div class="outline-text-4" id="text-2-2-4">
<p class="verse">
Given n data bits, generate k check bits such that the n+k bits are evenly<br  />
divisible by a generator C.<br  />
C(x) use the polynomial code:<br  />
eg: 10011010 is \(x^7+x^4+x^3+x^1\)<br  />
Both the high- and low-order bits of the generator must be 1<br  />
</p>

<ul class="org-ul">
<li>Sending

<ol class="org-ol">
<li>Extend the n data bits with k zeros
</li>
<li>Divide by the generator value C
</li>
<li>Keep remainder, ignore quotient
</li>
<li>Adjust k check bits by remainder
</li>
</ol>
<pre class="example">
Frame: 1101011011
Generator: 10011
K: 4 bits
11010110110000 devided by 10011
Reminder: 0010
</pre>

<p class="verse">
Note that: There are no carries for addition or borrows<br  />
for subtraction. Both addition and subtraction are<br  />
identical to exclusive OR.<br  />
</p>
</li>
</ul>


<ul class="org-ul">
<li>Receiving

<ol class="org-ol">
<li>Divide and check for zero remainder
</li>
</ol>
</li>
</ul>


<ul class="org-ul">
<li>Conclusion
<p class="verse">
Protection depends on generator.<br  />
Standard CRC-32 is: 1 0000 0100 1100 0001 0001 1101 1011 0111<br  />
Distance: 4<br  />
Detect 3 errors<br  />
</p>
</li>
</ul>
</div>
</li>

<li><a id="sec-2-2-5" name="sec-2-2-5"></a>In Practice<br  /><div class="outline-text-4" id="text-2-2-5">
<p>
CRCs are widely used on links
</p>
<ul class="org-ul">
<li>Ethernet, 802.11, ADSL, Cable&#x2026;
</li>
</ul>
<p>
Checksum used in Internet
</p>
<ul class="org-ul">
<li>IP, TCP, UDP
</li>
</ul>
<p>
Parity
</p>
<ul class="org-ul">
<li>Is little used
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Error Correction</h3>
<div class="outline-text-3" id="text-2-3">
</div><ol class="org-ol"><li><a id="sec-2-3-1" name="sec-2-3-1"></a>Hamming Code<br  /><div class="outline-text-4" id="text-2-3-1">
<p class="verse">
Uses \(n=2^k-k-1\)<br  />
n: data bits<br  />
k: check bits<br  />
eg: n=4, k=3<br  />
</p>
<ul class="org-ul">
<li>Put check bits in positions p that are powers of 2, starting with position 1
</li>
<li>Check bit in position p is parity of positions with a p term in their values
</li>
</ul>


<div class="figure">
<p><img src="../resources/network/HammingCodeModel.png" alt="HammingCodeModel.png" />
</p>
</div>

<ul class="org-ul">
<li>Encoding
</li>
</ul>
<pre class="example">
data=0101, 3 check bits
__0_101
P1=0+1+1=0
P2=0+0+1=1
P4=1+0+1=0
After encoded: 0100101
</pre>

<ul class="org-ul">
<li>Decoding
</li>
</ul>
<pre class="example">
0100101
P1=P1+D3+D5+D7=0+0+1+1=0
P2=P2+D3+D6+D7=1+0+0+1=0
P4=P4+D5+D6+D7=0+1+0+1=0
Syndrome=000, no error

0100111
P1=0, P2=1, P4=1
Syndrome=110-&gt;6
The 6th bit is wrong.
</pre>
</div>
</li></ol>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Detection vs. Correction</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Error correction:
</p>
<ul class="org-ul">
<li>Needed when errors are expected
</li>
<li>When no time for retransmission
</li>
</ul>

<p>
Error dection:
</p>
<ul class="org-ul">
<li>More efficient when errors are not expected
</li>
<li>When errors are large when they do occur
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> ARP(Address Resolution Protocol)</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Node uses ARP to map a local IP address to its Link layer address
</p>

<div class="figure">
<p><img src="../resources/network/ARPPurpose.png" alt="ARPPurpose.png" />
</p>
</div>

<ul class="org-ul">
<li>No servers, just asks node with target IP.
</li>
<li>Uses <b>broadcast</b> to reach all nodes.
</li>
</ul>


<div class="figure">
<p><img src="../resources/network/ARPSeq.png" alt="ARPSeq.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Medium Access Control Sublayer</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Retransmissions</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Detect errors and retransmit frame(Automatic Repeat reQuest, ARQ)
</p>
<ul class="org-ul">
<li>ARQ often used when errors are common or must be corrected. E.g., WIFI, TCP
</li>
<li>Rules
</li>
</ul>
<p class="verse">
Receiver automatically confirms with an ACK.<br  />
Sender automatically resends after a timeout, until an ACK is received<br  />
</p>
<p>
Two non-trivial issues: <b>Timeouts</b> and <b>Duplicates</b>
</p>
</div>
<ol class="org-ol"><li><a id="sec-3-1-1" name="sec-3-1-1"></a>Timeouts<br  /><div class="outline-text-4" id="text-3-1-1">
<p>
Should be
</p>
<ul class="org-ul">
<li>Not too long (link goes idle)
</li>
<li>Not too short (spurious resend)
</li>
</ul>
</div>
</li>
<li><a id="sec-3-1-2" name="sec-3-1-2"></a>Duplicates<br  /><div class="outline-text-4" id="text-3-1-2">
<p>
Two ways to solve this problem:
</p>
</div>
<ul class="org-ul"><li><a id="sec-3-1-2-1" name="sec-3-1-2-1"></a>Stop-and-Wait<br  /><div class="outline-text-5" id="text-3-1-2-1">
<p>
Add a single bit to distinguish the current frame from the next one(in the head of the frame)
</p>
<ul class="org-ul">
<li>Normal Case


<div class="figure">
<p><img src="../resources/network/SaWNormalCase.png" alt="SaWNormalCase.png" />
</p>
</div>
</li>
<li>With Ack Loss


<div class="figure">
<p><img src="../resources/network/SaWWithACKLoss.png" alt="SaWWithACKLoss.png" />
</p>
</div>
</li>
<li>With Early Timeout


<div class="figure">
<p><img src="../resources/network/SaWWithEarlyTimeout.png" alt="SaWWithEarlyTimeout.png" />
</p>
</div>
</li>

<li>Limitation of Stop-and-Wait
<p class="verse">
Stop-and-Wait allows only one frame to<br  />
be outstanding from the sender at a time.<br  />
Not good with high BD networks.<br  />
</p>
</li>
</ul>
</div>
</li>
<li><a id="sec-3-1-2-2" name="sec-3-1-2-2"></a>Sliding Window<br  /><div class="outline-text-5" id="text-3-1-2-2">
<p>
Generalization of Stop-and-Wait
</p>
<ul class="org-ul">
<li>Allow W frams to be outstanding
</li>
<li>Can send W frams per RTT (= 2D + transmission time, Round Trip Time)
</li>
<li>Various options for numbering frams/ACKs and handling loss
</li>
</ul>
</div>
</li></ul>
</li></ol>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Multiplexing</h3>
<div class="outline-text-3" id="text-3-2">
<p>
<b>Multiplexing</b> is the network word for the sharing of a resource.
</p>
<ul class="org-ul">
<li>Time Division Multiplexing (TDM)

<p>
Users take turns on a fixed schedule
</p>
</li>

<li>Frequency Division Multiplexing (FDM)

<p>
Put different users on different frequency bands
</p>
</li>
</ul>
</div>
<ol class="org-ol"><li><a id="sec-3-2-1" name="sec-3-2-1"></a>TDM/FDM Usage<br  /><div class="outline-text-4" id="text-3-2-1">
<ul class="org-ul">
<li>Statically divide a resource
<p class="verse">
Suited for continuous traffic, fixed<br  />
number of users<br  />
</p>
</li>

<li>Widely used in telecommunications
<p class="verse">
E.g:<br  />
TV and radio stations: FDM<br  />
GSM (2G cellular): TDM within FDM<br  />
</p>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Multiple Access Control</h3>
<div class="outline-text-3" id="text-3-3">
</div><ol class="org-ol"><li><a id="sec-3-3-1" name="sec-3-3-1"></a>Randomized Multiple Access<br  /><ul class="org-ul"><li><a id="sec-3-3-1-1" name="sec-3-3-1-1"></a>ALOHA<br  /><div class="outline-text-5" id="text-3-3-1-1">
<p class="verse">
Simple idea:<br  />
If there was a collision(no ACK received) then wait<br  />
a random time and resend.<br  />
</p>
<ul class="org-ul">
<li>Low load: Works well
</li>
<li>High load: Need improvement

<p>
Improvement: divide time into slots(transmit frames at the beginnings of slots)
</p>
</li>
</ul>
</div>
</li>

<li><a id="sec-3-3-1-2" name="sec-3-3-1-2"></a>CSMA(Carrier Sense Multiple Access)<br  /><div class="outline-text-5" id="text-3-3-1-2">
<ul class="org-ul">
<li><b>carrier sensing</b> (CSMA)

<p class="verse">
A node listens to the channel before transmitting.<br  />
</p>
</li>

<li><b>collision detection</b> (CSMA/CD)

<p class="verse">
A transmitting node listens to the channel while it is transmitting.<br  />
If it detects that another node is transmitting an interfering frame,<br  />
it stops transmitting and wait a random amount time before repeating.<br  />
</p>

<ul class="org-ul">
<li>Complications

<p class="verse">
Time window in which a node may hear of a collision is 2D seconds.<br  />
Solution: Impose a minimum frame size that last for 2D seconds.<br  />
Then, node can't finish before collision.<br  />
Note that: Ethernet minimum frame is 64bytes.<br  />
</p>
</li>

<li>Persistence

<p class="verse">
Multiple waiting nodes will queue up then collide.<br  />
Espacially on high load network.<br  />
<br  />
Idea to solve: N queued senders, each send probability 1/N. How to estimate?<br  />
<br  />
In practice: BEB(Binary Exponential Backoff)<br  />
Clever estimates the probability:<br  />
1st collision, wait 0 to 1 frame times; 2nd, 0 to 3; 3rd, 0 to 7;<br  />
BEB doubles interval for each successive collision.<br  />
</p>
</li>

<li>Summary

<ul class="org-ul">
<li>CSMA Improve ALOHA by listening for activity before sending.
</li>
<li>Can do easily with wire.
</li>
<li>Still possible to hear nothing when another node is sending because of delay.
</li>
<li>CSMA is a good defense against collisions only when BD is small
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-3-3-1-3" name="sec-3-3-1-3"></a>Classic Ethernet<br  /><div class="outline-text-5" id="text-3-3-1-3">
<ul class="org-ul">
<li>10 Mbps over shared coaxial cable
</li>
<li>1-persistent CSMA/CD with BEB
</li>
<li>Frame Format
<ul class="org-ul">
<li>contains addresses of sender and receiver
</li>
<li>CRC-32 for error detection
</li>
<li>No ACKs or retransmission
</li>
<li>Start of frame identified with physical layer preamble
</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />
</colgroup>
<tbody>
<tr>
<td class="right">Preamble</td>
<td class="right">Dest addr</td>
<td class="right">Source addr</td>
<td class="right">Type</td>
<td class="right">Data(Packet from Network layer)</td>
<td class="right">Pad</td>
<td class="right">Check-sum</td>
</tr>

<tr>
<td class="right">8</td>
<td class="right">6</td>
<td class="right">6</td>
<td class="right">2</td>
<td class="right">0-1500</td>
<td class="right">0-46</td>
<td class="right">4</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li></ul>
</li>
<li><a id="sec-3-3-2" name="sec-3-3-2"></a>Wireless Multiple Access<br  /><ul class="org-ul"><li><a id="sec-3-3-2-1" name="sec-3-3-2-1"></a>Complications<br  /><div class="outline-text-5" id="text-3-3-2-1">
<p>
Wireless can't work with CSMA/CD
</p>

<ul class="org-ul">
<li>Nodes may have different areas of coverage

<p>
May case two problems:
</p>

<ul class="org-ul">
<li>Hidden Terminals

<p>
A and C are hidden terminals when sending to B
</p>

<div class="figure">
<p><img src="../resources/network/HiddenTerminal.png" alt="HiddenTerminal.png" />
</p>
</div>
</li>

<li>Exposed Terminals

<p>
B and C are exposed terminals when sending to A and D
</p>

<div class="figure">
<p><img src="../resources/network/ExposedTerminal.png" alt="ExposedTerminal.png" />
</p>
</div>
</li>
</ul>
</li>
</ul>


<ul class="org-ul">
<li>Nodes can't hear while sending

<p>
Detecting collisions wasted much time with wireless.
</p>
</li>
</ul>
</div>
</li>
<li><a id="sec-3-3-2-2" name="sec-3-3-2-2"></a>MACA Protocol<br  /><div class="outline-text-5" id="text-3-3-2-2">
<p>
Uses a short handshake instead of CSMA
</p>

<ol class="org-ol">
<li>Sender transmits a RTS(Request-To-Send) with frame length
</li>
<li>Receiver replies with a CTS(Clear-To-Send) with frame length
</li>
<li>Sender transmits the frame while hearing the CTS <span class="underline">stay silent</span>
</li>
</ol>


<ul class="org-ul">
<li>Solution For Hidden Terminals


<div class="figure">
<p><img src="../resources/network/MACAHiddenTerminal.png" alt="MACAHiddenTerminal.png" />
</p>
</div>
</li>

<li>Solution For Exposed Terminals


<div class="figure">
<p><img src="../resources/network/MACAExposedTerminal.png" alt="MACAExposedTerminal.png" />
</p>
</div>
</li>

<li>Collisions on the RTS/CTS are still possible, but less likely
</li>
</ul>
</div>
</li>
<li><a id="sec-3-3-2-3" name="sec-3-3-2-3"></a>802.11<br  /><div class="outline-text-5" id="text-3-3-2-3">
<ul class="org-ul">
<li>Physical Layer
<ul class="org-ul">
<li>Uses 20/40Mhz, b/g/n on 2.4GHz, a/n on 5GHz
</li>
</ul>
</li>
<li>Link Layer
<ul class="org-ul">
<li>Multiple access uses CSMA/CA; RTS/CTS optional

<div class="figure">
<p><img src="../resources/network/CSMACASeq.png" alt="CSMACASeq.png" />
</p>
</div>

<p>
Backoff is a small random gap.
</p>
</li>

<li>Frames are ACKed and retransmitted with ARQ
</li>
<li>Three addresses(due to AP)
</li>
<li>Errors are detected with a 32-bit CRC
</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />
</colgroup>
<tbody>
<tr>
<td class="right">Frame control</td>
<td class="right">Duration</td>
<td class="right">Dest addr</td>
<td class="right">Source addr</td>
<td class="right">AP addr</td>
<td class="right">Data</td>
<td class="right">Check-sum</td>
</tr>

<tr>
<td class="right">2</td>
<td class="right">2</td>
<td class="right">6</td>
<td class="right">6</td>
<td class="right">6</td>
<td class="right">0-2312</td>
<td class="right">4</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li></ul>
</li>

<li><a id="sec-3-3-3" name="sec-3-3-3"></a>Turn-Taking Multiple Access<br  /><div class="outline-text-4" id="text-3-3-3">
<p>
Issue about CSMA under high load:
</p>
<ul class="org-ul">
<li>High overhead(expect collisions)
</li>
<li>Access time varies(random)
</li>
</ul>

<p class="verse">
Turn-Taking protocol defines an order in which nodes get a chance to send.<br  />
The way to define ordering:<br  />
E.g Token Ring, node addresses<br  />
</p>

<ul class="org-ul">
<li>Token Ring

<p>
Arrange nodes in a ring. Token rotates permission to send to each node in turn.
</p>

<div class="figure">
<p><img src="../resources/network/TokenRing.png" alt="TokenRing.png" />
</p>
</div>
</li>
</ul>


<ul class="org-ul">
<li>Advantages:

<ol class="org-ol">
<li>Fixed overhead with no collisions
</li>
<li>Regular chance to send with no unlucky nodes
</li>
</ol>
</li>

<li>DisAdvantages(Complexity):

<ol class="org-ol">
<li>More things could be wrong. E.g: token lost
</li>
<li>High overhead at low load
</li>
</ol>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Switching</h3>
<div class="outline-text-3" id="text-3-4">
<p class="verse">
Hub/repeater for physical layer.<br  />
Router for network layer.<br  />
Switch for link layer.<br  />
</p>
<p>
Inside Switch Box:
</p>


<div class="figure">
<p><img src="../resources/network/InsideSwitch.png" alt="InsideSwitch.png" />
</p>
</div>

<p class="verse">
Uses buffers for multiple inputs to send to one output,<br  />
may overload, and lead to frame loss.<br  />
</p>


<div class="figure">
<p><img src="../resources/network/SwitchBuffer.png" alt="SwitchBuffer.png" />
</p>
</div>
</div>

<ol class="org-ol"><li><a id="sec-3-4-1" name="sec-3-4-1"></a>Switch Forwarding<br  /><div class="outline-text-4" id="text-3-4-1">
<p>
Uses a learning table, sends to the port in the table or broadcasts to all ports.
</p>
</div>
</li>

<li><a id="sec-3-4-2" name="sec-3-4-2"></a>Switch Spanning Tree<br  /><div class="outline-text-4" id="text-3-4-2">
<ul class="org-ul">
<li>How can we connect switches in any topology?
</li>
<li>Problem - forwarding loops


<div class="figure">
<p><img src="../resources/network/RedundantLinks.png" alt="RedundantLinks.png" />
</p>
</div>

<p>
Redundancy in case of failures. But loops occurs:
</p>

<ol class="org-ol">
<li>\(A\to C\to B, D-left, D-right\)
</li>
<li>\(D-left\to C-right, E, F\)
</li>
<li>\(D-right\to C-left, E, F\)
</li>
<li>\(C-right\to D-left, A, B\)
</li>
<li>\(C-left\to D-right, A, B\)
</li>
<li>&#x2026;
</li>
</ol>
</li>
</ul>
</div>

<ul class="org-ul"><li><a id="sec-3-4-2-1" name="sec-3-4-2-1"></a>Solution<br  /><div class="outline-text-5" id="text-3-4-2-1">
<p>
Switches collectively find a spanning tree for the topology
</p>


<div class="figure">
<p><img src="../resources/network/STSolution1.png" alt="STSolution1.png" />
</p>
</div>

<ul class="org-ul">
<li>Outline

<ol class="org-ol">
<li>Elect a root node of the tree(switch with the lowest addr)
</li>
<li>Grow tree as shortest distances from the root
</li>
<li>Turn off ports for forwarding if they aren't on the spanning tree
</li>
</ol>
</li>
</ul>


<ul class="org-ul">
<li>Algorithm

<ol class="org-ol">
<li>Each switch initially believes it is the root of the tree
</li>
<li>Each switch sends periodic updates to neighbors
</li>
<li>Switches favors ports with shorter distances to lowest root
</li>
</ol>
<p class="verse">
Update Information like:<br  />
Hi, I'm <b>C</b>, the root is <b>A</b>, it's <b>2</b> hops away. (C, A, 2)<br  />
</p>
</li>
</ul>


<ul class="org-ul">
<li>Example:
<ul class="org-ul">
<li>At the beginning


<div class="figure">
<p><img src="../resources/network/STExample1.png" alt="STExample1.png" />
</p>
</div>
</li>

<li>1st round, sending:

<p>
A sends (A,A,0) to say it is root. Same as B, C, D, E and F.
</p>
</li>

<li>1st round, receiving:
<p class="verse">
A still thinks (A,A,0)<br  />
B still thinks (B,B,0)<br  />
C updates to (C,A,1)<br  />
D updates to (D,C,1)<br  />
E updates to (E,A,1)<br  />
F updates to (F,B,1)<br  />
</p>

<div class="figure">
<p><img src="../resources/network/STExample2.png" alt="STExample2.png" />
</p>
</div>
</li>

<li>2nd round, receiving:
<p class="verse">
A still thinks (A,A,0)<br  />
B updates to (B,A,2) via C<br  />
C remains (C,A,1)<br  />
D updates to (D,A,2) via C<br  />
E remains (E,A,1)<br  />
F remains (F,B,1)<br  />
</p>

<div class="figure">
<p><img src="../resources/network/STExample3.png" alt="STExample3.png" />
</p>
</div>
</li>

<li>3rd round, receiving:
<p class="verse">
A remains (A,A,0)<br  />
B remains (B,A,2)<br  />
C remains (C,A,1)<br  />
D remains (D,A,2)<br  />
E remains (E,A,1)<br  />
F updates to (F,A,3) via B<br  />
</p>

<div class="figure">
<p><img src="../resources/network/STExample4.png" alt="STExample4.png" />
</p>
</div>
</li>

<li>4th round
<p class="verse">
Steady-state has be reached<br  />
Turn off forwarding that is not on spanning tree<br  />
</p>
</li>

<li>Continus to run
<p class="verse">
Adapts by timeing out information<br  />
E.g: If A fails, other nodes forget it, and B will become the new root<br  />
</p>
</li>
</ul>
</li>
</ul>
</div>
</li></ul>
</li></ol>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Network Layer</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Service Models</h3>
<div class="outline-text-3" id="text-4-1">
</div><ol class="org-ol"><li><a id="sec-4-1-1" name="sec-4-1-1"></a>Store-and-Forward<br  /><div class="outline-text-4" id="text-4-1-1">
<p class="verse">
Both of two models use Store-and-Forward packet switching.<br  />
Switching element has internal buffering for contention.<br  />
</p>

<ul class="org-ul">
<li>Buffer is typically a FIFO queue
</li>
<li>If full, packets will be discarded
</li>
</ul>
</div>
</li>
<li><a id="sec-4-1-2" name="sec-4-1-2"></a>Datagrams(Connectionless)<br  /><div class="outline-text-4" id="text-4-1-2">
<p>
Like postal letters
</p>
<ul class="org-ul">
<li>Packets contain a dest. address
</li>
<li>Each router has a forwarding table(often changes) keyed by dest addr.
Example table:
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Router A's Table</caption>

<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Dest.</th>
<th scope="col" class="left">Line</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">A</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">B</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">C</td>
<td class="left">C</td>
</tr>

<tr>
<td class="left">D</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">E</td>
<td class="left">C</td>
</tr>

<tr>
<td class="left">F</td>
<td class="left">C</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>

<li><a id="sec-4-1-3" name="sec-4-1-3"></a>Virtual Circuits(Connection-Oriented)<br  /><div class="outline-text-4" id="text-4-1-3">
<p>
Like a telephone call. Three steps:
</p>
<ol class="org-ol">
<li>Connection establishment, circuit is set up (Path is chosen, circuit info stored in routers)
</li>
<li>Data transfer, circuit is used
</li>
<li>Connection teardown, circuit is deleted
</li>
</ol>


<ul class="org-ul">
<li>Virtual means there's no bandwidth need be reserved
</li>
<li>Packets only contain a short label to identify the circuit
</li>
<li>Each router has a forwarding table keyed by circuit

<div class="figure">
<p><img src="../resources/network/VirtualCircuitsTable.png" alt="VirtualCircuitsTable.png" />
</p>
</div>
</li>
</ul>
</div>


<ul class="org-ul"><li><a id="sec-4-1-3-1" name="sec-4-1-3-1"></a>MPLS(Multi-Protocol Label Switching)<br  /><div class="outline-text-5" id="text-4-1-3-1">
<p>
A virtual-circuit like technology widely used by ISPs.
</p>

<ul class="org-ul">
<li>ISP set up circuits inside their backbone ahead of time
</li>
<li>ISP add MPLS label to IP packet at ingress, undoes at egress


<div class="figure">
<p><img src="../resources/network/MPLSStructure.png" alt="MPLSStructure.png" />
</p>
</div>
</li>
</ul>
</div>
</li></ul>
</li>

<li><a id="sec-4-1-4" name="sec-4-1-4"></a>Datagrams vs Virtual Circuits<br  /><div class="outline-text-4" id="text-4-1-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Issue</th>
<th scope="col" class="left">Datagrams</th>
<th scope="col" class="left">Vitual Circuits</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Setup</td>
<td class="left">Not needed</td>
<td class="left">Required</td>
</tr>

<tr>
<td class="left">Router state</td>
<td class="left">Per destination</td>
<td class="left">Per connection</td>
</tr>

<tr>
<td class="left">Addresses</td>
<td class="left">Packet carries full addr</td>
<td class="left">Packet carries short label</td>
</tr>

<tr>
<td class="left">Routing</td>
<td class="left">Per packet</td>
<td class="left">Per circuit</td>
</tr>

<tr>
<td class="left">Failures</td>
<td class="left">Easier to mask</td>
<td class="left">Hard to mask</td>
</tr>

<tr>
<td class="left">Quality of service</td>
<td class="left">Diffcult to add</td>
<td class="left">Easier to add</td>
</tr>
</tbody>
</table>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> IP(Internet Protocol)</h3>
<div class="outline-text-3" id="text-4-2">
</div><ol class="org-ol"><li><a id="sec-4-2-1" name="sec-4-2-1"></a>Internetworking<br  /><div class="outline-text-4" id="text-4-2-1">
<p>
Connecting different networks together called internetworking. Differs:
</p>
<ul class="org-ul">
<li>Service model(datagrams, VCs)
</li>
<li>Addressing
</li>
<li>QOS(priorities, no priorities)
</li>
<li>Packet sizes
</li>
<li>Security(whether encrypted)
</li>
</ul>

<p>
IP is the "narrow waist" of the internet.
</p>


<div class="figure">
<p><img src="../resources/network/IPNarrowWaist.png" alt="IPNarrowWaist.png" />
</p>
</div>
<p class="verse">
The idea is make IP as a lowest common denominator.<br  />
Ask little from lower-layer, gives little to a higher-layer.<br  />
</p>
</div>
</li>
<li><a id="sec-4-2-2" name="sec-4-2-2"></a>IPv4<br  /><div class="outline-text-4" id="text-4-2-2">
<p class="verse">
IPv4 carries 32-bit addresses on each packet(often 1.5KB)<br  />
<br  />
Uses datagrams, you can see Source and Destination addr inside.<br  />
</p>

<p>
The fields to handle the difference of networks:
</p>

<ul class="org-ul">
<li>Identification, Fragment offset, Fragment control bits for different packet size.
</li>

<li>Differentiated Services for QOS
</li>

<li>Time to live(TTL) for ICMP
</li>
</ul>


<div class="figure">
<p><img src="../resources/network/IPProtocol.png" alt="IPProtocol.png" />
</p>
</div>
</div>

<ul class="org-ul"><li><a id="sec-4-2-2-1" name="sec-4-2-2-1"></a>IP Prefix<br  /><div class="outline-text-5" id="text-4-2-2-1">
<p>
Notation: IP address/prefix-length E.g:128.13.0.0/16
</p>
</div>
</li>

<li><a id="sec-4-2-2-2" name="sec-4-2-2-2"></a>IP Allocation<br  /><div class="outline-text-5" id="text-4-2-2-2">

<div class="figure">
<p><img src="../resources/network/IPAllocation.png" alt="IPAllocation.png" />
</p>
</div>
</div>
</li></ul>
</li>

<li><a id="sec-4-2-3" name="sec-4-2-3"></a>IP Forwarding<br  /><div class="outline-text-4" id="text-4-2-3">
<p>
Nodes uses a table that lists the next hop for IP prefixes. Example:
</p>

<div class="figure">
<p><img src="../resources/network/HopList.png" alt="HopList.png" />
</p>
</div>

<ul class="org-ul">
<li>Longest Matching Prefix
<p class="verse">
Prefixes can overlap!<br  />
In example above,<br  />
D: 192.24.0~63.0~255<br  />
B: 192.24.12~15.0~255<br  />
</p>

<div class="figure">
<p><img src="../resources/network/IPOverlap.png" alt="IPOverlap.png" />
</p>
</div>
</li>
</ul>


<p>
The rule is to <b>more specific</b> area. This rule called <b>Longest Matching Prefix</b>.
</p>

<ul class="org-ul">
<li>Flexibility
<p class="verse">
provide default behavior, with less specific prefixes.<br  />
E.g. send traffic going outside an organization to a border router.<br  />
<br  />
special case behavior, with more specific prefixes.<br  />
E.g. For performance, economics, security<br  />
</p>
</li>
</ul>


<ul class="org-ul">
<li>Host Forwarding Table
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Prefix</th>
<th scope="col" class="left">Next Hop</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">My network prefix</td>
<td class="left">Send direct to that IP</td>
</tr>

<tr>
<td class="left">0.0.0.0/0</td>
<td class="left">Send to my router</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>0.0.0.0/0 is a default route that catches all IP addresses.
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-4" name="sec-4-2-4"></a>Packet Size Issue<br  /><div class="outline-text-4" id="text-4-2-4">
<p class="verse">
Different networks have different maximum packet sizes.<br  />
Also known MTU(Maximum Transmission Unit)<br  />
Two solutions:<br  />
</p>
</div>
<ul class="org-ul"><li><a id="sec-4-2-4-1" name="sec-4-2-4-1"></a>Fragmentation<br  /><div class="outline-text-5" id="text-4-2-4-1">
<p>
Split up large packets in the network-&#x2014;classic method, dated.
</p>

<div class="figure">
<p><img src="../resources/network/PacketFragmentation.png" alt="PacketFragmentation.png" />
</p>
</div>


<p class="verse">
Related fields:<br  />
MF=More Fragment<br  />
DF=Don't Fragment<br  />
identification field links pieces together.<br  />
</p>


<div class="figure">
<p><img src="../resources/network/FragmentationFields.png" alt="FragmentationFields.png" />
</p>
</div>

<ul class="org-ul">
<li>Procedure

<ol class="org-ol">
<li>Copy IP header to pieces
</li>
<li>Adjust length on pieces
</li>
<li>Set offset to indicate position
</li>
<li>Set MF on all pieces except last
</li>
</ol>
</li>
</ul>



<div class="figure">
<p><img src="../resources/network/FragmentationExample.png" alt="FragmentationExample.png" />
</p>
</div>

<ul class="org-ul">
<li>Disadvantages
<ul class="org-ul">
<li>More work for routers, hosts
</li>
<li>Tends to magnify loss rate
</li>
<li>Security vulnerabilities
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-4-2" name="sec-4-2-4-2"></a>Discovery<br  /><div class="outline-text-5" id="text-4-2-4-2">
<p>
Find the largest packet that fits on the network path.
</p>
<ul class="org-ul">
<li>Solution
Host tests path with large packet.


<div class="figure">
<p><img src="../resources/network/MTUDiscovery.png" alt="MTUDiscovery.png" />
</p>
</div>

<p class="verse">
Implemented with ICMP.<br  />
Set DF(Don't Fragment) bit in IP header to get feedback messages.<br  />
</p>
</li>
</ul>
</div>
</li></ul>
</li>

<li><a id="sec-4-2-5" name="sec-4-2-5"></a>ICMP(Internet Control Message Protocol)<br  /><div class="outline-text-4" id="text-4-2-5">
<p class="verse">
On IP Header: IP Protocol = 1<br  />
Provides error report and testing<br  />
<br  />
When router encounters an error while forwarding:<br  />
</p>
<ol class="org-ol">
<li>Sends an ICMP error report back to the IP source address
</li>
<li>Discards the problematic packet(host needs to rectify)
</li>
</ol>


<div class="figure">
<p><img src="../resources/network/RouterReturnICMPError.png" alt="RouterReturnICMPError.png" />
</p>
</div>

<ul class="org-ul">
<li>ICMP Message

<p class="verse">
ICMP message has a type, code, and checksum<br  />
Often carry the start of the offending packet as payload<br  />
Each message is carried in an IP packet<br  />
</p>


<div class="figure">
<p><img src="../resources/network/ICMPMessage.png" alt="ICMPMessage.png" />
</p>
</div>

<p>
Some examples:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Name</th>
<th scope="col" class="left">Type/Code</th>
<th scope="col" class="left">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Dest. Unreachable(Net or Host)</td>
<td class="left">3/ 0or1</td>
<td class="left">Lack of connectivity</td>
</tr>

<tr>
<td class="left">Dest. Unreachable(Fragment)</td>
<td class="left">3/4</td>
<td class="left">Path MTU Discovery</td>
</tr>

<tr>
<td class="left">Time Exceeded(Transit)</td>
<td class="left">11/0</td>
<td class="left"><b>Traceroute</b></td>
</tr>

<tr>
<td class="left">Echo Request or Reply</td>
<td class="left">8or0 /0</td>
<td class="left">Ping</td>
</tr>
</tbody>
</table>

<p>
The last two are used for testing.
</p>
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-6" name="sec-4-2-6"></a>IPv6<br  /><div class="outline-text-4" id="text-4-2-6">
<ul class="org-ul">
<li>128 bits address
<p class="verse">
8 groups of 4 hex digits. Omit <b>leading</b> zeros and group of zeros.<br  />
Ex: 2001:0db8:0000:0000:0000:ff00:0042:8329<br  />
-&gt; 2001:db8:ff:42:8329<br  />
</p>
</li>

<li>Message Format


<div class="figure">
<p><img src="../resources/network/IPv6Format.png" alt="IPv6Format.png" />
</p>
</div>

<p>
The changes:
</p>
<ul class="org-ul">
<li>Streamlined header processing
</li>
<li>Flow lable to group of packets
</li>
<li>Better fit with advanced features(mobility, multicasting, security)
</li>
</ul>
</li>

<li>Deploy Issue
<p class="verse">
The format incompatible with IPv4<br  />
Solutions:<br  />
</p>
<ul class="org-ul">
<li>Dual stack (speak IPv4 and IPv6)
</li>
<li>Translators (convert packets)
</li>
<li>Tunnels (carry IPv6 on IPv4)


<div class="figure">
<p><img src="../resources/network/IPv6Tunneling.png" alt="IPv6Tunneling.png" />
</p>
</div>
</li>
</ul>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Traceroute</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Uses TTL(Time to live) field in IP header.
</p>

<div class="figure">
<p><img src="../resources/network/TimeToLiveField.png" alt="TimeToLiveField.png" />
</p>
</div>
<p class="verse">
TTL decremented every router hop, with ICMP error if it hits zero.<br  />
It also protects against forwarding loops.<br  />
<br  />
Traceroute sends probe packets increasing TTL starting from 1.<br  />
</p>


<div class="figure">
<p><img src="../resources/network/TraceRouterFlow.png" alt="TraceRouterFlow.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> NAT(Network Address Translation)</h3>
<div class="outline-text-3" id="text-4-4">
<p class="verse">
NAT is one type of the <b>middle box</b>.<br  />
<b>Middle box</b> provides new functionality(NAT, firewall, Intrusion Detection).<br  />
NAT holds a table, map internal IP:Port with External IP:Port.<br  />
May look like the following table:<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="right">Internal</th>
<th scope="col" class="right">External</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">192.168.1.12:5523</td>
<td class="right">44.25.80.3:1500</td>
</tr>

<tr>
<td class="right">192.168.1.13:1234</td>
<td class="right">44.25.80.3:1501</td>
</tr>

<tr>
<td class="right">192.168.2.20:1234</td>
<td class="right">44.25.80.3:1502</td>
</tr>
</tbody>
</table>

<p class="verse">
Internal&rarr; External: looks up the map, changes the src IP:Port.<br  />
External&rarr; Internal: changes the dest IP:Port.<br  />
</p>

<ul class="org-ul">
<li>Advantage
<ul class="org-ul">
<li>Relieves much public IP address pressure
</li>
<li>Easy to deploy
</li>
<li>Useful functionality(helps with privacy, firewall, etc.)
</li>
</ul>
</li>

<li>Disadvantage

<ul class="org-ul">
<li>Connectivity has been broken
<p class="verse">
Can only send packets after outgoing connection is set up.<br  />
Difficult to run servers or peer-to-peer apps(Skype) at home.<br  />
</p>
</li>

<li>Doesn't work so well with UDP
</li>
<li>Unwisely expose their IP addresses(FTP)?
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Routing</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Distance Vector Routing</h3>
<div class="outline-text-3" id="text-5-1">

<div class="figure">
<p><img src="../resources/network/DVExample.png" alt="DVExample.png" />
</p>
</div>

<ul class="org-ul">
<li>Initial Status
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">To</th>
<th scope="col" class="left">A</th>
<th scope="col" class="left">B</th>
<th scope="col" class="left">C</th>
<th scope="col" class="left">D</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">A</td>
<td class="left">0</td>
<td class="left">\(\infty\)</td>
<td class="left">\(\infty\)</td>
<td class="left">\(\infty\)</td>
</tr>

<tr>
<td class="left">B</td>
<td class="left">\(\infty\)</td>
<td class="left">0</td>
<td class="left">\(\infty\)</td>
<td class="left">\(\infty\)</td>
</tr>

<tr>
<td class="left">C</td>
<td class="left">\(\infty\)</td>
<td class="left">\(\infty\)</td>
<td class="left">0</td>
<td class="left">\(\infty\)</td>
</tr>

<tr>
<td class="left">D</td>
<td class="left">\(\infty\)</td>
<td class="left">\(\infty\)</td>
<td class="left">\(\infty\)</td>
<td class="left">0</td>
</tr>
</tbody>
</table>
</li>

<li>1st Exchange
<p class="verse">
AC: A Cost<br  />
AN: A NextTo<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">To</th>
<th scope="col" class="right">AC</th>
<th scope="col" class="left">AN</th>
<th scope="col" class="right">BC</th>
<th scope="col" class="left">BN</th>
<th scope="col" class="right">CC</th>
<th scope="col" class="left">CN</th>
<th scope="col" class="right">DC</th>
<th scope="col" class="left">DN</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">A</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">3</td>
<td class="left">A</td>
<td class="right">\(\infty\)</td>
<td class="left">--</td>
<td class="right">7</td>
<td class="left">A</td>
</tr>

<tr>
<td class="left">B</td>
<td class="right">3</td>
<td class="left">B</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">6</td>
<td class="left">B</td>
<td class="right">3</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">C</td>
<td class="right">\(\infty\)</td>
<td class="left">--</td>
<td class="right">6</td>
<td class="left">C</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">2</td>
<td class="left">C</td>
</tr>

<tr>
<td class="left">D</td>
<td class="right">7</td>
<td class="left">D</td>
<td class="right">3</td>
<td class="left">D</td>
<td class="right">2</td>
<td class="left">D</td>
<td class="right">0</td>
<td class="left">--</td>
</tr>
</tbody>
</table>
</li>

<li>2nd Exchange
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">To</th>
<th scope="col" class="right">AC</th>
<th scope="col" class="left">AN</th>
<th scope="col" class="right">BC</th>
<th scope="col" class="left">BN</th>
<th scope="col" class="right">CC</th>
<th scope="col" class="left">CN</th>
<th scope="col" class="right">DC</th>
<th scope="col" class="left">DN</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">A</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">3</td>
<td class="left">A</td>
<td class="right">9</td>
<td class="left">B</td>
<td class="right">6</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">B</td>
<td class="right">3</td>
<td class="left">B</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">5</td>
<td class="left">D</td>
<td class="right">3</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">C</td>
<td class="right">9</td>
<td class="left">D</td>
<td class="right">5</td>
<td class="left">D</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">2</td>
<td class="left">C</td>
</tr>

<tr>
<td class="left">D</td>
<td class="right">6</td>
<td class="left">B</td>
<td class="right">3</td>
<td class="left">D</td>
<td class="right">2</td>
<td class="left">D</td>
<td class="right">0</td>
<td class="left">--</td>
</tr>
</tbody>
</table>
</li>

<li>final
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">To</th>
<th scope="col" class="right">AC</th>
<th scope="col" class="left">AN</th>
<th scope="col" class="right">BC</th>
<th scope="col" class="left">BN</th>
<th scope="col" class="right">CC</th>
<th scope="col" class="left">CN</th>
<th scope="col" class="right">DC</th>
<th scope="col" class="left">DN</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">A</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">3</td>
<td class="left">A</td>
<td class="right">8</td>
<td class="left">D</td>
<td class="right">6</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">B</td>
<td class="right">3</td>
<td class="left">B</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">5</td>
<td class="left">D</td>
<td class="right">3</td>
<td class="left">B</td>
</tr>

<tr>
<td class="left">C</td>
<td class="right">8</td>
<td class="left">B</td>
<td class="right">5</td>
<td class="left">D</td>
<td class="right">0</td>
<td class="left">--</td>
<td class="right">2</td>
<td class="left">C</td>
</tr>

<tr>
<td class="left">D</td>
<td class="right">6</td>
<td class="left">B</td>
<td class="right">3</td>
<td class="left">D</td>
<td class="right">2</td>
<td class="left">D</td>
<td class="right">0</td>
<td class="left">--</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-5-1-1" name="sec-5-1-1"></a>Dynamics<br  /><div class="outline-text-4" id="text-5-1-1">
<ul class="org-ul">
<li>Adding routes: one hop per exchange
</li>
<li>Removing routes: no more exchanges
</li>
<li>Partitions are a problem: "Count to infinity" scenario


<div class="figure">
<p><img src="../resources/network/CountToInfty.png" alt="CountToInfty.png" />
</p>
</div>

<p class="verse">
Some way to address: Split horizon, poison reverse.<br  />
(Don't send route back to where you learned it from)<br  />
<br  />
There's no very effective way to solve this problem.<br  />
And now link state favored in practice.<br  />
</p>
</li>
</ul>
</div>
</li>

<li><a id="sec-5-1-2" name="sec-5-1-2"></a>RIP(Routing Information Protocal)<br  /><div class="outline-text-4" id="text-5-1-2">
<ul class="org-ul">
<li>DV protocal with hop count as metric
<ul class="org-ul">
<li>Infinity is 16 hops; limits network size.
</li>
<li>Include split horizon, poison reverse.
</li>
</ul>
</li>

<li>Routers send vectors every 30 secs
<ul class="org-ul">
<li>Runs on top of UDP.
</li>
<li>Timeout in 180 secs to detect failures.
</li>
</ul>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Flooding</h3>
<div class="outline-text-3" id="text-5-2">
</div><ol class="org-ol"><li><a id="sec-5-2-1" name="sec-5-2-1"></a>Rule Used at Each Node<br  /><div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li>Sends an incoming message on to all other neighbors
</li>
<li>Remember the message so that it is only flood once

<p>
Using source and sequence number
</p>
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Transport Layer</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> TCP vs UDP</h3>
<div class="outline-text-3" id="text-6-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">TCP(Streams)</th>
<th scope="col" class="left">UDP(Datagrams)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Connections</td>
<td class="left">Datagrams</td>
</tr>

<tr>
<td class="left">Reliably, and in order</td>
<td class="left">reordered, duplicated, msg may be lost</td>
</tr>

<tr>
<td class="left">Arbitrary length content</td>
<td class="left">Limited message size</td>
</tr>

<tr>
<td class="left">Flow control</td>
<td class="left">Can send regardless of receiver state</td>
</tr>

<tr>
<td class="left">Congestion control</td>
<td class="left">Can send regardless of network state</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Well-known Ports</h3>
<div class="outline-text-3" id="text-6-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="right">Port</td>
<td class="left">Protocol</td>
<td class="left">Use</td>
</tr>

<tr>
<td class="right">20, 21</td>
<td class="left">FTP</td>
<td class="left">File transfer</td>
</tr>

<tr>
<td class="right">22</td>
<td class="left">SSH</td>
<td class="left">Remote login</td>
</tr>

<tr>
<td class="right">25</td>
<td class="left">SMTP</td>
<td class="left">Email</td>
</tr>

<tr>
<td class="right">80</td>
<td class="left">HTTP</td>
<td class="left">World Wide Web</td>
</tr>

<tr>
<td class="right">110</td>
<td class="left">POP-3</td>
<td class="left">Remote email access</td>
</tr>

<tr>
<td class="right">143</td>
<td class="left">IMAP</td>
<td class="left">Remote email access</td>
</tr>

<tr>
<td class="right">443</td>
<td class="left">HTTPS</td>
<td class="left">Secure Web (HTTP over SSL/TLS)</td>
</tr>

<tr>
<td class="right">543</td>
<td class="left">RTSP</td>
<td class="left">Media player control</td>
</tr>

<tr>
<td class="right">631</td>
<td class="left">IPP</td>
<td class="left">Printer sharing</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> UDP socket</h3>
<div class="outline-text-3" id="text-6-3">
</div><ol class="org-ol"><li><a id="sec-6-3-1" name="sec-6-3-1"></a>header<br  /><div class="outline-text-4" id="text-6-3-1">
<ul class="org-ul">
<li>Datagram length up to 64K
</li>
<li>Checksum(16 bits) for reliability
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Source port</td>
<td class="left">Destination</td>
</tr>

<tr>
<td class="left">UDP length</td>
<td class="left">UDP checksum</td>
</tr>
</tbody>
</table>
</div>
</li>

<li><a id="sec-6-3-2" name="sec-6-3-2"></a>sequence<br  /><div class="outline-text-4" id="text-6-3-2">

<div class="figure">
<p><img src="../resources/network/DatagramSockets.png" alt="DatagramSockets.png" />
</p>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> TCP socket</h3>
<div class="outline-text-3" id="text-6-4">
</div><ol class="org-ol"><li><a id="sec-6-4-1" name="sec-6-4-1"></a>Three-way handshake<br  /><div class="outline-text-4" id="text-6-4-1">

<div class="figure">
<p><img src="../resources/network/ThreeWayHandshake.png" alt="ThreeWayHandshake.png" />
</p>
</div>

<ul class="org-ul">
<li>state machine


<div class="figure">
<p><img src="../resources/network/ThreeWayHandshake_SM.png" alt="ThreeWayHandshake_SM.png" />
</p>
</div>
</li>
</ul>
</div>
</li>

<li><a id="sec-6-4-2" name="sec-6-4-2"></a>Connection Release<br  /><div class="outline-text-4" id="text-6-4-2">

<div class="figure">
<p><img src="../resources/network/TCPConnectionRelease.png" alt="TCPConnectionRelease.png" />
</p>
</div>

<ul class="org-ul">
<li>state machine


<div class="figure">
<p><img src="../resources/network/TCPConnectionRelease_SM.png" alt="TCPConnectionRelease_SM.png" />
</p>
</div>
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Application Layer</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> DHCP(Dynamic Host Configuration Protocol)</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Provide the following information to Node:
</p>
<ul class="org-ul">
<li>The node IP
</li>
<li>Network prefix
</li>
<li>Address of local router
</li>
<li>DNS server, time server, etc.
</li>
</ul>

<p>
DHCP uses UDP ports 67,68
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">DHCP</td>
</tr>

<tr>
<td class="left">UDP</td>
</tr>

<tr>
<td class="left">IP</td>
</tr>

<tr>
<td class="left">Ethernet</td>
</tr>
</tbody>
</table>
</div>

<ol class="org-ol"><li><a id="sec-7-1-1" name="sec-7-1-1"></a>How does node find DHCP server?<br  /><div class="outline-text-4" id="text-7-1-1">
<p class="verse">
Node sends broadcast messages.<br  />
broadcast address is all 1s.<br  />
255.255.255.255 for IP, ff:ff:ff:ff:ff:ff for Ethernet<br  />
</p>

<div class="figure">
<p><img src="../resources/network/DHCPSeq.png" alt="DHCPSeq.png" />
</p>
</div>
</div>
</li></ol>
</div>
</div>
</div>
</body>
</html>

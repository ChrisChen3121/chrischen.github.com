<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<!-- 2017-11-03 Fri 17:15 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DataAnalysis For Python</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ChrisChen" />
<meta name="keywords" content="data analysis, python" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../styles/demo/css/demo.css"/>
<link href="https://fonts.proxy.ustclug.org/css?family=Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet" type="text/css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "left",
        displayIndent: "5em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "left",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">DataAnalysis For Python</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga010bca">1. numpy</a>
<ul>
<li><a href="#orgac92b65">1.1. ndarray</a></li>
<li><a href="#orgb4d3f93">1.2. Conditional Logic</a></li>
<li><a href="#orge5b20e7">1.3. Transpose</a></li>
<li><a href="#org111c3b0">1.4. Useful functions</a></li>
</ul>
</li>
<li><a href="#org81a5dfa">2. pandas</a>
<ul>
<li><a href="#orgcb67c21">2.1. Series</a></li>
<li><a href="#orgbb17a53">2.2. DataFrame</a></li>
<li><a href="#org2b09279">2.3. Indexing Options</a></li>
<li><a href="#orgeb327d8">2.4. Index</a></li>
<li><a href="#orga7d296b">2.5. Functionality</a></li>
<li><a href="#orgf6ee698">2.6. Statistic methods</a></li>
<li><a href="#orgbe69687">2.7. Hierarchical Indexing</a></li>
<li><a href="#org62abfa4">2.8. Panel</a></li>
<li><a href="#org5559f27">2.9. TimeSeries</a></li>
</ul>
</li>
<li><a href="#org0434f64">3. wrangling</a>
<ul>
<li><a href="#org88becc6">3.1. Data Input/Output</a></li>
<li><a href="#org13538c3">3.2. Concatenation</a></li>
<li><a href="#org6f6ed20">3.3. Reshaping and Pivoting</a></li>
<li><a href="#org129a7f2">3.4. Permutation(randomly reordering)</a></li>
<li><a href="#orgb88f6ee">3.5. String Manipulation</a></li>
<li><a href="#org2ba89b9">3.6. Check Duplicates</a></li>
<li><a href="#orgf1a1de3">3.7. Others</a></li>
</ul>
</li>
<li><a href="#orge378278">4. plotting</a>
<ul>
<li><a href="#org8bb6c54">4.1. Basic</a></li>
<li><a href="#orge43da9d">4.2. plot function</a></li>
<li><a href="#org2dd135d">4.3. pandas Plotting</a></li>
<li><a href="#orgc281f6f">4.4. Saving Plots to File</a></li>
<li><a href="#orgb805dc9">4.5. interactive mode</a></li>
<li><a href="#org8ba7897">4.6. add-ons</a></li>
</ul>
</li>
<li><a href="#orgb326bfd">5. aggregation</a>
<ul>
<li><a href="#org71b1793">5.1. group by</a></li>
<li><a href="#org780649a">5.2. groupby aggregation</a></li>
<li><a href="#org0873a13">5.3. cut &amp; qcut</a></li>
<li><a href="#org2a41b5d">5.4. fillna with group value</a></li>
<li><a href="#org9c58ee3">5.5. pivot_table</a></li>
</ul>
</li>
<li><a href="#orgb5a2eb0">6. other tools</a>
<ul>
<li><a href="#org23973e8">6.1. dateutil</a></li>
<li><a href="#org4f8aef6">6.2. statsmodels</a></li>
<li><a href="#org3b9d24b">6.3. scikit-learn</a></li>
<li><a href="#org950f282">6.4. bottleneck</a></li>
<li><a href="#org6cc0264">6.5. visualization ecosystem</a></li>
</ul>
</li>
<li><a href="#org096868a">7. hdf</a>
<ul>
<li><a href="#orgdff61f2">7.1. dataset</a></li>
<li><a href="#orgf093fee">7.2. lookup tools</a></li>
<li><a href="#orge91620e">7.3. notice</a></li>
</ul>
</li>
<li><a href="#org5824ed9">8. SQLAlchemy</a>
<ul>
<li><a href="#org4de8ab0">8.1. Core</a></li>
<li><a href="#org8a008ec">8.2. ORM</a></li>
<li><a href="#org357e21f">8.3. Debug Tools</a></li>
<li><a href="#orgb58082d">8.4. <span class="todo TODO">TODO</span> Alembic</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orga010bca" class="outline-2">
<h2 id="orga010bca"><span class="section-number-2">1</span> numpy</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgac92b65" class="outline-3">
<h3 id="orgac92b65"><span class="section-number-3">1.1</span> ndarray</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">import</span> numpy <span style="color: #3a81c3; font-weight: bold;">as</span> np
<span style="color: #715ab1;">py_array</span> = <span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span>, <span style="color: #4e3163;">4</span>, <span style="color: #4e3163;">5</span><span style="color: #3a81c3;">]</span>
<span style="color: #715ab1;">np_array</span> = np.array<span style="color: #3a81c3;">(</span>py_array<span style="color: #3a81c3;">)</span>
np_array.shape <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; (5,)</span>
np_array.dtype <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; dtype('int64')</span>

<span style="color: #715ab1;">py_array</span> = <span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span>, <span style="color: #4e3163;">4</span><span style="color: #6c3163;">]</span>, <span style="color: #6c3163;">[</span><span style="color: #4e3163;">5</span>, <span style="color: #4e3163;">6</span>, <span style="color: #4e3163;">7</span>, <span style="color: #4e3163;">8</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>
<span style="color: #715ab1;">np_array</span> = np.array<span style="color: #3a81c3;">(</span>py_array<span style="color: #3a81c3;">)</span>
np_array.shape <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; (2, 4)</span>
np_array.ndim <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; 2</span>

np.zeros<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">10</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.])</span>
np.ones<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; array([[ 1.,  1.,  1.], [ 1.,  1.,  1.]])</span>
np.empty<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span>, <span style="color: #4e3163;">2</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[[ 0.,  0.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.,  0.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.,  0.]],</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[[ 0.,  0.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.,  0.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.,  0.]]])</span>

np.arange<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">5</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; array([0, 1, 2, 3, 4])</span>
np.random.randn<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>

<span style="color: #715ab1;">np_array</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span><span style="color: #6c3163;">]</span>, dtype=np.int32<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">np_array</span> = np_array.astype<span style="color: #3a81c3;">(</span>np.float64<span style="color: #3a81c3;">)</span>
np_array.dtype <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; dtype('float64')</span>
</pre>
</div>
</div>
<div id="outline-container-org8c8555b" class="outline-4">
<h4 id="org8c8555b"><span class="section-number-4">1.1.1</span> Strides</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
indicating the number of bytes to "step" in order to advance
one element along a dimension, \(3 * 4 * 5\) array of float64(8-bytes)
has strides (160, 40, 8)
</p>
</div>
</div>

<div id="outline-container-org4f3eac3" class="outline-4">
<h4 id="org4f3eac3"><span class="section-number-4">1.1.2</span> Supported dtype</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>int8, uint8, int16, uint16, int32, uint32, int64, uint64</li>
<li>float16, float32, float64, float128</li>
<li>complex64, complex128, complex256</li>
<li>bool</li>
<li>object</li>
<li>string_</li>
<li>unicode_</li>
</ul>
</div>
</div>

<div id="outline-container-org5d37020" class="outline-4">
<h4 id="org5d37020"><span class="section-number-4">1.1.3</span> Creating</h4>
<div class="outline-text-4" id="text-1-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">array</td>
<td class="org-left">Convert input data (list, tuple, array, or other sequence type) to an ndarray</td>
</tr>

<tr>
<td class="org-left">asarray</td>
<td class="org-left">Convert input to ndarray, but do not copy if the input is already an ndarray</td>
</tr>

<tr>
<td class="org-left">arange</td>
<td class="org-left">Like the built-in range but returns an ndarray instead of a list.</td>
</tr>

<tr>
<td class="org-left">ones, ones_like</td>
<td class="org-left">Produce an array of all 1’s with the given shape and dtype.</td>
</tr>

<tr>
<td class="org-left">zeros, zeros_like</td>
<td class="org-left">Produce an array of all 0’s with the given shape and dtype.</td>
</tr>

<tr>
<td class="org-left">empty, empty_like</td>
<td class="org-left">Create new arrays by allocating new memory</td>
</tr>

<tr>
<td class="org-left">eye, identity</td>
<td class="org-left">Create a square N x N identity matrix (1’s on the diagonal and 0’s elsewhere)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdbcf5d7" class="outline-4">
<h4 id="orgdbcf5d7"><span class="section-number-4">1.1.4</span> Indexing</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
<a id="org60da2cc"></a>
</p>
</div>
<div id="outline-container-org794c2ad" class="outline-5">
<h5 id="org794c2ad">basic indexing</h5>
<div class="outline-text-5" id="text-org794c2ad">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">arr</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">range</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">12</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>.reshape<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">3</span>,<span style="color: #4e3163;">4</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 0,  1,  2,  3],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 4,  5,  6,  7],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 8,  9, 10, 11]])</span>

arr<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span>:, :<span style="color: #4e3163;">3</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 4,  5,  6],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 8,  9, 10]])</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6774cbc" class="outline-5">
<h5 id="org6774cbc">boolean indexing</h5>
<div class="outline-text-5" id="text-org6774cbc">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">flags</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">1</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">data</span> = np.random.randn<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">6</span>,<span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 2.11684529,  1.24861544],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[-0.34817586, -0.59905366],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[-0.84976431,  0.11840417],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 1.36648373,  1.33416664],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.37616856, -0.0032112 ],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[-0.7749904 , -0.60457688]])</span>
flags ==<span style="color: #4e3163;">2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([False,  True, False,  True,  True, False], dtype=bool)</span>
data<span style="color: #3a81c3;">[</span>flags == <span style="color: #4e3163;">2</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[-0.34817586, -0.59905366],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 1.36648373,  1.33416664],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.37616856, -0.0032112 ]])</span>
data<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">(</span>flags == <span style="color: #4e3163;">3</span><span style="color: #6c3163;">)</span> | <span style="color: #6c3163;">(</span>flags == <span style="color: #4e3163;">1</span><span style="color: #6c3163;">)</span>, <span style="color: #4e3163;">1</span>:<span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 1.24861544],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.11840417],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[-0.60457688]])</span>
<span style="color: #715ab1;">data</span><span style="color: #3a81c3;">[</span>data&lt;<span style="color: #4e3163;">0</span><span style="color: #3a81c3;">]</span> = <span style="color: #4e3163;">0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 2.11684529,  1.24861544],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.        ,  0.        ],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.        ,  0.11840417],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 1.36648373,  1.33416664],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.37616856,  0.        ],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 0.        ,  0.        ]])</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0bc2d91" class="outline-5">
<h5 id="org0bc2d91">fancy indexing</h5>
<div class="outline-text-5" id="text-org0bc2d91">
<p class="verse">
Fancy indexing is a term adopted by NumPy to describe indexing using <b>integer arrays</b> .<br />
Unlike slicing, <code>always copies the data into a new array</code> .<br />
</p>
<div class="org-src-container">
<pre class="src src-python">arr
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 0.,  0.,  0.,  0.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 1.,  1.,  1.,  1.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 2.,  2.,  2.,  2.]])</span>
arr<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">1</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 2.,  2.,  2.,  2.],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 1.,  1.,  1.,  1.]])</span>
<span style="color: #715ab1;">arr</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">range</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">12</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>.reshape<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">3</span>,<span style="color: #4e3163;">4</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 0,  1,  2,  3],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 4,  5,  6,  7],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[ 8,  9, 10, 11]])</span>
arr<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">2</span><span style="color: #6c3163;">]</span>, <span style="color: #6c3163;">[</span><span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">3</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([ 6, 11]) # choose location (1, 2) (2, 3)</span>

arr<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">2</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">][</span>:, <span style="color: #6c3163;">[</span><span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">3</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 6,  7],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[10, 11]])</span>
arr<span style="color: #3a81c3;">[</span>np.ix_<span style="color: #6c3163;">(</span><span style="color: #2d9574;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">2</span><span style="color: #2d9574;">]</span>, <span style="color: #2d9574;">[</span><span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">3</span><span style="color: #2d9574;">]</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">]</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">same effect</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([[ 6,  7],</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#        </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[10, 11]])</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb4d3f93" class="outline-3">
<h3 id="orgb4d3f93"><span class="section-number-3">1.2</span> Conditional Logic</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-orgbd399fc" class="outline-4">
<h4 id="orgbd399fc"><span class="section-number-4">1.2.1</span> any, all</h4>
</div>
<div id="outline-container-org3b7fb00" class="outline-4">
<h4 id="org3b7fb00"><span class="section-number-4">1.2.2</span> numpy.where</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
The <b>numpy.where</b> function is a vectorized version of the ternary expression x if
condition else y. <b>numpy.where</b> is quicker than list comprehension.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">xarr</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">1</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">yarr</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">2</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">cond</span> = np.array<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">True</span>, <span style="color: #4e3163;">False</span>, <span style="color: #4e3163;">True</span>, <span style="color: #4e3163;">False</span>, <span style="color: #4e3163;">False</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
np.where<span style="color: #3a81c3;">(</span>cond, xarr, yarr<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([1, 2, 1, 2, 2])</span>
np.where<span style="color: #3a81c3;">(</span>cond, <span style="color: #4e3163;">4</span>, <span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">array([4, 3, 4, 3, 3])</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge5b20e7" class="outline-3">
<h3 id="orge5b20e7"><span class="section-number-3">1.3</span> Transpose</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Simple transposing with <code>.T</code> is just a special case of <code>swapaxes</code>
</p>
</div>
</div>

<div id="outline-container-org111c3b0" class="outline-3">
<h3 id="org111c3b0"><span class="section-number-3">1.4</span> Useful functions</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-org56b9ef2" class="outline-4">
<h4 id="org56b9ef2"><span class="section-number-4">1.4.1</span> Math</h4>
<div class="outline-text-4" id="text-1-4-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Method</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">sign</td>
<td class="org-left">Returns on array of 1 and -1 depending on the sign of the values</td>
</tr>

<tr>
<td class="org-left">sum</td>
<td class="org-left">Sum of all the elements in the array or along an axis. Zero-length arrays have sum 0</td>
</tr>

<tr>
<td class="org-left">mean</td>
<td class="org-left">Arithmetic mean. Zero-length arrays have NaN mean</td>
</tr>

<tr>
<td class="org-left">std, var</td>
<td class="org-left">Standard deviation and variance, respectively, with optional degrees of freedom adjustment</td>
</tr>

<tr>
<td class="org-left">min, max</td>
<td class="org-left">Minimum and maximum</td>
</tr>

<tr>
<td class="org-left">argmin, argmax</td>
<td class="org-left">Indices of minimum and maximum elements, respectively</td>
</tr>

<tr>
<td class="org-left">cumsum</td>
<td class="org-left">Cumulative sum of elements starting from 0</td>
</tr>

<tr>
<td class="org-left">cumprod</td>
<td class="org-left">Cumulative product of elements starting from 1</td>
</tr>

<tr>
<td class="org-left">abs, fabs</td>
<td class="org-left">Use <b>fabs</b> as a faster alternative for non-complex-valued data</td>
</tr>

<tr>
<td class="org-left">modf</td>
<td class="org-left">Return factional and integral parts of array as separate array</td>
</tr>

<tr>
<td class="org-left">rint</td>
<td class="org-left">Round elements to the nearest integer, preserving the dtype</td>
</tr>

<tr>
<td class="org-left">average</td>
<td class="org-left">Compute the weighted average along the specified axis.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org576d669" class="outline-4">
<h4 id="org576d669"><span class="section-number-4">1.4.2</span> Linear Algebra</h4>
<div class="outline-text-4" id="text-1-4-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">diag</td>
<td class="org-left">Return the diagonal (or off-diagonal) elements of a square matrix</td>
</tr>

<tr>
<td class="org-left">dot</td>
<td class="org-left"><b>Matrix multiplication</b></td>
</tr>

<tr>
<td class="org-left">trace</td>
<td class="org-left">Compute the sum of the diagonal elements</td>
</tr>

<tr>
<td class="org-left">det</td>
<td class="org-left">Compute the matrix determinant</td>
</tr>

<tr>
<td class="org-left">eig</td>
<td class="org-left">Compute the eigenvalues and eigenvectors of a square matrix</td>
</tr>

<tr>
<td class="org-left">inv</td>
<td class="org-left">Compute the inverse of a square matrix</td>
</tr>

<tr>
<td class="org-left">pinv</td>
<td class="org-left">Compute the Moore-Penrose pseudo-inverse inverse of a square matrix</td>
</tr>

<tr>
<td class="org-left">qr</td>
<td class="org-left">Compute the QR decomposition</td>
</tr>

<tr>
<td class="org-left">svd</td>
<td class="org-left">Compute the singular value decomposition (SVD)</td>
</tr>

<tr>
<td class="org-left">solve</td>
<td class="org-left">Solve the linear system Ax = b for x, where A is a square matrix</td>
</tr>

<tr>
<td class="org-left">lstsq</td>
<td class="org-left">Compute the least-squares solution to y = Xb</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgd3306f4" class="outline-4">
<h4 id="orgd3306f4"><span class="section-number-4">1.4.3</span> Random Number Generation</h4>
<div class="outline-text-4" id="text-1-4-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">seed</td>
<td class="org-left">Seed the random number generator</td>
</tr>

<tr>
<td class="org-left">permutation</td>
<td class="org-left">Return a random permutation of a sequence, or return a permuted range</td>
</tr>

<tr>
<td class="org-left">shuffle</td>
<td class="org-left">Randomly permute a sequence in place</td>
</tr>

<tr>
<td class="org-left">rand</td>
<td class="org-left">Draw samples from a uniform distribution</td>
</tr>

<tr>
<td class="org-left">randint</td>
<td class="org-left">Draw random integers from a given low-to-high range</td>
</tr>

<tr>
<td class="org-left">randn</td>
<td class="org-left">Draw samples from a normal distribution with mean 0 and standard deviation 1 (MATLAB-like interface)</td>
</tr>

<tr>
<td class="org-left">binomial</td>
<td class="org-left">Draw samples a binomial distribution</td>
</tr>

<tr>
<td class="org-left">normal</td>
<td class="org-left">Draw samples from a normal (Gaussian) distribution</td>
</tr>

<tr>
<td class="org-left">beta</td>
<td class="org-left">Draw samples from a beta distribution</td>
</tr>

<tr>
<td class="org-left">chisquare</td>
<td class="org-left">Draw samples from a chi-square distribution</td>
</tr>

<tr>
<td class="org-left">gamma</td>
<td class="org-left">Draw samples from a gamma distribution</td>
</tr>

<tr>
<td class="org-left">uniform</td>
<td class="org-left">Draw samples from a uniform [0, 1) distribution</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgcc5a17a" class="outline-4">
<h4 id="orgcc5a17a"><span class="section-number-4">1.4.4</span> Set operations</h4>
<div class="outline-text-4" id="text-1-4-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">unique(x)</td>
<td class="org-left">Compute the sorted, unique elements in x</td>
</tr>

<tr>
<td class="org-left">intersect1d(x, y)</td>
<td class="org-left">Compute the sorted, common elements in x and y</td>
</tr>

<tr>
<td class="org-left">union1d(x, y)</td>
<td class="org-left">Compute the sorted union of elements</td>
</tr>

<tr>
<td class="org-left">in1d(x, y)</td>
<td class="org-left">Compute a boolean array indicating whether element of x is in y</td>
</tr>

<tr>
<td class="org-left">setdiff1d(x, y)</td>
<td class="org-left">Set difference, elements in x that are not in y</td>
</tr>

<tr>
<td class="org-left">setxor1d(x, y)</td>
<td class="org-left">Set symmetric differences; elements that are in either of the arrays, but not both</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="outline-container-org81a5dfa" class="outline-2">
<h2 id="org81a5dfa"><span class="section-number-2">2</span> pandas</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgcb67c21" class="outline-3">
<h3 id="orgcb67c21"><span class="section-number-3">2.1</span> Series</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Series is a fixed-length <b>ordered dict</b>
</p>
</div>
</div>
<div id="outline-container-orgbb17a53" class="outline-3">
<h3 id="orgbb17a53"><span class="section-number-3">2.2</span> DataFrame</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">df</span> = pd.DataFrame<span style="color: #3a81c3;">(</span>np.arange<span style="color: #6c3163;">(</span><span style="color: #4e3163;">8</span><span style="color: #6c3163;">)</span>.reshape<span style="color: #6c3163;">(</span><span style="color: #4e3163;">4</span>,<span style="color: #4e3163;">2</span><span style="color: #6c3163;">)</span>,
                  columns=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span>, index=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'r1'</span>, <span style="color: #2d9574;">'r2'</span>, <span style="color: #2d9574;">'r3'</span>, <span style="color: #2d9574;">'r4'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>

df.ix<span style="color: #3a81c3;">[</span><span style="color: #2d9574;">'r1'</span><span style="color: #3a81c3;">]</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">retrieve row</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1    0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c2    1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Name: r1, dtype: int64</span>

df.ix<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'r1'</span>,<span style="color: #2d9574;">'r2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1  c2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r1   0   1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r2   2   3</span>

df.T
<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r1  r2  r3  r4</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1   0   2   4   6</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c2   1   3   5   7</span>

<span style="color: #3a81c3; font-weight: bold;">del</span> df<span style="color: #3a81c3;">[</span><span style="color: #2d9574;">'c2'</span><span style="color: #3a81c3;">]</span>

df.columns
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Index([u'c1'], dtype='object')</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2b09279" class="outline-3">
<h3 id="org2b09279"><span class="section-number-3">2.3</span> Indexing Options</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>Common use: <code>obj[val], obj.ix[val], obj.ix[:, val], obj.ix[val1, val2], reindex</code></li>
<li><p>
Others:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">xs</td>
<td class="org-left">Select single row or column as a Series by label</td>
</tr>

<tr>
<td class="org-left">icol, irow, iloc, iat</td>
<td class="org-left">Select single column or row, respectively, as a Series by integer location</td>
</tr>

<tr>
<td class="org-left">get_value, set_value</td>
<td class="org-left">Select single value by row and column label</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="outline-container-org9df6d43" class="outline-4">
<h4 id="org9df6d43"><span class="section-number-4">2.3.1</span> difference</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li>loc: only work on index</li>
<li>iloc: work on position</li>
<li>ix: can get data from dataframe without it being in the index</li>
<li>at: get scalar values. It's a very fast loc</li>
<li>iat: get scalar values. It's a very fast iloc</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgeb327d8" class="outline-3">
<h3 id="orgeb327d8"><span class="section-number-3">2.4</span> Index</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Index objects are immutable, functions as a fixed-size set.
</p>
<ul class="org-ul">
<li>main type: <code>Index, Int64Index, MultiIndex, DatetimeIndex, PeriodIndex</code></li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Method</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">append</td>
<td class="org-left">Concatenate with additional Index objects, producing a new Index</td>
</tr>

<tr>
<td class="org-left">diff</td>
<td class="org-left">Compute set difference as an Index</td>
</tr>

<tr>
<td class="org-left">intersection</td>
<td class="org-left">Compute set intersection</td>
</tr>

<tr>
<td class="org-left">union</td>
<td class="org-left">Compute set union</td>
</tr>

<tr>
<td class="org-left">isin</td>
<td class="org-left">Compute boolean array indicating whether each value is contained in the passed collection</td>
</tr>

<tr>
<td class="org-left">delete</td>
<td class="org-left">Compute new Index with element at index i deleted</td>
</tr>

<tr>
<td class="org-left">drop</td>
<td class="org-left">Compute new index by deleting passed values</td>
</tr>

<tr>
<td class="org-left">insert</td>
<td class="org-left">Compute new Index by inserting element at index i</td>
</tr>

<tr>
<td class="org-left">is_monotonic</td>
<td class="org-left">Returns True if each element is greater than or equal to the previous element</td>
</tr>

<tr>
<td class="org-left">is_unique</td>
<td class="org-left">Returns True if the Index has no duplicate values</td>
</tr>

<tr>
<td class="org-left">unique</td>
<td class="org-left">Compute the array of unique values in the Index</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-org8e78897" class="outline-4">
<h4 id="org8e78897"><span class="section-number-4">2.4.1</span> pd.PeriodIndex</h4>
</div>
</div>

<div id="outline-container-orga7d296b" class="outline-3">
<h3 id="orga7d296b"><span class="section-number-3">2.5</span> Functionality</h3>
<div class="outline-text-3" id="text-2-5">
</div><div id="outline-container-org2fab144" class="outline-4">
<h4 id="org2fab144"><span class="section-number-4">2.5.1</span> Reindexing</h4>
<div class="outline-text-4" id="text-2-5-1">
<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-python">frame.reindex<span style="color: #3a81c3;">(</span>columns=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
frame.reindex<span style="color: #3a81c3;">(</span>index=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'a'</span>, <span style="color: #2d9574;">'b'</span>, <span style="color: #2d9574;">'c'</span>, <span style="color: #2d9574;">'d'</span><span style="color: #6c3163;">]</span>, method=<span style="color: #2d9574;">'ffill'</span>, columns=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
frame.reindex<span style="color: #3a81c3;">(</span>frame2.index, method=<span style="color: #2d9574;">'ffill'</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">is similar to frame.ix[['a', 'b', 'c', 'd'], ['c1', 'c2']]</span>
</pre>
</div>
<p>
reindex args: index, method, fill_value, limit, level, copy
</p>
</div>
</div>
<div id="outline-container-org1090641" class="outline-4">
<h4 id="org1090641"><span class="section-number-4">2.5.2</span> Drop</h4>
<div class="outline-text-4" id="text-2-5-2">
<div class="org-src-container">
<pre class="src src-python">frame.drop<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'r1'</span>, <span style="color: #2d9574;">'r2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
frame.drop<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span>, axis=<span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgedaa0b6" class="outline-4">
<h4 id="orgedaa0b6"><span class="section-number-4">2.5.3</span> Selection</h4>
<div class="outline-text-4" id="text-2-5-3">
<p>
See <a href="#org60da2cc">1.1.4</a>.
</p>
</div>
</div>

<div id="outline-container-org749a2ae" class="outline-4">
<h4 id="org749a2ae"><span class="section-number-4">2.5.4</span> Arithmetic</h4>
<div class="outline-text-4" id="text-2-5-4">
<ul class="org-ul">
<li>Basic df1 + df2,</li>
<li>use add method to fill na values: df1.add(df2, fill_value=0)</li>
</ul>
<ul class="org-ul">
<li>Operation between Dataframe and Series</li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">df</span> = pd.DataFrame<span style="color: #3a81c3;">(</span>np.arange<span style="color: #6c3163;">(</span><span style="color: #4e3163;">6</span><span style="color: #6c3163;">)</span>.reshape<span style="color: #6c3163;">(</span><span style="color: #4e3163;">3</span>,<span style="color: #4e3163;">2</span><span style="color: #6c3163;">)</span>,
                  columns=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span>, index=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'r1'</span>, <span style="color: #2d9574;">'r2'</span>, <span style="color: #2d9574;">'r3'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1  c2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r1   0   1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r2   2   3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r3   4   5</span>

<span style="color: #715ab1;">s</span> = pd.Series<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">4</span>,<span style="color: #4e3163;">5</span><span style="color: #6c3163;">]</span>, index=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1    4</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c2    5</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">dtype: int64</span>

df + s
<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1  c2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r1   4   6</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r2   6   8</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r3   8  10</span>


<span style="color: #715ab1;">s2</span> = pd.Series<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">1</span>,<span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">3</span><span style="color: #6c3163;">]</span>, index=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'r1'</span>, <span style="color: #2d9574;">'r2'</span>, <span style="color: #2d9574;">'r3'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r1    1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r2    2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r3    3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">dtype: int64</span>

df.add<span style="color: #3a81c3;">(</span>s2, axis=<span style="color: #4e3163;">0</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c1  c2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r1   1   2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r2   4   5</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">r3   7   8</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd7d8a39" class="outline-4">
<h4 id="orgd7d8a39"><span class="section-number-4">2.5.5</span> Broadcasting</h4>
<div class="outline-text-4" id="text-2-5-5">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">frame</span>=pd.DataFrame<span style="color: #3a81c3;">(</span>np.arange<span style="color: #6c3163;">(</span><span style="color: #4e3163;">12</span><span style="color: #6c3163;">)</span>.reshape<span style="color: #6c3163;">(</span><span style="color: #2d9574;">(</span><span style="color: #4e3163;">4</span>,<span style="color: #4e3163;">3</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>, columns=<span style="color: #3a81c3;">list</span><span style="color: #6c3163;">(</span><span style="color: #2d9574;">'bde'</span><span style="color: #6c3163;">)</span>, index=<span style="color: #3a81c3;">list</span><span style="color: #6c3163;">(</span><span style="color: #2d9574;">'1234'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">series</span> = frame.ix<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">0</span><span style="color: #3a81c3;">]</span>
frame - series
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">b  d  e</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1  0  0  0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2  3  3  3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">3  6  6  6</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4  9  9  9</span>

<span style="color: #715ab1;">series2</span> = pd.Series<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">range</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">3</span><span style="color: #6c3163;">)</span>, index=<span style="color: #3a81c3;">list</span><span style="color: #6c3163;">(</span><span style="color: #2d9574;">'bef'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
frame + series2
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#      </span><span style="color: #2aa1ae; background-color: #ecf3ec;">b   d     e   f</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1  0.0 NaN   3.0 NaN</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2  3.0 NaN   6.0 NaN</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">3  6.0 NaN   9.0 NaN</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4  9.0 NaN  12.0 NaN</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeeb0c61" class="outline-4">
<h4 id="orgeeb0c61"><span class="section-number-4">2.5.6</span> Apply</h4>
<div class="outline-text-4" id="text-2-5-6">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">f</span> = <span style="color: #3a81c3; font-weight: bold;">lambda</span> x: x.<span style="color: #3a81c3;">max</span><span style="color: #3a81c3;">()</span>
frame.<span style="color: #3a81c3;">apply</span><span style="color: #3a81c3;">(</span>f<span style="color: #3a81c3;">)</span>
frame.<span style="color: #3a81c3;">apply</span><span style="color: #3a81c3;">(</span>f, axis=<span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<p>
<b>apply</b> can also return a series
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">def</span> <span style="color: #6c3163; font-weight: bold;">f</span><span style="color: #3a81c3;">(</span>x<span style="color: #3a81c3;">)</span>:
    <span style="color: #3a81c3; font-weight: bold;">return</span> pd.Series<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>x.<span style="color: #3a81c3;">min</span><span style="color: #2d9574;">()</span>, x.<span style="color: #3a81c3;">max</span><span style="color: #2d9574;">()</span><span style="color: #6c3163;">]</span>, index=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'min'</span>, <span style="color: #2d9574;">'max'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
frame.<span style="color: #3a81c3;">apply</span><span style="color: #3a81c3;">(</span>f<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;    a   b</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">min xxx xxx</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">max xxx xxx</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3126b78" class="outline-4">
<h4 id="org3126b78"><span class="section-number-4">2.5.7</span> Sort</h4>
<div class="outline-text-4" id="text-2-5-7">
<div class="org-src-container">
<pre class="src src-python">df.sort_index<span style="color: #3a81c3;">()</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">by column(s)</span>
df.sort_index<span style="color: #3a81c3;">(</span>by=<span style="color: #2d9574;">'c1'</span><span style="color: #3a81c3;">)</span>
df.sort_index<span style="color: #3a81c3;">(</span>by=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'c1'</span>, <span style="color: #2d9574;">'c2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgded3484" class="outline-4">
<h4 id="orgded3484"><span class="section-number-4">2.5.8</span> Rank</h4>
<div class="outline-text-4" id="text-2-5-8">
<p>
args: 'average'(default), 'min', 'max', 'first'
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">obj</span> = pd.Series<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #4e3163;">7</span>, -<span style="color: #4e3163;">5</span>, <span style="color: #4e3163;">7</span>, <span style="color: #4e3163;">4</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">0</span>, <span style="color: #4e3163;">4</span>, <span style="color: #4e3163;">7</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
obj.rank<span style="color: #3a81c3;">()</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0    7.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1    1.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2    7.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">3    4.5</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4    3.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">5    2.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">6    4.5</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">7    7.0</span>
obj.rank<span style="color: #3a81c3;">(</span>method=<span style="color: #2d9574;">'first'</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0    6.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1    1.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2    7.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">3    4.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4    3.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">5    2.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">6    5.0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">7    8.0</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5c6a41" class="outline-4">
<h4 id="orgc5c6a41"><span class="section-number-4">2.5.9</span> Other funtions</h4>
<div class="outline-text-4" id="text-2-5-9">
<ul class="org-ul">
<li>numpy <b>ufancs</b> works fine with pandas objects</li>
<li>applymap(element-wise), map(series element-wise)</li>
<li>order(for series sorting): s.order()</li>
<li>isnull, notnull, dropna, fillna</li>
<li>stack, unstack, swaplevel, sortlevel</li>
<li>set_index, reset_index</li>
<li>unique(series based), value_counts(series based), isin(element-wise)</li>
<li>all, any</li>
<li>replace</li>
<li>cut, qcut</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf6ee698" class="outline-3">
<h3 id="orgf6ee698"><span class="section-number-3">2.6</span> Statistic methods</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Basic:
count, describe, min, max, quantile, sum, pct_change, diff, corr, cov, corrwith
</p>
</div>

<div id="outline-container-org73b4166" class="outline-4">
<h4 id="org73b4166"><span class="section-number-4">2.6.1</span> mean, median, mad, var, std</h4>
</div>
<div id="outline-container-orgfcabee7" class="outline-4">
<h4 id="orgfcabee7"><span class="section-number-4">2.6.2</span> argmin, argmax, idxmin, idxmax</h4>
<div class="outline-text-4" id="text-2-6-2">
<p>
argmin/argmax: compute index locations (integers) at which minimum or maximum value obtained, respectively
</p>
</div>
</div>

<div id="outline-container-orge939689" class="outline-4">
<h4 id="orge939689"><span class="section-number-4">2.6.3</span> cumsum, cummin, cummax, cumprod</h4>
</div>
<div id="outline-container-org2987840" class="outline-4">
<h4 id="org2987840"><span class="section-number-4">2.6.4</span> skew</h4>
<div class="outline-text-4" id="text-2-6-4">
<p>
Sample skewness (3rd moment) of values
</p>
</div>
</div>

<div id="outline-container-org77fd5b0" class="outline-4">
<h4 id="org77fd5b0"><span class="section-number-4">2.6.5</span> kurt</h4>
<div class="outline-text-4" id="text-2-6-5">
<p>
Sample kurtosis (4th moment) of values
</p>
</div>
</div>

<div id="outline-container-org06a95ee" class="outline-4">
<h4 id="org06a95ee"><span class="section-number-4">2.6.6</span> diff</h4>
<div class="outline-text-4" id="text-2-6-6">
<p>
Compute 1st arithmetic difference (useful for time series)
</p>
</div>
</div>

<div id="outline-container-orgfc6afe7" class="outline-4">
<h4 id="orgfc6afe7"><span class="section-number-4">2.6.7</span> corr, cov, corrwith</h4>
<div class="outline-text-4" id="text-2-6-7">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">import</span> pandas_datareader <span style="color: #3a81c3; font-weight: bold;">as</span> pdr

<span style="color: #715ab1;">all_data</span> = <span style="color: #3a81c3;">{}</span>
<span style="color: #3a81c3; font-weight: bold;">for</span> ticker <span style="color: #3a81c3; font-weight: bold;">in</span> <span style="color: #3a81c3;">[</span><span style="color: #2d9574;">'AAPL'</span>, <span style="color: #2d9574;">'IBM'</span>, <span style="color: #2d9574;">'MSFT'</span>, <span style="color: #2d9574;">'GOOG'</span><span style="color: #3a81c3;">]</span>:
    <span style="color: #715ab1;">all_data</span><span style="color: #3a81c3;">[</span>ticker<span style="color: #3a81c3;">]</span> = pdr.get_data_yahoo<span style="color: #3a81c3;">(</span>ticker, <span style="color: #2d9574;">'1/1/2000'</span>, <span style="color: #2d9574;">'1/1/2010'</span><span style="color: #3a81c3;">)</span>

<span style="color: #715ab1;">price</span> = pd.DataFrame<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">{</span>tic: data<span style="color: #2d9574;">[</span><span style="color: #2d9574;">'Adj Close'</span><span style="color: #2d9574;">]</span> <span style="color: #3a81c3; font-weight: bold;">for</span> tic, data <span style="color: #3a81c3; font-weight: bold;">in</span> all_data.iteritems<span style="color: #2d9574;">()</span><span style="color: #6c3163;">}</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">returns</span> = price.pct_change<span style="color: #3a81c3;">()</span>

returns.MSFT.corr<span style="color: #3a81c3;">(</span>returns.IBM<span style="color: #3a81c3;">)</span>
returns.MSFT.cov<span style="color: #3a81c3;">(</span>returns.IBM<span style="color: #3a81c3;">)</span>

returns.corr<span style="color: #3a81c3;">()</span>
returns.corrwith<span style="color: #3a81c3;">(</span>returns.IBM<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3bba004" class="outline-4">
<h4 id="org3bba004"><span class="section-number-4">2.6.8</span> common args</h4>
<div class="outline-text-4" id="text-2-6-8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Method</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">axis</td>
<td class="org-left">Axis to reduce over. 0 for DataFrame’s rows and 1 for columns</td>
</tr>

<tr>
<td class="org-left">skipna</td>
<td class="org-left">Exclude missing values, True by default</td>
</tr>

<tr>
<td class="org-left">level</td>
<td class="org-left">Reduce grouped by level if the axis is hierarchically-indexed (MultiIndex)</td>
</tr>
</tbody>
</table>

<p>
<b>skipna</b> option:
</p>
<ul class="org-ul">
<li>True(default): NA values are excluded unless the entire slice (row or column in this case) is NA</li>
<li>False: if any value is <b>NA</b>, then return <b>NA</b></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgbe69687" class="outline-3">
<h3 id="orgbe69687"><span class="section-number-3">2.7</span> Hierarchical Indexing</h3>
<div class="outline-text-3" id="text-2-7">
</div><div id="outline-container-orgbf62dfa" class="outline-4">
<h4 id="orgbf62dfa"><span class="section-number-4">2.7.1</span> Indexing</h4>
<div class="outline-text-4" id="text-2-7-1">
<div class="org-src-container">
<pre class="src src-example">data[index_level1]
data[index_level1 : index_level1]
data[[index_level1, index_level1]]

select by inner level:
data[:, index_level2]
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbde59ab" class="outline-4">
<h4 id="orgbde59ab"><span class="section-number-4">2.7.2</span> stack, unstack</h4>
</div>
<div id="outline-container-org5fccb11" class="outline-4">
<h4 id="org5fccb11"><span class="section-number-4">2.7.3</span> swaplevel, sortlevel</h4>
</div>
</div>
<div id="outline-container-org62abfa4" class="outline-3">
<h3 id="org62abfa4"><span class="section-number-3">2.8</span> Panel</h3>
<div class="outline-text-3" id="text-2-8">
<p>
Panel can be thought as a 3-dimensional analogue of DataFrame.
Although hierarchical indexing makes using truly N-dimensional arrays unnecessary in a lot of cases
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">pdata</span> = pd.Panel<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">{</span>stk: pdr.get_data_yahoo<span style="color: #2d9574;">(</span>stk, <span style="color: #2d9574;">'1/1/2009'</span>, <span style="color: #2d9574;">'6/1/2012'</span><span style="color: #2d9574;">)</span>
                  <span style="color: #3a81c3; font-weight: bold;">for</span> stk <span style="color: #3a81c3; font-weight: bold;">in</span> <span style="color: #2d9574;">[</span><span style="color: #2d9574;">'AAPL'</span>, <span style="color: #2d9574;">'GOOG'</span><span style="color: #2d9574;">]</span><span style="color: #6c3163;">}</span><span style="color: #3a81c3;">)</span>

</pre>
</div>
</div>
<div id="outline-container-orga268f92" class="outline-4">
<h4 id="orga268f92"><span class="section-number-4">2.8.1</span> Useful functions</h4>
<div class="outline-text-4" id="text-2-8-1">
<ul class="org-ul">
<li><p>
ix
</p>
<div class="org-src-container">
<pre class="src src-python">pdata.ix<span style="color: #3a81c3;">[</span>:, <span style="color: #2d9574;">'6/1/2012'</span>, :<span style="color: #3a81c3;">]</span>
</pre>
</div></li>
<li><p>
swapaxes
</p>
<div class="org-src-container">
<pre class="src src-python">pdata.swapaxes<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'items'</span>, <span style="color: #2d9574;">'minor'</span><span style="color: #3a81c3;">)[</span><span style="color: #2d9574;">'Adj Close'</span><span style="color: #3a81c3;">]</span>
</pre>
</div></li>
<li><p>
to_frame
</p>

<p>
index will be the <b>[major, minor]</b> axis, <b>items</b> will be the columns
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">stacked</span> = pdata.to_frame<span style="color: #3a81c3;">()</span>
</pre>
</div></li>

<li><p>
to_panel
</p>
<div class="org-src-container">
<pre class="src src-python">stacked.to_panel<span style="color: #3a81c3;">()</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org5559f27" class="outline-3">
<h3 id="org5559f27"><span class="section-number-3">2.9</span> TimeSeries</h3>
<div class="outline-text-3" id="text-2-9">
</div><div id="outline-container-org232176b" class="outline-4">
<h4 id="org232176b"><span class="section-number-4">2.9.1</span> numpy.datatime64</h4>
<div class="outline-text-4" id="text-2-9-1">
<p>
nanoseconds resolution.
pandas <b>stores</b> timestamps as numpy.datatime64
</p>
</div>
</div>
<div id="outline-container-org97c896d" class="outline-4">
<h4 id="org97c896d"><span class="section-number-4">2.9.2</span> pandas <b>Timestamp</b></h4>
<div class="outline-text-4" id="text-2-9-2">
</div><div id="outline-container-orga8c54fd" class="outline-5">
<h5 id="orga8c54fd">timezone-aware</h5>
</div>
<div id="outline-container-org31cc741" class="outline-5">
<h5 id="org31cc741">to_period</h5>
</div>
</div>
<div id="outline-container-org775b2e0" class="outline-4">
<h4 id="org775b2e0"><span class="section-number-4">2.9.3</span> Indexing</h4>
<div class="outline-text-4" id="text-2-9-3">
<div class="org-src-container">
<pre class="src src-python">ts<span style="color: #3a81c3;">[</span><span style="color: #6c3163;">(</span>time<span style="color: #2d9574;">(</span><span style="color: #4e3163;">10</span>,<span style="color: #4e3163;">0</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">same as</span>
ts.at_time<span style="color: #3a81c3;">(</span>time<span style="color: #6c3163;">(</span><span style="color: #4e3163;">10</span>,<span style="color: #4e3163;">0</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

ts.between_time<span style="color: #3a81c3;">(</span>time<span style="color: #6c3163;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">0</span><span style="color: #6c3163;">)</span>, time<span style="color: #6c3163;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">30</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
ts.asof<span style="color: #3a81c3;">(</span>pd.date_range<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'2016-05-01 10:00'</span>, periods=<span style="color: #4e3163;">4</span>, freq=<span style="color: #2d9574;">'B'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
<div id="outline-container-orgf520be5" class="outline-5">
<h5 id="orgf520be5">asof</h5>
<div class="outline-text-5" id="text-orgf520be5">
<p>
By passing an array of timestamps to the asof method, you will obtain
an array of the last valid(non-NA) values at or before each timestamps.
</p>
</div>
</div>
</div>
<div id="outline-container-orgc4b53ed" class="outline-4">
<h4 id="orgc4b53ed"><span class="section-number-4">2.9.4</span> Frequencies</h4>
<div class="outline-text-4" id="text-2-9-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Base Time Series Frequencies</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Alias</th>
<th scope="col" class="org-left">Offset Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">D</td>
<td class="org-left">Day</td>
</tr>

<tr>
<td class="org-left">B</td>
<td class="org-left">BusinessDay</td>
</tr>

<tr>
<td class="org-left">H</td>
<td class="org-left">Hour</td>
</tr>

<tr>
<td class="org-left">T or min</td>
<td class="org-left">Minute</td>
</tr>

<tr>
<td class="org-left">S</td>
<td class="org-left">Second</td>
</tr>

<tr>
<td class="org-left">L or ms</td>
<td class="org-left">Milli</td>
</tr>

<tr>
<td class="org-left">U</td>
<td class="org-left">Micro</td>
</tr>

<tr>
<td class="org-left">M</td>
<td class="org-left">MonthEnd</td>
</tr>

<tr>
<td class="org-left">BM</td>
<td class="org-left">BusinessMonthEnd</td>
</tr>

<tr>
<td class="org-left">MS</td>
<td class="org-left">MonthBegin</td>
</tr>

<tr>
<td class="org-left">BMS</td>
<td class="org-left">BusinessMonthBegin</td>
</tr>

<tr>
<td class="org-left">W-Mon, W-TUE, &#x2026;</td>
<td class="org-left">Week</td>
</tr>

<tr>
<td class="org-left">WOM-1MON, &#x2026;</td>
<td class="org-left">WeekOfMonth</td>
</tr>

<tr>
<td class="org-left">Q-JAN, Q-FEB, &#x2026;</td>
<td class="org-left">QuarterEnd</td>
</tr>

<tr>
<td class="org-left">BQ-JAN, BQ-FEB, &#x2026;</td>
<td class="org-left">BusinessQuarterEnd</td>
</tr>

<tr>
<td class="org-left">QS-JAN, &#x2026;</td>
<td class="org-left">QuarterBegin</td>
</tr>

<tr>
<td class="org-left">BQS-JAN, &#x2026;</td>
<td class="org-left">BusinessQuarterBegin</td>
</tr>

<tr>
<td class="org-left">A-JAN, &#x2026;</td>
<td class="org-left">YearEnd</td>
</tr>

<tr>
<td class="org-left">BA-JAN, &#x2026;</td>
<td class="org-left">BusinessYearEnd</td>
</tr>

<tr>
<td class="org-left">AS-JAN, &#x2026;</td>
<td class="org-left">YearBegin</td>
</tr>

<tr>
<td class="org-left">BAS-JAN, &#x2026;</td>
<td class="org-left">BusinessYearBegin</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-org428790a" class="outline-5">
<h5 id="org428790a">Users can define custom frequency classes</h5>
</div>
<div id="outline-container-org77c08ab" class="outline-5">
<h5 id="org77c08ab">offsets can also be used with <b>datetime</b> or <b>Timestamp</b> objects</h5>
</div>
<div id="outline-container-orgb1fec40" class="outline-5">
<h5 id="orgb1fec40">offset.rollforward/rollback</h5>
<div class="outline-text-5" id="text-orgb1fec40">
<div class="org-src-container">
<pre class="src src-python">ts.groupby<span style="color: #3a81c3;">(</span>offset.rollforward<span style="color: #3a81c3;">)</span>.mean<span style="color: #3a81c3;">()</span>
</pre>
</div>
<p>
but <b>resample</b> is faster
</p>
</div>
</div>
</div>

<div id="outline-container-orgaaaee34" class="outline-4">
<h4 id="orgaaaee34"><span class="section-number-4">2.9.5</span> Timezone</h4>
<div class="outline-text-4" id="text-2-9-5">
<p>
internal library: <b>pytz</b>
</p>
</div>
<div id="outline-container-org04e5935" class="outline-5">
<h5 id="org04e5935">tz_localize</h5>
</div>
<div id="outline-container-orgac1f7d1" class="outline-5">
<h5 id="orgac1f7d1">tz_convert</h5>
</div>
</div>
<div id="outline-container-orga139355" class="outline-4">
<h4 id="orga139355"><span class="section-number-4">2.9.6</span> Period</h4>
<div class="outline-text-4" id="text-2-9-6">
</div><div id="outline-container-orgfcac116" class="outline-5">
<h5 id="orgfcac116">pandas.Period</h5>
</div>
<div id="outline-container-org028a0b8" class="outline-5">
<h5 id="org028a0b8">pandas.PeriodIndex</h5>
</div>
</div>
<div id="outline-container-org372b017" class="outline-4">
<h4 id="org372b017"><span class="section-number-4">2.9.7</span> Resample</h4>
<div class="outline-text-4" id="text-2-9-7">
<p>
Aggregating higher frequency data to lower frequency is called downsampling,
while converting lower frequency to higher frequency is called upsampling.
</p>
</div>
<div id="outline-container-org2adba0a" class="outline-5">
<h5 id="org2adba0a">args</h5>
<div class="outline-text-5" id="text-org2adba0a">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Resample method arguments</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Argument</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">freq</td>
<td class="org-left">String or DateOffset indicating desired resampled frequency, e.g. ‘M', ’5min', or Second(15)</td>
</tr>

<tr>
<td class="org-left">how='mean'</td>
<td class="org-left">Function name or array function producing aggregated value, for example 'ohlc' , np.max. Default 'mean'</td>
</tr>

<tr>
<td class="org-left">axis=0</td>
<td class="org-left">Axis to resample on, default axis=0</td>
</tr>

<tr>
<td class="org-left">fill_method=None</td>
<td class="org-left">How to interpolate when upsampling, as in 'ffill' or 'bfill' . By default does no interpolation.</td>
</tr>

<tr>
<td class="org-left">closed='right'</td>
<td class="org-left">In downsampling, which end of each interval is closed (inclusive). Default 'right'</td>
</tr>

<tr>
<td class="org-left">label='right'</td>
<td class="org-left">In downsampling, how to label the aggregated result, with the 'right' or 'left bin edge</td>
</tr>

<tr>
<td class="org-left">loffset=None</td>
<td class="org-left">Time adjustment to the bin labels, such as '-1s' / Second(-1) to shift the aggregate labels one second earlier</td>
</tr>

<tr>
<td class="org-left">limit=None</td>
<td class="org-left">When forward or backward filling, the maximum number of periods to fill</td>
</tr>

<tr>
<td class="org-left">kind=None</td>
<td class="org-left">Aggregate to periods or timestamps</td>
</tr>

<tr>
<td class="org-left">convention=None</td>
<td class="org-left">When resampling periods, the convention ( 'start' or 'end' ) for converting the low frequency period to high frequency.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org8a5848e" class="outline-4">
<h4 id="org8a5848e"><span class="section-number-4">2.9.8</span> useful functions</h4>
<div class="outline-text-4" id="text-2-9-8">
</div><div id="outline-container-org7491f8e" class="outline-5">
<h5 id="org7491f8e">truncate</h5>
<div class="outline-text-5" id="text-org7491f8e">
<p>
slices a timeseries between two dates
</p>
</div>
</div>
<div id="outline-container-org5576833" class="outline-5">
<h5 id="org5576833">normalize</h5>
<div class="outline-text-5" id="text-org5576833">
<p>
convert times to midnight
</p>
</div>
</div>

<div id="outline-container-org7d35e36" class="outline-5">
<h5 id="org7d35e36">compute returns</h5>
<div class="outline-text-5" id="text-org7d35e36">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">returns</span> = price.pct_change<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">ret_index</span> = <span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span> + returns<span style="color: #3a81c3;">)</span>.cumprod<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">ret_index</span><span style="color: #3a81c3;">[</span><span style="color: #4e3163;">0</span><span style="color: #3a81c3;">]</span> = <span style="color: #4e3163;">1</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org7517d88" class="outline-4">
<h4 id="org7517d88"><span class="section-number-4">2.9.9</span> moving window</h4>
<div class="outline-text-4" id="text-2-9-9">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">rolling_count</td>
<td class="org-left">Returns number of non-NA observations in each trailing window.</td>
</tr>

<tr>
<td class="org-left">rolling_sum</td>
<td class="org-left">Moving window sum.</td>
</tr>

<tr>
<td class="org-left">rolling_mean</td>
<td class="org-left">Moving window mean.</td>
</tr>

<tr>
<td class="org-left">rolling_median</td>
<td class="org-left">Moving window median.</td>
</tr>

<tr>
<td class="org-left">rolling_var, rolling_std</td>
<td class="org-left">Moving window variance and standard deviation, respectively. Uses n - 1 denominator.</td>
</tr>

<tr>
<td class="org-left">rolling_skew, rolling_kurt</td>
<td class="org-left">Moving window skewness (3rd moment) and kurtosis (4th moment), respectively.</td>
</tr>

<tr>
<td class="org-left">rolling_min, rolling_max</td>
<td class="org-left">Moving window minimum and maximum.</td>
</tr>

<tr>
<td class="org-left">rolling_quantile</td>
<td class="org-left">Moving window score at percentile/sample quantile.</td>
</tr>

<tr>
<td class="org-left">rolling_corr, rolling_cov</td>
<td class="org-left">Moving window correlation and covariance.</td>
</tr>

<tr>
<td class="org-left">rolling_apply</td>
<td class="org-left">Apply generic array function over a moving window.</td>
</tr>

<tr>
<td class="org-left">ewma</td>
<td class="org-left">Exponentially-weighted moving average.</td>
</tr>

<tr>
<td class="org-left">ewmvar, ewmstd</td>
<td class="org-left">Exponentially-weighted moving variance and standard deviation.</td>
</tr>

<tr>
<td class="org-left">ewmcorr, ewmcov</td>
<td class="org-left">Exponentially-weighted moving correlation and covariance.</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-org42b7f88" class="outline-5">
<h5 id="org42b7f88">exponentially-weighted</h5>
<div class="outline-text-5" id="text-org42b7f88">
<p>
Exponentially-weighted statistic places more weight on more recent observations
It "adapts" <b>faster</b> to changes compared with the equal-weighted version.
</p>
</div>
</div>
<div id="outline-container-org6218054" class="outline-5">
<h5 id="org6218054">expanding window mean</h5>
<div class="outline-text-5" id="text-org6218054">
<p>
It is just a special case where the window is the length of the time series.
</p>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org0434f64" class="outline-2">
<h2 id="org0434f64"><span class="section-number-2">3</span> wrangling</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-org88becc6" class="outline-3">
<h3 id="org88becc6"><span class="section-number-3">3.1</span> Data Input/Output</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-orgc942994" class="outline-4">
<h4 id="orgc942994"><span class="section-number-4">3.1.1</span> Reading option categories</h4>
<div class="outline-text-4" id="text-3-1-1">
</div><div id="outline-container-orgff7654d" class="outline-5">
<h5 id="orgff7654d">Indexing</h5>
<div class="outline-text-5" id="text-orgff7654d">
<p>
Can treat one or more columns as the returned DataFrame, and whether
to get column names from the file, the user, or not at all.
</p>
</div>
</div>
<div id="outline-container-org0847d9c" class="outline-5">
<h5 id="org0847d9c">Type inference and data conversion</h5>
<div class="outline-text-5" id="text-org0847d9c">
<p>
This includes the user-defined value conversions and custom list of
missing value markers.
</p>
</div>
</div>
<div id="outline-container-orgcc45157" class="outline-5">
<h5 id="orgcc45157">Datetime parsing</h5>
<div class="outline-text-5" id="text-orgcc45157">
<p>
Includes combining capability, including combining date and time information
spread over multiple columns into a single column in the result.
</p>
</div>
</div>
<div id="outline-container-org7c84a7e" class="outline-5">
<h5 id="org7c84a7e">Iterating</h5>
<div class="outline-text-5" id="text-org7c84a7e">
<p>
Support for iterating over chunks of very large files.
</p>
</div>
</div>
<div id="outline-container-org2b95db1" class="outline-5">
<h5 id="org2b95db1">Unclean data issues</h5>
<div class="outline-text-5" id="text-org2b95db1">
<p>
Skipping rows or a footer, comments, or other minor things like numeric data
with thousands separated by commas.
</p>
</div>
</div>
</div>

<div id="outline-container-org00e25d9" class="outline-4">
<h4 id="org00e25d9"><span class="section-number-4">3.1.2</span> Hints</h4>
<div class="outline-text-4" id="text-3-1-2">
<ul class="org-ul">
<li><b>from_csv</b>: a convenience method simpler than read_csv</li>
<li>pickle related: <b>load</b>, <b>save</b></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org13538c3" class="outline-3">
<h3 id="org13538c3"><span class="section-number-3">3.2</span> Concatenation</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><b>pd.merge</b>, <b>merge</b> method</li>
<li><b>join</b> method: performs a left join on the join keys</li>
<li><b>pd.concat</b></li>
<li><b>combine_first</b>: patching missing data with arg object(df.update(overwrite=False))</li>
<li><b>align</b>: align two object on their axes with the specified join method for each axis Index</li>
</ul>
</div>
<div id="outline-container-orgfbca61e" class="outline-4">
<h4 id="orgfbca61e"><span class="section-number-4">3.2.1</span> concat args</h4>
<div class="outline-text-4" id="text-3-2-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Argument</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">objs</td>
<td class="org-left">List or <b>dict</b> of pandas objects to be concatenated. The only required argument</td>
</tr>

<tr>
<td class="org-left">axis</td>
<td class="org-left">Axis to concatenate along; defaults to 0</td>
</tr>

<tr>
<td class="org-left">join</td>
<td class="org-left">One of 'inner', 'outer' , defaulting to 'outer'</td>
</tr>

<tr>
<td class="org-left">join_axes</td>
<td class="org-left">Specific indexes to use for the other n-1 axes instead of performing union/intersection logic</td>
</tr>

<tr>
<td class="org-left">keys</td>
<td class="org-left">Values to associate with objects being concatenated, forming a hierarchical index along the concatenation axis</td>
</tr>

<tr>
<td class="org-left">levels</td>
<td class="org-left">Specific indexes to use as hierarchical index level or levels if keys passed</td>
</tr>

<tr>
<td class="org-left">names</td>
<td class="org-left">Names for created hierarchical levels if keys and / or levels passed</td>
</tr>

<tr>
<td class="org-left">verify_integrity</td>
<td class="org-left">Check new axis in concatenated object for duplicates and raise exception if so. By default( False ) allows duplicates</td>
</tr>

<tr>
<td class="org-left">ignore_index</td>
<td class="org-left">Do not preserve indexes along concatenation axis , instead producing a new range(total_length) index</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org6f6ed20" class="outline-3">
<h3 id="org6f6ed20"><span class="section-number-3">3.3</span> Reshaping and Pivoting</h3>
<div class="outline-text-3" id="text-3-3">
</div><div id="outline-container-org29d56a9" class="outline-4">
<h4 id="org29d56a9"><span class="section-number-4">3.3.1</span> stack</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
Pivots from the columns in the data to the rows.
Stacking filters out missing data by default.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">data</span> = DataFrame<span style="color: #3a81c3;">(</span>np.arange<span style="color: #6c3163;">(</span><span style="color: #4e3163;">6</span><span style="color: #6c3163;">)</span>.reshape<span style="color: #6c3163;">(</span><span style="color: #2d9574;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">3</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span>, columns=<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'a'</span>, <span style="color: #2d9574;">'b'</span>, <span style="color: #2d9574;">'c'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
data
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">a  b  c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0  0  1  2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1  3  4  5</span>
data.stack<span style="color: #3a81c3;">()</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0  a    0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">b    1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c    2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1  a    3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">b    4</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c    5</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">dtype: int64</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5ade34" class="outline-4">
<h4 id="orgd5ade34"><span class="section-number-4">3.3.2</span> unstack</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
Pivots from the rows into the columns
</p>
<div class="org-src-container">
<pre class="src src-python">data.stack<span style="color: #3a81c3;">()</span>.unstack<span style="color: #3a81c3;">()</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">a  b  c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0  0  1  2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1  3  4  5</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">can specific level number or name</span>
data.stack<span style="color: #3a81c3;">()</span>.unstack<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">0</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#    </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0  1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">a  0  3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">b  1  4</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">c  2  5</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb276eb" class="outline-4">
<h4 id="orgcb276eb"><span class="section-number-4">3.3.3</span> pivot</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
<b>pivot</b> is a shortcut for creating a hierarchical index using <b>set_index</b> and reshaping with <b>unstack</b>
</p>
<div class="org-src-container">
<pre class="src src-python">quotes.head<span style="color: #3a81c3;">()</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#                   </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Open        High         Low       Close    Volume  \</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Date</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-04  626.951088  629.511067  624.241073  626.751061   3927000</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-05  627.181073  627.841071  621.541045  623.991055   6031900</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-06  625.861078  625.861078  606.361042  608.261023   7987100</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-07  609.401025  610.001045  592.651008  594.101005  12876600</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-08  592.000997  603.251034  589.110988  602.021036   9483900</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">#              </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Adj Close symbol</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Date</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-04  313.062468   GOOG</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-05  311.683844   GOOG</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-06  303.826685   GOOG</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-07  296.753749   GOOG</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-08  300.709808   GOOG</span>
quotes.pivot<span style="color: #3a81c3;">(</span>columns=<span style="color: #2d9574;">'symbol'</span>, values=<span style="color: #2d9574;">'Close'</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">symbol            AAPL        GOOG         IBM       MSFT</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Date</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-04  214.009998  626.751061  132.449997  30.950001</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-05  214.379993  623.991055  130.850006  30.959999</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-06  210.969995  608.261023  130.000000  30.770000</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-07  210.580000  594.101005  129.550003  30.450001</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2010-01-08  211.980005  602.021036  130.850006  30.660000</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org129a7f2" class="outline-3">
<h3 id="org129a7f2"><span class="section-number-3">3.4</span> Permutation(randomly reordering)</h3>
<div class="outline-text-3" id="text-3-4">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">df</span> = DataFrame<span style="color: #3a81c3;">(</span>np.arange<span style="color: #6c3163;">(</span><span style="color: #4e3163;">5</span> * <span style="color: #4e3163;">4</span><span style="color: #6c3163;">)</span>.reshape<span style="color: #6c3163;">(</span><span style="color: #4e3163;">5</span>, <span style="color: #4e3163;">4</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
df
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0   1   2   3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0   0   1   2   3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1   4   5   6   7</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2   8   9  10  11</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">3  12  13  14  15</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4  16  17  18  19</span>
<span style="color: #715ab1;">sampler</span> = np.random.permutation<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">5</span><span style="color: #3a81c3;">)</span>
sampler
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; array([1,0,2,3,4])</span>
df.take<span style="color: #3a81c3;">(</span>sampler<span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">#     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0   1   2   3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1   4   5   6   7</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">3  12  13  14  15</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4  16  17  18  19</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">0   0   1   2   3</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2   8   9  10  11</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb88f6ee" class="outline-3">
<h3 id="orgb88f6ee"><span class="section-number-3">3.5</span> String Manipulation</h3>
<div class="outline-text-3" id="text-3-5">
<p>
df.str.XXX
</p>
</div>
<div id="outline-container-orgea65e9b" class="outline-4">
<h4 id="orgea65e9b"><span class="section-number-4">3.5.1</span> Vectorized string methods</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
cat, contains, count, endswith/startswith, findall, get,
join, len, lower, upper, match, pad, center, repeat, replace,
slice, split, strip/rstrip/lstrip
</p>
</div>
</div>
</div>
<div id="outline-container-org2ba89b9" class="outline-3">
<h3 id="org2ba89b9"><span class="section-number-3">3.6</span> Check Duplicates</h3>
<div class="outline-text-3" id="text-3-6">
<p>
pandas.Index.is_unique, pandas.Series.is_unique
</p>
</div>
</div>
<div id="outline-container-orgf1a1de3" class="outline-3">
<h3 id="orgf1a1de3"><span class="section-number-3">3.7</span> Others</h3>
<div class="outline-text-3" id="text-3-7">
</div><div id="outline-container-org1c661a2" class="outline-4">
<h4 id="org1c661a2"><span class="section-number-4">3.7.1</span> <span class="todo TODO">TODO</span> Indicator/Dummy(for statistical model)</h4>
<div class="outline-text-4" id="text-3-7-1">
<p>
<b>pd.get_dummies</b>
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orge378278" class="outline-2">
<h2 id="orge378278"><span class="section-number-2">4</span> plotting</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-org8bb6c54" class="outline-3">
<h3 id="org8bb6c54"><span class="section-number-3">4.1</span> Basic</h3>
<div class="outline-text-3" id="text-4-1">
</div><div id="outline-container-org564debe" class="outline-4">
<h4 id="org564debe"><span class="section-number-4">4.1.1</span> Figures and Subplots</h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">fig</span> = plt.figure<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">ax1</span> = fig.add_subplot<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">get a reference of active figure</span>
plt.gcf<span style="color: #3a81c3;">()</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">all in one subplots</span>
<span style="color: #715ab1;">fig</span>, <span style="color: #715ab1;">axes</span> = plt.subplots<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span>,<span style="color: #4e3163;">3</span>, figsize=<span style="color: #6c3163;">(</span><span style="color: #4e3163;">14</span>, <span style="color: #4e3163;">8</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org52e0e39" class="outline-4">
<h4 id="org52e0e39"><span class="section-number-4">4.1.2</span> subplots options</h4>
<div class="outline-text-4" id="text-4-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Argument</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">figsize</td>
<td class="org-left">Size of figure</td>
</tr>

<tr>
<td class="org-left">nrows</td>
<td class="org-left">Number of rows of subplots</td>
</tr>

<tr>
<td class="org-left">ncols</td>
<td class="org-left">Number of columns of subplots</td>
</tr>

<tr>
<td class="org-left"><b>sharex</b></td>
<td class="org-left">All subplots use the same X-axis ticks</td>
</tr>

<tr>
<td class="org-left"><b>sharey</b></td>
<td class="org-left">see above</td>
</tr>

<tr>
<td class="org-left">subpot_kw</td>
<td class="org-left">creating dict of keywords</td>
</tr>

<tr>
<td class="org-left">**fig_kw</td>
<td class="org-left">Additional keywords</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org8dfe6ca" class="outline-4">
<h4 id="org8dfe6ca"><span class="section-number-4">4.1.3</span> Adjusting Size</h4>
<div class="outline-text-4" id="text-4-1-3">
<p>
subplots_adjust
</p>
<ul class="org-ul">
<li>args: left, right, bottom, top, wspace, hspace</li>
</ul>
</div>
</div>

<div id="outline-container-orge4d58d3" class="outline-4">
<h4 id="orge4d58d3"><span class="section-number-4">4.1.4</span> global configuration</h4>
<div class="outline-text-4" id="text-4-1-4">
<p>
plt.rc
</p>
<div class="org-src-container">
<pre class="src src-python">plt.rc<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'figure'</span>, figsize=<span style="color: #6c3163;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">10</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">font_options</span> = <span style="color: #3a81c3;">{</span><span style="color: #2d9574;">'family'</span> : <span style="color: #2d9574;">'monospace'</span>,
                <span style="color: #2d9574;">'weight'</span> : <span style="color: #2d9574;">'bold'</span>,
                <span style="color: #2d9574;">'size'</span>
                : <span style="color: #2d9574;">'small'</span><span style="color: #3a81c3;">}</span>
plt.rc<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'font'</span>, **font_options<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge43da9d" class="outline-3">
<h3 id="orge43da9d"><span class="section-number-3">4.2</span> plot function</h3>
<div class="outline-text-3" id="text-4-2">
</div><div id="outline-container-orgd80275e" class="outline-4">
<h4 id="orgd80275e"><span class="section-number-4">4.2.1</span> plotting range</h4>
<div class="outline-text-4" id="text-4-2-1">
<p>
plt.xlim, plt.ylim, ax.set_xlim, ax.set_ylim
</p>
</div>
</div>

<div id="outline-container-org4c0216e" class="outline-4">
<h4 id="org4c0216e"><span class="section-number-4">4.2.2</span> title, label, tick, ticklabel</h4>
<div class="outline-text-4" id="text-4-2-2">
<p>
set_title, set_xlabel, set_xticks, set_xticklabels
</p>
</div>
</div>

<div id="outline-container-orgdfb3780" class="outline-4">
<h4 id="orgdfb3780"><span class="section-number-4">4.2.3</span> legend</h4>
<div class="outline-text-4" id="text-4-2-3">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">fig</span> = plt.figure<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">ax</span> = fig.add_subplot<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
ax.plot<span style="color: #3a81c3;">(</span>randn<span style="color: #6c3163;">(</span><span style="color: #4e3163;">1000</span><span style="color: #6c3163;">)</span>.cumsum<span style="color: #6c3163;">()</span>, <span style="color: #2d9574;">'k'</span>, label=<span style="color: #2d9574;">'one'</span><span style="color: #3a81c3;">)</span>
ax.legend<span style="color: #3a81c3;">(</span>loc=<span style="color: #2d9574;">'best'</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">show the label</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a6fd3c" class="outline-4">
<h4 id="org2a6fd3c"><span class="section-number-4">4.2.4</span> Annotations</h4>
<div class="outline-text-4" id="text-4-2-4">
</div><div id="outline-container-org4945ec2" class="outline-5">
<h5 id="org4945ec2"><b>text, arrows, annotate</b> functions</h5>
<div class="outline-text-5" id="text-org4945ec2">
<div class="org-src-container">
<pre class="src src-python">ax.annotate<span style="color: #3a81c3;">(</span>label, xy=<span style="color: #6c3163;">(</span>date, spx.asof<span style="color: #2d9574;">(</span>date<span style="color: #2d9574;">)</span> + <span style="color: #4e3163;">50</span><span style="color: #6c3163;">)</span>,
            xytext=<span style="color: #6c3163;">(</span>date, spx.asof<span style="color: #2d9574;">(</span>date<span style="color: #2d9574;">)</span> + <span style="color: #4e3163;">200</span><span style="color: #6c3163;">)</span>,
            arrowprops=<span style="color: #3a81c3;">dict</span><span style="color: #6c3163;">(</span>facecolor=<span style="color: #2d9574;">'black'</span><span style="color: #6c3163;">)</span>,
            horizontalalignment=<span style="color: #2d9574;">'left'</span>, verticalalignment=<span style="color: #2d9574;">'top'</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9452fee" class="outline-5">
<h5 id="org9452fee">shapes</h5>
<div class="outline-text-5" id="text-org9452fee">
<p>
matplotlib.patches
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">fig</span> = plt.figure<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">ax</span> = fig.add_subplot<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">rect</span> = plt.Rectangle<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">2</span>, <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">75</span><span style="color: #6c3163;">)</span>, <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">4</span>, <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">15</span>, color=<span style="color: #2d9574;">'k'</span>, alpha=<span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">circ</span> = plt.Circle<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">(</span><span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">7</span>, <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">2</span><span style="color: #6c3163;">)</span>, <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">15</span>, color=<span style="color: #2d9574;">'b'</span>, alpha=<span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">3</span><span style="color: #3a81c3;">)</span>
ax.add_patch<span style="color: #3a81c3;">(</span>rect<span style="color: #3a81c3;">)</span>
ax.add_patch<span style="color: #3a81c3;">(</span>circ<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org2dd135d" class="outline-3">
<h3 id="org2dd135d"><span class="section-number-3">4.3</span> pandas Plotting</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-orgd8cc1fa" class="outline-4">
<h4 id="orgd8cc1fa"><span class="section-number-4">4.3.1</span> Line Plots</h4>
<div class="outline-text-4" id="text-4-3-1">
</div><div id="outline-container-org002fd70" class="outline-5">
<h5 id="org002fd70">Series</h5>
<div class="outline-text-5" id="text-org002fd70">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Argument</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">label</td>
<td class="org-left">Label for plot legend</td>
</tr>

<tr>
<td class="org-left">ax</td>
<td class="org-left">matplotlib subplot object to plot on. If nothing passed, uses active matplotlib subplot</td>
</tr>

<tr>
<td class="org-left">style</td>
<td class="org-left">Style string, like 'ko&#x2013;' , to be passed to matplotlib</td>
</tr>

<tr>
<td class="org-left">alpha</td>
<td class="org-left">The plot fill opacity (from 0 to 1)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orge6cd230" class="outline-5">
<h5 id="orge6cd230">DataFrame</h5>
<div class="outline-text-5" id="text-orge6cd230">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Argument</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">kind</td>
<td class="org-left">Can be 'line', 'bar', 'barh', 'kde'</td>
</tr>

<tr>
<td class="org-left">logy</td>
<td class="org-left">Use logarithmic scaling on the Y axis</td>
</tr>

<tr>
<td class="org-left">use_index</td>
<td class="org-left">Use the object index for tick labels</td>
</tr>

<tr>
<td class="org-left">rot</td>
<td class="org-left">Rotation of tick labels (0 through 360)</td>
</tr>

<tr>
<td class="org-left">xticks</td>
<td class="org-left">Values to use for X axis ticks</td>
</tr>

<tr>
<td class="org-left">yticks</td>
<td class="org-left">Values to use for Y axis ticks</td>
</tr>

<tr>
<td class="org-left">xlim</td>
<td class="org-left">X axis limits (e.g. [0, 10] )</td>
</tr>

<tr>
<td class="org-left">ylim</td>
<td class="org-left">Y axis limits</td>
</tr>

<tr>
<td class="org-left">grid</td>
<td class="org-left">Display axis grid (on by default)</td>
</tr>

<tr>
<td class="org-left">subplots</td>
<td class="org-left">Plot each DataFrame column in a separate subplot</td>
</tr>

<tr>
<td class="org-left">sharex, sharey</td>
<td class="org-left">If subplots=True , share the same Y/x axis</td>
</tr>

<tr>
<td class="org-left">figsize</td>
<td class="org-left">Size of figure to create as tuple</td>
</tr>

<tr>
<td class="org-left">title</td>
<td class="org-left">Plot title as string</td>
</tr>

<tr>
<td class="org-left">legend</td>
<td class="org-left">Add a subplot legend ( True by default)</td>
</tr>

<tr>
<td class="org-left">sort_columns</td>
<td class="org-left">Plot columns in alphabetical order</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org1d022af" class="outline-4">
<h4 id="org1d022af"><span class="section-number-4">4.3.2</span> Bar Plots</h4>
<div class="outline-text-4" id="text-4-3-2">
<ul class="org-ul">
<li>kind='bar': for vertical bars, 'barh' for horizontal bars</li>
<li>stacked=True: stacked bar plots</li>
<li>useful recipe: s.value_counts().plot(kind='bar')</li>
</ul>
</div>
</div>

<div id="outline-container-orga28a045" class="outline-4">
<h4 id="orga28a045"><span class="section-number-4">4.3.3</span> Histogram &amp; Density Plots</h4>
<div class="outline-text-4" id="text-4-3-3">
<ul class="org-ul">
<li>A kind of bar plot that gives a discretized display of value frequency</li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">comp1</span> = np.random.normal<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">0</span>, <span style="color: #4e3163;">1</span>, size=<span style="color: #4e3163;">200</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">N(0, 1)</span>
<span style="color: #715ab1;">comp2</span> = np.random.normal<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">2</span>, size=<span style="color: #4e3163;">200</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">N(10, 4)</span>
<span style="color: #715ab1;">values</span> = Series<span style="color: #3a81c3;">(</span>np.concatenate<span style="color: #6c3163;">(</span><span style="color: #2d9574;">[</span>comp1, comp2<span style="color: #2d9574;">]</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">fig</span> = plt.figure<span style="color: #3a81c3;">(</span>figsize=<span style="color: #6c3163;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">5</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
values.hist<span style="color: #3a81c3;">(</span>bins=<span style="color: #4e3163;">100</span>, alpha=<span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">3</span>, color=<span style="color: #2d9574;">'k'</span>, normed=<span style="color: #4e3163;">True</span><span style="color: #3a81c3;">)</span>
values.plot<span style="color: #3a81c3;">(</span>kind=<span style="color: #2d9574;">'kde'</span>, style=<span style="color: #2d9574;">'k--'</span><span style="color: #3a81c3;">)</span>
</pre>
</div>

<div class="figure">
<p><img src="../resources/data/hist_kde_plot.png" alt="hist_kde_plot.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgd4b7292" class="outline-4">
<h4 id="orgd4b7292"><span class="section-number-4">4.3.4</span> Scatter Plots</h4>
<div class="outline-text-4" id="text-4-3-4">
<p>
pairs plot or scatter plot matrix: <b>scatter_matrix</b>
</p>
</div>
</div>
</div>

<div id="outline-container-orgc281f6f" class="outline-3">
<h3 id="orgc281f6f"><span class="section-number-3">4.4</span> Saving Plots to File</h3>
<div class="outline-text-3" id="text-4-4">
<p>
Figure.savefig args
</p>
<ul class="org-ul">
<li>fname, dpi, facecolor, edgecolor, format</li>
<li>bbox_inches: The portion of the figure to save</li>
</ul>
</div>
</div>

<div id="outline-container-orgb805dc9" class="outline-3">
<h3 id="orgb805dc9"><span class="section-number-3">4.5</span> interactive mode</h3>
</div>
<div id="outline-container-org8ba7897" class="outline-3">
<h3 id="org8ba7897"><span class="section-number-3">4.6</span> add-ons</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>mplot3d</li>
<li><b>basemap</b> /cartopy: projection and mapping(plotting 2D data on maps)</li>
<li><b>seaborn</b> /holoviews/ggplot: higher-level plotting interfaces</li>
<li>axes_grid:  axes and axis helpers</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb326bfd" class="outline-2">
<h2 id="orgb326bfd"><span class="section-number-2">5</span> aggregation</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-org71b1793" class="outline-3">
<h3 id="org71b1793"><span class="section-number-3">5.1</span> group by</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">series groupby</span>
df<span style="color: #3a81c3;">[</span><span style="color: #2d9574;">'data1'</span><span style="color: #3a81c3;">]</span>.groupby<span style="color: #3a81c3;">(</span>df<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'key1'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
df.groupby<span style="color: #3a81c3;">(</span>df<span style="color: #6c3163;">[</span><span style="color: #2d9574;">'key1'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)[</span><span style="color: #2d9574;">'data1'</span><span style="color: #3a81c3;">]</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">syntactic sugar</span>
<span style="color: #3a81c3;">dict</span><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">list</span><span style="color: #6c3163;">(</span>df.groupby<span style="color: #2d9574;">(</span><span style="color: #2d9574;">'key1'</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">df groupby</span>
df.groupby<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'key1'</span>, <span style="color: #2d9574;">'key2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">options: as_index, axis</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">get group size</span>
df.groupby<span style="color: #3a81c3;">()</span>.size<span style="color: #3a81c3;">()</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">iterations</span>
<span style="color: #3a81c3; font-weight: bold;">for</span> name, group <span style="color: #3a81c3; font-weight: bold;">in</span> df.groupby<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'key1'</span><span style="color: #3a81c3;">)</span>:
    <span style="color: #3a81c3; font-weight: bold;">print</span> name, group
</pre>
</div>
</div>
<div id="outline-container-org1c7c427" class="outline-4">
<h4 id="org1c7c427"><span class="section-number-4">5.1.1</span> via dict</h4>
<div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">using mapping dict</span>
<span style="color: #715ab1;">mapping</span> = <span style="color: #3a81c3;">{</span><span style="color: #2d9574;">'a'</span>: <span style="color: #2d9574;">'group1'</span>, <span style="color: #2d9574;">'b'</span>: <span style="color: #2d9574;">'group1'</span>, <span style="color: #2d9574;">'c'</span>: <span style="color: #2d9574;">'group2'</span><span style="color: #3a81c3;">}</span>
df.groupby<span style="color: #3a81c3;">(</span>mapping, axis=<span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd58f4ba" class="outline-4">
<h4 id="orgd58f4ba"><span class="section-number-4">5.1.2</span> via function</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
Any function passed as a group key will be called once per
index value, with the return values being used as the group names
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">using function</span>
df.groupby<span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">len</span><span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">sum</span><span style="color: #3a81c3;">()</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org813da65" class="outline-4">
<h4 id="org813da65"><span class="section-number-4">5.1.3</span> via mixing</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
Mixing functions with arrays, dicts or Series is not a problem as
everything gets converted to arrays internally
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">key_list</span> = <span style="color: #3a81c3;">[</span><span style="color: #2d9574;">'one'</span>, <span style="color: #2d9574;">'one'</span>, <span style="color: #2d9574;">'two'</span><span style="color: #3a81c3;">]</span>
df.groupby<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #3a81c3;">len</span>, key_list<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">min</span><span style="color: #3a81c3;">()</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org780649a" class="outline-3">
<h3 id="org780649a"><span class="section-number-3">5.2</span> groupby aggregation</h3>
<div class="outline-text-3" id="text-5-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> Optimized grouby methods</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">count</td>
<td class="org-left">Number of non-NA values in the groupNumber of non</td>
</tr>

<tr>
<td class="org-left">sum</td>
<td class="org-left">Sum of non-NA values</td>
</tr>

<tr>
<td class="org-left">mean</td>
<td class="org-left">Mean of non-NA values</td>
</tr>

<tr>
<td class="org-left">median</td>
<td class="org-left">Arithmetic median of non-NA values</td>
</tr>

<tr>
<td class="org-left">std, var</td>
<td class="org-left">Unbiased (n - 1 denominator) standard deviation and variance</td>
</tr>

<tr>
<td class="org-left">min, max</td>
<td class="org-left">Minimum and maximum of non-NA values</td>
</tr>

<tr>
<td class="org-left">prod</td>
<td class="org-left">Product of non-NA values</td>
</tr>

<tr>
<td class="org-left">first, last</td>
<td class="org-left">First and last non-NA values</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-org5bb034b" class="outline-4">
<h4 id="org5bb034b"><span class="section-number-4">5.2.1</span> <b>aggregate</b> / <b>agg</b> method</h4>
<div class="outline-text-4" id="text-5-2-1">
</div><div id="outline-container-orgb57f6eb" class="outline-5">
<h5 id="orgb57f6eb">Series</h5>
<div class="outline-text-5" id="text-orgb57f6eb">
<div class="org-src-container">
<pre class="src src-python">s.agg<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'mean'</span>, <span style="color: #2d9574;">'std'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
s.agg<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">(</span><span style="color: #2d9574;">'foo'</span>, <span style="color: #2d9574;">'mean'</span><span style="color: #2d9574;">)</span>, <span style="color: #2d9574;">(</span><span style="color: #2d9574;">'bar'</span>, <span style="color: #2d9574;">'np.std'</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">foo bar will be the column name of result df</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgca24dd7" class="outline-5">
<h5 id="orgca24dd7">DataFrame</h5>
<div class="outline-text-5" id="text-orgca24dd7">
<div class="org-src-container">
<pre class="src src-python">df.agg<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">{</span><span style="color: #2d9574;">'col1'</span>: <span style="color: #2d9574;">'mean'</span>, <span style="color: #2d9574;">'col2'</span>: <span style="color: #2d9574;">'std'</span>, <span style="color: #2d9574;">'col3'</span>: np.<span style="color: #3a81c3;">max</span><span style="color: #6c3163;">}</span><span style="color: #3a81c3;">)</span>
df.agg<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">{</span><span style="color: #2d9574;">'col1'</span>: <span style="color: #2d9574;">[</span><span style="color: #2d9574;">'mean'</span>, <span style="color: #2d9574;">'std'</span><span style="color: #2d9574;">]</span><span style="color: #6c3163;">}</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc5d2a7e" class="outline-4">
<h4 id="orgc5d2a7e"><span class="section-number-4">5.2.2</span> apply</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
apply function has args:
</p>
<div class="org-src-container">
<pre class="src src-python">df.groupby<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'key1'</span>, <span style="color: #2d9574;">'key2'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">apply</span><span style="color: #3a81c3;">(</span>top, n=<span style="color: #4e3163;">1</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
<div id="outline-container-orgb8bde1a" class="outline-5">
<h5 id="orgb8bde1a">GroupBy method</h5>
<div class="outline-text-5" id="text-orgb8bde1a">
<div class="org-src-container">
<pre class="src src-python">grouped.describe<span style="color: #3a81c3;">()</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">is just shortcut of</span>
<span style="color: #715ab1;">f</span> = <span style="color: #3a81c3; font-weight: bold;">lambda</span> x: x.describe<span style="color: #3a81c3;">()</span>
grouped.<span style="color: #3a81c3;">apply</span><span style="color: #3a81c3;">(</span>f<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3cd8e0e" class="outline-4">
<h4 id="org3cd8e0e"><span class="section-number-4">5.2.3</span> transform</h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
<b>transform</b> is a more specialized function having rigid requirements.
<b>transform</b> applies a funtion to <b>each group</b>, then places the results
in the appropriate locations. If each group produces a scalar value, it
will be <b>propagated(broadcasted)</b>.
</p>
</div>
<div id="outline-container-orgfe13de9" class="outline-5">
<h5 id="orgfe13de9">Standardizing data (zscore) within group</h5>
<div class="outline-text-5" id="text-orgfe13de9">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">key</span> = <span style="color: #3a81c3; font-weight: bold;">lambda</span> x: x.year
<span style="color: #715ab1;">zscore</span> = <span style="color: #3a81c3; font-weight: bold;">lambda</span> x: <span style="color: #3a81c3;">(</span>x - x.mean<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span> / x.std<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">transformed</span> = ts.groupby<span style="color: #3a81c3;">(</span>key<span style="color: #3a81c3;">)</span>.transform<span style="color: #3a81c3;">(</span>zscore<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f9c495" class="outline-5">
<h5 id="org1f9c495">Filling NAs within groups with a value derived from each group</h5>
<div class="outline-text-5" id="text-org1f9c495">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">f</span> = <span style="color: #3a81c3; font-weight: bold;">lambda</span> x: x.fillna<span style="color: #3a81c3;">(</span>x.mean<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">transformed</span> = grouped.transform<span style="color: #3a81c3;">(</span>f<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org0873a13" class="outline-3">
<h3 id="org0873a13"><span class="section-number-3">5.3</span> cut &amp; qcut</h3>
</div>
<div id="outline-container-org2a41b5d" class="outline-3">
<h3 id="org2a41b5d"><span class="section-number-3">5.4</span> fillna with group value</h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">
<pre class="src src-python">grouped.<span style="color: #3a81c3;">apply</span><span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> g: g.fillna<span style="color: #6c3163;">(</span>g.mean<span style="color: #2d9574;">()</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>

<span style="color: #715ab1;">fill_values</span> = <span style="color: #3a81c3;">{</span><span style="color: #2d9574;">'a'</span>: <span style="color: #4e3163;">5</span>, <span style="color: #2d9574;">'b'</span>: <span style="color: #4e3163;">4</span><span style="color: #3a81c3;">}</span>
grouped.fillna<span style="color: #3a81c3;">(</span><span style="color: #3a81c3; font-weight: bold;">lambda</span> g: g.fillna<span style="color: #6c3163;">(</span>fill_values<span style="color: #2d9574;">[</span>g.name<span style="color: #2d9574;">]</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9c58ee3" class="outline-3">
<h3 id="org9c58ee3"><span class="section-number-3">5.5</span> pivot_table</h3>
<div class="outline-text-3" id="text-5-5">
<p>
<b>pivot_table</b> aggregates a table of data by one or more keys,
arranging the data in a rectangle with some of the group keys along the rows and some
along the columns. default aggfunc: mean
</p>
</div>
<div id="outline-container-org6455bbf" class="outline-4">
<h4 id="org6455bbf"><span class="section-number-4">5.5.1</span> crosstab</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
A cross-tabulation (or crosstab for short) is a special case of a pivot table
that computes group frequencies.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb5a2eb0" class="outline-2">
<h2 id="orgb5a2eb0"><span class="section-number-2">6</span> other tools</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-org23973e8" class="outline-3">
<h3 id="org23973e8"><span class="section-number-3">6.1</span> dateutil</h3>
<div class="outline-text-3" id="text-6-1">
<p>
parser.parse: parse datetime str to datetime object
</p>
</div>
</div>
<div id="outline-container-org4f8aef6" class="outline-3">
<h3 id="org4f8aef6"><span class="section-number-3">6.2</span> statsmodels</h3>
</div>
<div id="outline-container-org3b9d24b" class="outline-3">
<h3 id="org3b9d24b"><span class="section-number-3">6.3</span> scikit-learn</h3>
</div>
<div id="outline-container-org950f282" class="outline-3">
<h3 id="org950f282"><span class="section-number-3">6.4</span> bottleneck</h3>
<div class="outline-text-3" id="text-6-4">
<p>
provides an alternate implementation of NaN-friendly moving window functions.
</p>
</div>
</div>
<div id="outline-container-org6cc0264" class="outline-3">
<h3 id="org6cc0264"><span class="section-number-3">6.5</span> visualization ecosystem</h3>
<div class="outline-text-3" id="text-6-5">
<ul class="org-ul">
<li>Chaco: 2-Dimensional Plotting, interactive visualization.</li>
<li>mayavi: a 3D graphics toolkit built on the open source C++ graphics library VTK</li>
<li>PyQwt</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org096868a" class="outline-2">
<h2 id="org096868a"><span class="section-number-2">7</span> hdf</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-orgdff61f2" class="outline-3">
<h3 id="orgdff61f2"><span class="section-number-3">7.1</span> dataset</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">f</span> = h5py.File<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"testfile.hdf5"</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">dset</span> = f.create_dataset<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"big dataset"</span>, <span style="color: #6c3163;">(</span><span style="color: #4e3163;">1024</span>**<span style="color: #4e3163;">3</span>, <span style="color: #6c3163;">)</span>, dtype=np.float32<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">dset</span><span style="color: #3a81c3;">[</span><span style="color: #4e3163;">0</span>:<span style="color: #4e3163;">1024</span><span style="color: #3a81c3;">]</span> = np.arange<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">1024</span><span style="color: #3a81c3;">)</span>
f.flush<span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">dump cache on disk</span>

<span style="color: #3a81c3; font-weight: bold;">with</span> dset.astype<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'float64'</span><span style="color: #3a81c3;">)</span>:
    <span style="color: #715ab1;">out</span> = dset<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">0</span>,:<span style="color: #3a81c3;">]</span>
out.dtype <span style="color: #2aa1ae; background-color: #ecf3ec;">#</span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; dtype('float64')</span>
</pre>
</div>
</div>
<div id="outline-container-orgf9ef493" class="outline-4">
<h4 id="orgf9ef493"><span class="section-number-4">7.1.1</span> Ellipsis</h4>
<div class="outline-text-4" id="text-7-1-1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">dset</span> = f.create_dataset<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'4d'</span>, shape=<span style="color: #6c3163;">(</span><span style="color: #4e3163;">100</span>, <span style="color: #4e3163;">80</span>, <span style="color: #4e3163;">50</span>, <span style="color: #4e3163;">20</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
dset<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">0</span>,...,<span style="color: #4e3163;">0</span><span style="color: #3a81c3;">]</span>.shape
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; (80, 50)</span>
dset<span style="color: #3a81c3;">[</span>...<span style="color: #3a81c3;">]</span>.shape
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">=&gt; (100, 80, 50, 20)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org996e6ed" class="outline-4">
<h4 id="org996e6ed"><span class="section-number-4">7.1.2</span> chunks</h4>
<div class="outline-text-4" id="text-7-1-2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">dset</span> = f.create_dataset<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'chunked'</span>, <span style="color: #6c3163;">(</span><span style="color: #4e3163;">100</span>,<span style="color: #4e3163;">480</span>,<span style="color: #4e3163;">640</span><span style="color: #6c3163;">)</span>, dtype=<span style="color: #2d9574;">'i1'</span>, chunks=<span style="color: #6c3163;">(</span><span style="color: #4e3163;">1</span>, <span style="color: #4e3163;">64</span>, <span style="color: #4e3163;">64</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf093fee" class="outline-3">
<h3 id="orgf093fee"><span class="section-number-3">7.2</span> lookup tools</h3>
<div class="outline-text-3" id="text-7-2">
<ul class="org-ul">
<li>ViTables</li>
<li>h5ls</li>
</ul>
</div>
</div>

<div id="outline-container-orge91620e" class="outline-3">
<h3 id="orge91620e"><span class="section-number-3">7.3</span> notice</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li>slice on hdf table will do read&amp;write on disk</li>
<li><p>
use np.s_ to get a slice object
</p>
<div class="org-src-container">
<pre class="src src-python">dset.read_direct<span style="color: #3a81c3;">(</span>out, source_sel=np.s_<span style="color: #6c3163;">[</span><span style="color: #4e3163;">0</span>,:<span style="color: #6c3163;">]</span>, dest_sel=np.s_<span style="color: #6c3163;">[</span><span style="color: #4e3163;">50</span>,:<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5824ed9" class="outline-2">
<h2 id="org5824ed9"><span class="section-number-2">8</span> SQLAlchemy</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-org4de8ab0" class="outline-3">
<h3 id="org4de8ab0"><span class="section-number-3">8.1</span> Core</h3>
<div class="outline-text-3" id="text-8-1">
</div><div id="outline-container-org1eb89c0" class="outline-4">
<h4 id="org1eb89c0"><span class="section-number-4">8.1.1</span> Types</h4>
<div class="outline-text-4" id="text-8-1-1">
</div><div id="outline-container-org1954df5" class="outline-5">
<h5 id="org1954df5">Generic</h5>
<div class="outline-text-5" id="text-org1954df5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">SQLAlchemy</th>
<th scope="col" class="org-left">Python</th>
<th scope="col" class="org-left">SQL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">BigInteger</td>
<td class="org-left">int</td>
<td class="org-left">BIGINT</td>
</tr>

<tr>
<td class="org-left">Boolean</td>
<td class="org-left">bool</td>
<td class="org-left">BOOLEAN or SMALLINT</td>
</tr>

<tr>
<td class="org-left">Date</td>
<td class="org-left">datetime.date</td>
<td class="org-left">DATE(SQLite: STRING)</td>
</tr>

<tr>
<td class="org-left">DateTime</td>
<td class="org-left">datetime.datetime</td>
<td class="org-left">DATETIME(SQLite: STRING)</td>
</tr>

<tr>
<td class="org-left">Enum</td>
<td class="org-left">str</td>
<td class="org-left">ENUM or VARCHAR</td>
</tr>

<tr>
<td class="org-left">Float</td>
<td class="org-left">float or Decimal</td>
<td class="org-left">FLOAT or REAL</td>
</tr>

<tr>
<td class="org-left">Integer</td>
<td class="org-left">int</td>
<td class="org-left">INTEGER</td>
</tr>

<tr>
<td class="org-left">Interval</td>
<td class="org-left">datetime.timedelta</td>
<td class="org-left">INTERVAL or DATE from epoch</td>
</tr>

<tr>
<td class="org-left">LargeBinary</td>
<td class="org-left">byte</td>
<td class="org-left">BLOB or BYTEA</td>
</tr>

<tr>
<td class="org-left">Numeric</td>
<td class="org-left">decimal.Decimal</td>
<td class="org-left">NUMERIC or DECIMAL</td>
</tr>

<tr>
<td class="org-left">Unicode</td>
<td class="org-left">unicode</td>
<td class="org-left">UNICODE or VARCHAR</td>
</tr>

<tr>
<td class="org-left">Text</td>
<td class="org-left">str</td>
<td class="org-left">CLOB or TEXT</td>
</tr>

<tr>
<td class="org-left">Time</td>
<td class="org-left">datetime.time</td>
<td class="org-left">DATETIME</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org88f409c" class="outline-5">
<h5 id="org88f409c">SQL standard</h5>
<div class="outline-text-5" id="text-org88f409c">
<p>
See module <b>sqlalchemy.types</b>. The standard types are in all capital letters.
</p>
</div>
</div>
<div id="outline-container-org5e11c93" class="outline-5">
<h5 id="org5e11c93">Vendor specific</h5>
<div class="outline-text-5" id="text-org5e11c93">
<p>
See module <b>sqlalchemy.dialects</b>
</p>
</div>
</div>

<div id="outline-container-org7361b77" class="outline-5">
<h5 id="org7361b77">User defined</h5>
</div>
</div>

<div id="outline-container-org6c8fd11" class="outline-4">
<h4 id="org6c8fd11"><span class="section-number-4">8.1.2</span> Metadata</h4>
<div class="outline-text-4" id="text-8-1-2">
<p>
Think metadata as a kind of catalog of Table objects with optional
information about the engine and the connection.
Read operations on metadata object are <b>thread-safe</b>, however,
table construction is not completely <b>thread-safe</b>.
</p>
</div>
</div>

<div id="outline-container-orgf811e61" class="outline-4">
<h4 id="orgf811e61"><span class="section-number-4">8.1.3</span> Tables</h4>
<div class="outline-text-4" id="text-8-1-3">
</div><div id="outline-container-org36ae7fa" class="outline-5">
<h5 id="org36ae7fa">Using user-defined Table objects</h5>
<div class="outline-text-5" id="text-org36ae7fa">
<p>
Table objects are initialized in SQLAlchemy Core in a supplied <b>MetaData object</b> by
calling the Table constructor with the table name and metadata; any additional argu‐
ments are assumed to be column objects.
</p>
</div>
</div>

<div id="outline-container-org7840309" class="outline-5">
<h5 id="org7840309">Using declarative classes that represent your tables(ORM)</h5>
</div>
<div id="outline-container-orga599225" class="outline-5">
<h5 id="orga599225">Inferring them from the database</h5>
</div>
</div>


<div id="outline-container-orgfd14c7f" class="outline-4">
<h4 id="orgfd14c7f"><span class="section-number-4">8.1.4</span> Columns</h4>
<div class="outline-text-4" id="text-8-1-4">
<p>
<b>Column</b> objects represent each field in the table.
The columns are constructed by calling Column with a name, type, and then
arguments that represent any additional SQL constructs and constraints
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">users</span> = Table<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'users'</span>, metadata,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'user_id'</span>, Integer<span style="color: #2d9574;">()</span>, primary_key=<span style="color: #4e3163;">True</span><span style="color: #6c3163;">)</span>,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'username'</span>, String<span style="color: #2d9574;">(</span><span style="color: #4e3163;">15</span><span style="color: #2d9574;">)</span>, nullable=<span style="color: #4e3163;">False</span>, unique=<span style="color: #4e3163;">True</span><span style="color: #6c3163;">)</span>,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'email_address'</span>, String<span style="color: #2d9574;">(</span><span style="color: #4e3163;">255</span><span style="color: #2d9574;">)</span>, nullable=<span style="color: #4e3163;">False</span><span style="color: #6c3163;">)</span>,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'phone'</span>, String<span style="color: #2d9574;">(</span><span style="color: #4e3163;">20</span><span style="color: #2d9574;">)</span>, nullable=<span style="color: #4e3163;">False</span><span style="color: #6c3163;">)</span>,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'password'</span>, String<span style="color: #2d9574;">(</span><span style="color: #4e3163;">25</span><span style="color: #2d9574;">)</span>, nullable=<span style="color: #4e3163;">False</span><span style="color: #6c3163;">)</span>,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'created_on'</span>, DateTime<span style="color: #2d9574;">()</span>, default=datetime.now<span style="color: #6c3163;">)</span>,
              Column<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'updated_on'</span>, DateTime<span style="color: #2d9574;">()</span>, default=datetime.now,
                     onupdate=datetime.now<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>useful arg: primary_key, nullable, unique, default, onupdate</li>
</ul>
</div>
</div>

<div id="outline-container-orga1abb30" class="outline-4">
<h4 id="orga1abb30"><span class="section-number-4">8.1.5</span> Rows</h4>
<div class="outline-text-4" id="text-8-1-5">
</div><ul class="org-ul"><li><a id="orgc9d1456"></a>items()<br /><div class="outline-text-6" id="text-orgc9d1456">
<p>
return a list of columns and values.
</p>
</div></li></ul>
</div>

<div id="outline-container-org43d0d8b" class="outline-4">
<h4 id="org43d0d8b"><span class="section-number-4">8.1.6</span> Keys and Constraints</h4>
<div class="outline-text-4" id="text-8-1-6">
<ul class="org-ul">
<li>PrimaryKeyConstraint</li>
<li>UniqueConstraint</li>
<li>CheckConstraint</li>
<li>ForeignKeyConstraint</li>
</ul>

<div class="org-src-container">
<pre class="src src-python">PrimaryKeyConstraint<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'user_id'</span>, name=<span style="color: #2d9574;">'user_pk'</span><span style="color: #3a81c3;">)</span>
UniqueConstraint<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'username'</span>, name=<span style="color: #2d9574;">'uix_username'</span><span style="color: #3a81c3;">)</span>
CheckConstraint<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'unit_cost &gt;= 0.00'</span>, name=<span style="color: #2d9574;">'unit_cost_positive'</span><span style="color: #3a81c3;">)</span>
ForeignKeyConstraint<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span><span style="color: #2d9574;">'order_id'</span><span style="color: #6c3163;">]</span>, <span style="color: #6c3163;">[</span><span style="color: #2d9574;">'orders.order_id'</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0a8c80" class="outline-4">
<h4 id="orgb0a8c80"><span class="section-number-4">8.1.7</span> Index</h4>
<div class="outline-text-4" id="text-8-1-7">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> Index
Index<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'ix_cookies_cookie_name'</span>, <span style="color: #2d9574;">'cookie_name'</span><span style="color: #3a81c3;">)</span>
Index<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'ix_test'</span>, mytable.c.cookie_sku, mytable.c.cookie_name<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org38d0173" class="outline-4">
<h4 id="org38d0173"><span class="section-number-4">8.1.8</span> FK</h4>
<div class="outline-text-4" id="text-8-1-8">
<div class="org-src-container">
<pre class="src src-python">Column<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'user_id'</span>, ForeignKey<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'users.user_id'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3988cd2" class="outline-4">
<h4 id="org3988cd2"><span class="section-number-4">8.1.9</span> SQL</h4>
<div class="outline-text-4" id="text-8-1-9">
</div><div id="outline-container-org8359d95" class="outline-5">
<h5 id="org8359d95">Insert</h5>
<div class="outline-text-5" id="text-org8359d95">
<ul class="org-ul">
<li><p>
single insert
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">ins</span> = cookies.insert<span style="color: #3a81c3;">()</span>.values<span style="color: #3a81c3;">(</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">ins = insert(cookies).values( &lt;= the same</span>
    cookie_name=<span style="color: #2d9574;">"chocolate chip"</span>,
    cookie_recipe_url=<span style="color: #2d9574;">"http://some.aweso.me/cookie/recipe.html"</span>,
    cookie_sku=<span style="color: #2d9574;">"CC01"</span>,
    quantity=<span style="color: #2d9574;">"12"</span>,
    unit_cost=<span style="color: #2d9574;">"0.50"</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span><span style="color: #3a81c3;">str</span><span style="color: #6c3163;">(</span>ins<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">print sql statement</span>
ins.<span style="color: #3a81c3;">compile</span><span style="color: #3a81c3;">()</span>.params <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">show arguments in sql statement</span>
<span style="color: #715ab1;">result</span> = connection.execute<span style="color: #3a81c3;">(</span>ins<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">executing the insert statement</span>
result.inserted_primary_key
</pre>
</div></li>
<li><p>
multiple inserts
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">result</span> = connection.execute<span style="color: #3a81c3;">(</span>ins, inventory_list<span style="color: #3a81c3;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org916383b" class="outline-5">
<h5 id="org916383b">Query</h5>
<div class="outline-text-5" id="text-org916383b">
<p>
The <b>select</b> method expects a list of columns to select;
however, for convenience, it also accepts <b>Table</b> objects
and selects all the columns on the table.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">s</span> = select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>cookies<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">rp</span> = connection.execute<span style="color: #3a81c3;">(</span>s<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">results</span> = rp.fetchall<span style="color: #3a81c3;">()</span>
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="org5a136c2"></a>ResultProxy<br /><div class="outline-text-6" id="text-org5a136c2">
<p>
ResultProxy makes handling query results easier by allowing access
using an index, name, or Column object.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">first_row</span> = results<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">0</span><span style="color: #3a81c3;">]</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">get first row</span>
first_row<span style="color: #3a81c3;">[</span><span style="color: #4e3163;">1</span><span style="color: #3a81c3;">]</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">access column by index</span>
first_row.cookie_name <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">access column by name</span>
first_row<span style="color: #3a81c3;">[</span>cookies.c.cookie_name<span style="color: #3a81c3;">]</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">access column by Column object</span>
</pre>
</div>
<ul class="org-ul">
<li><p>
iterating over a ResultProxy
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">rp</span> = connection.execute<span style="color: #3a81c3;">(</span>s<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">for</span> record <span style="color: #3a81c3; font-weight: bold;">in</span> rp:
    <span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>record.cookie_name<span style="color: #3a81c3;">)</span>
</pre>
</div></li>
<li>other methods: <i>first</i>, <i>fetchone</i>, <i>scalar</i>, <i>keys</i></li>
</ul>
</div></li>

<li><a id="org3ab2180"></a>Order By<br /><div class="outline-text-6" id="text-org3ab2180">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> desc
<span style="color: #715ab1;">s</span> = select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>cookies.c.cookie_name,
            cookies.c.quantity<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>.order_by<span style="color: #3a81c3;">(</span>desc<span style="color: #6c3163;">(</span>cookies.c.quantity<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>.limit<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div></li>

<li><a id="org13595b7"></a>Built-In SQL Functions<br /><div class="outline-text-6" id="text-org13595b7">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">s</span> = select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>func.<span style="color: #3a81c3;">sum</span><span style="color: #2d9574;">(</span>cookies.c.quantity<span style="color: #2d9574;">)</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<ul class="org-ul">
<li><p>
count
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">s1</span> = select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>func.count<span style="color: #2d9574;">(</span>cookies.c.cookie_name<span style="color: #2d9574;">)</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">s2</span> = select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>func.count<span style="color: #2d9574;">(</span>cookies.c.cookie_name<span style="color: #2d9574;">)</span>.label<span style="color: #2d9574;">(</span><span style="color: #2d9574;">'inventory_count'</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span><span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">rename</span>
<span style="color: #715ab1;">record1</span> = connection.execute<span style="color: #3a81c3;">(</span>s<span style="color: #3a81c3;">)</span>.first<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">record2</span> = connection.execute<span style="color: #3a81c3;">(</span>s<span style="color: #3a81c3;">)</span>.first<span style="color: #3a81c3;">()</span>

<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>record1.count_1<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">default: &lt;func_name&gt;_&lt;position&gt;</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>record2.inventory_count<span style="color: #3a81c3;">)</span>
</pre>
</div></li>
</ul>
</div></li>

<li><a id="org9427903"></a>Filtering<br /><div class="outline-text-6" id="text-org9427903">
<div class="org-src-container">
<pre class="src src-python">select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>cookies<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>.where<span style="color: #3a81c3;">(</span>cookies.c.cookie_name == <span style="color: #2d9574;">'chocolate chip'</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<ul class="org-ul">
<li><p>
ClauseElements
</p>

<p>
between(cleft, cright), concat(col_two), distinct(),
in_([list]), notin_([list]), is_(None), isnot(None),
contains(string), endswith(string), like(string),
startswith(string), ilike(string)
</p></li>

<li>use and_, or_, not_ inside <b>where</b> clauses</li>
</ul>
</div></li></ul>
</div>

<div id="outline-container-org5afccdd" class="outline-5">
<h5 id="org5afccdd">Update</h5>
<div class="outline-text-5" id="text-org5afccdd">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> update
<span style="color: #715ab1;">u</span> = update<span style="color: #3a81c3;">(</span>cookies<span style="color: #3a81c3;">)</span>.where<span style="color: #3a81c3;">(</span>cookies.c.cookie_name == <span style="color: #2d9574;">"chocolate chip"</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">u</span> = u.values<span style="color: #3a81c3;">(</span>quantity=<span style="color: #6c3163;">(</span>cookies.c.quantity + <span style="color: #4e3163;">120</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">u = u.values({"quantity": 1, "cookie_name": "bear"}) # multi column update</span>
<span style="color: #715ab1;">result</span> = connection.execute<span style="color: #3a81c3;">(</span>u<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>result.rowcount<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6c465f" class="outline-5">
<h5 id="orga6c465f">Delete</h5>
<div class="outline-text-5" id="text-orga6c465f">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> delete
<span style="color: #715ab1;">u</span> = delete<span style="color: #3a81c3;">(</span>cookies<span style="color: #3a81c3;">)</span>.where<span style="color: #3a81c3;">(</span>cookies.c.cookie_name == <span style="color: #2d9574;">"dark chocolate chip"</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">result</span> = connection.execute<span style="color: #3a81c3;">(</span>u<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>result.rowcount<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0382060" class="outline-5">
<h5 id="org0382060">Join</h5>
<div class="outline-text-5" id="text-org0382060">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">columns</span> = <span style="color: #3a81c3;">[</span>
    orders.c.order_id,
    users.c.username,
    users.c.phone,
    cookies.c.cookie_name,
    line_items.c.quantity,
    line_items.c.extended_cost,
<span style="color: #3a81c3;">]</span>
<span style="color: #715ab1;">cookiemon_orders</span> = select<span style="color: #3a81c3;">(</span>columns<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">cookiemon_orders</span> = cookiemon_orders.select_from<span style="color: #3a81c3;">(</span>
    orders.join<span style="color: #6c3163;">(</span>users<span style="color: #6c3163;">)</span>.join<span style="color: #6c3163;">(</span>line_items<span style="color: #6c3163;">)</span>.join<span style="color: #6c3163;">(</span>cookies<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>.where<span style="color: #3a81c3;">(</span>
        users.c.username == <span style="color: #2d9574;">'cookiemon'</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge797c11" class="outline-5">
<h5 id="orge797c11">Alias</h5>
<div class="outline-text-5" id="text-orge797c11">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">manager</span> = employee_table.alias<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'mgr'</span><span style="color: #3a81c3;">)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">SELECT employee.name</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">FROM employee, employee AS mgr</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">WHERE employee.manager_id = mgr.id AND mgr.name = ?</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org972349e" class="outline-5">
<h5 id="org972349e">GroupBy</h5>
<div class="outline-text-5" id="text-org972349e">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">columns</span> = <span style="color: #3a81c3;">[</span>users.c.username, func.count<span style="color: #6c3163;">(</span>orders.c.order_id<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">]</span>
<span style="color: #715ab1;">all_orders</span> = select<span style="color: #3a81c3;">(</span>columns<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">all_orders</span> = all_orders.select_from<span style="color: #3a81c3;">(</span>users.outerjoin<span style="color: #6c3163;">(</span>orders<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">all_orders</span> = all_orders.group_by<span style="color: #3a81c3;">(</span>users.c.username<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b22e99" class="outline-5">
<h5 id="org1b22e99">Raw Queries</h5>
<div class="outline-text-5" id="text-org1b22e99">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> text
<span style="color: #715ab1;">result</span> = connection.execute<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"select * from orders"</span><span style="color: #3a81c3;">)</span>.fetchall<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">stmt</span> = select<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>users<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>.where<span style="color: #3a81c3;">(</span>text<span style="color: #6c3163;">(</span><span style="color: #2d9574;">"username='cookiemon'"</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>connection.execute<span style="color: #6c3163;">(</span>stmt<span style="color: #6c3163;">)</span>.fetchall<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0bdf3de" class="outline-4">
<h4 id="org0bdf3de"><span class="section-number-4">8.1.10</span> Exceptions</h4>
<div class="outline-text-4" id="text-8-1-10">
<p>
Common exceptions: AttributeError, IntegrityError&#x2026; in <b>sqlalchemy.exc</b> module
</p>
</div>
</div>
<div id="outline-container-org5355cd9" class="outline-4">
<h4 id="org5355cd9"><span class="section-number-4">8.1.11</span> Transactions</h4>
<div class="outline-text-4" id="text-8-1-11">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">transaction</span> = connection.begin<span style="color: #3a81c3;">()</span>
connection.execute<span style="color: #3a81c3;">(</span>...<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">try</span>:
    transaction.commit<span style="color: #3a81c3;">()</span>
<span style="color: #3a81c3; font-weight: bold;">except</span> IntegrityError <span style="color: #3a81c3; font-weight: bold;">as</span> error:
    transaction.rollback<span style="color: #3a81c3;">()</span>
    <span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>error<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgff951c8" class="outline-4">
<h4 id="orgff951c8"><span class="section-number-4">8.1.12</span> Reflection</h4>
<div class="outline-text-4" id="text-8-1-12">
<div class="org-src-container">
<pre class="src src-python">metadata.reflect<span style="color: #3a81c3;">(</span>bind=engine<span style="color: #3a81c3;">)</span>
metadata.tables.keys<span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">show tables</span>
<span style="color: #715ab1;">table_obj</span> = metadata.tables<span style="color: #3a81c3;">[</span><span style="color: #2d9574;">"table_name"</span><span style="color: #3a81c3;">]</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8a008ec" class="outline-3">
<h3 id="org8a008ec"><span class="section-number-3">8.2</span> ORM</h3>
<div class="outline-text-3" id="text-8-2">
</div><div id="outline-container-org87c7a1f" class="outline-4">
<h4 id="org87c7a1f"><span class="section-number-4">8.2.1</span> User-defined tables</h4>
<div class="outline-text-4" id="text-8-2-1">
<p>
The <b>declarative_base</b> combines a <b>metadata</b> container and
a <b>mapper</b> that maps our class to a database table.
</p>

<p>
A proper class for use with the ORM must do four things:
</p>

<ul class="org-ul">
<li>Inherit from the declarative_base object.</li>
<li>Contain <span class="underline"><span class="underline">tablename</span></span> , which is the table name to be used in the database.</li>
<li>Contain one or more attributes that are Column objects.</li>
<li>Ensure one or more attributes make up a primary key.</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">Base</span> = declarative_base<span style="color: #3a81c3;">()</span>
<span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Cookie</span><span style="color: #3a81c3;">(</span>Base<span style="color: #3a81c3;">)</span>:
    <span style="color: #715ab1;">__tablename__</span> = <span style="color: #2d9574;">'cookies'</span>

    <span style="color: #715ab1;">cookie_id</span> = Column<span style="color: #3a81c3;">(</span>Integer<span style="color: #6c3163;">()</span>, primay_key=<span style="color: #4e3163;">True</span><span style="color: #3a81c3;">)</span>
    ...
Cookie.__table__ <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">same as the table object using Table(...)</span>
</pre>
</div>
</div>

<div id="outline-container-org33e48b9" class="outline-5">
<h5 id="org33e48b9">Keys, Constraints, and Indexes</h5>
<div class="outline-text-5" id="text-org33e48b9">
<p>
use <span class="underline"><span class="underline">table_args</span></span> to specify keys, constraints, and indexes
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">SomeDataClass</span><span style="color: #3a81c3;">(</span>Base<span style="color: #3a81c3;">)</span>:
    <span style="color: #715ab1;">__tablename__</span> = <span style="color: #2d9574;">'somedatatable'</span>
    <span style="color: #715ab1;">__table_args__</span> = <span style="color: #3a81c3;">(</span>ForeignKeyConstraint<span style="color: #6c3163;">(</span><span style="color: #2d9574;">[</span><span style="color: #2d9574;">'id'</span><span style="color: #2d9574;">]</span>, <span style="color: #2d9574;">[</span><span style="color: #2d9574;">'other_table.id'</span><span style="color: #2d9574;">]</span><span style="color: #6c3163;">)</span>,
                      CheckConstraint<span style="color: #6c3163;">(</span>unit_cost &gt;= <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">00</span>,
                                      name=<span style="color: #2d9574;">'unit_cost_positive'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgabc53b9" class="outline-5">
<h5 id="orgabc53b9">FK</h5>
<div class="outline-text-5" id="text-orgabc53b9">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> ForeignKey, Boolean
<span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy.orm <span style="color: #3a81c3; font-weight: bold;">import</span> relationship, backref
<span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Order</span><span style="color: #3a81c3;">(</span>Base<span style="color: #3a81c3;">)</span>:
    <span style="color: #715ab1;">__tablename__</span> = <span style="color: #2d9574;">'orders'</span>
    <span style="color: #715ab1;">order_id</span> = Column<span style="color: #3a81c3;">(</span>Integer<span style="color: #6c3163;">()</span>, primary_key=<span style="color: #4e3163;">True</span><span style="color: #3a81c3;">)</span>
    <span style="color: #715ab1;">user_id</span> = Column<span style="color: #3a81c3;">(</span>Integer<span style="color: #6c3163;">()</span>, ForeignKey<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'users.user_id'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
    <span style="color: #715ab1;">shipped</span> = Column<span style="color: #3a81c3;">(</span>Boolean<span style="color: #6c3163;">()</span>, default=<span style="color: #4e3163;">False</span><span style="color: #3a81c3;">)</span>
    <span style="color: #715ab1;">user</span> = relationship<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">"User"</span>, backref=backref<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'orders'</span>, order_by=order_id<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<p>
This relationship also establishes an orders property on
the User class via the backref keyword argument, which is ordered by <i>order_id</i>.
</p>

<p>
The <b>relationship</b> directive needs a target class for the relationship, and can
optionally include a back reference to be added to target class.
</p>
</div>
</div>
<div id="outline-container-org492ed58" class="outline-5">
<h5 id="org492ed58">Persistance</h5>
<div class="outline-text-5" id="text-org492ed58">
<div class="org-src-container">
<pre class="src src-python">Base.metadata.create_all<span style="color: #3a81c3;">(</span>engine<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org06bcf6a" class="outline-4">
<h4 id="org06bcf6a"><span class="section-number-4">8.2.2</span> session</h4>
<div class="outline-text-4" id="text-8-2-2">
<p>
The session wraps a database connection via an engine,
and provides an identity map for objects that you load
via the session or associate with the session.
</p>

<p>
A session also wraps a transaction, and that transaction
will be open until the session is committed or rolled back.
</p>
</div>
<div id="outline-container-orgf755588" class="outline-5">
<h5 id="orgf755588">Init</h5>
<div class="outline-text-5" id="text-orgf755588">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> create_engine
<span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy.orm <span style="color: #3a81c3; font-weight: bold;">import</span> sessionmaker
<span style="color: #715ab1;">engine</span> = create_engine<span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'sqlite:///:memory:'</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">Session</span> = sessionmaker<span style="color: #3a81c3;">(</span>bind=engine<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">session</span> = Session<span style="color: #3a81c3;">()</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a91417" class="outline-5">
<h5 id="org8a91417">Insert</h5>
<div class="outline-text-5" id="text-org8a91417">
</div><ul class="org-ul"><li><a id="orgd15ccf2"></a>add-&gt;commit<br /><div class="outline-text-6" id="text-orgd15ccf2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">cc_cookie</span> = Cookie<span style="color: #3a81c3;">(</span>cookie_name=<span style="color: #2d9574;">'chocolate chip'</span>,
                   cookie_recipe_url=<span style="color: #2d9574;">'http://some.aweso.me/cookie/recipe.html'</span>,
                   cookie_sku=<span style="color: #2d9574;">'CC01'</span>,
                   quantity=<span style="color: #4e3163;">12</span>,
                   unit_cost=<span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">50</span><span style="color: #3a81c3;">)</span>
session.add<span style="color: #3a81c3;">(</span>cc_cookie<span style="color: #3a81c3;">)</span>
session.commit<span style="color: #3a81c3;">()</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>cc_cookie.cookie_id<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div></li>
<li><a id="org3555fe4"></a>add-&gt;flush<br /><div class="outline-text-6" id="text-org3555fe4">
<p>
A flush is like a commit; however, it doesn’t perform a database commit and end the transaction.
The data objects are still associated with the session.
</p>
</div></li>

<li><a id="org06f9722"></a>bulk_save_objects<br /><div class="outline-text-6" id="text-org06f9722">
<p>
performance benefits:
</p>
<ul class="org-ul">
<li>Relationship settings and actions are not respected or triggered.</li>
<li>The objects are not connected to the session.</li>
<li>Fetching primary keys is not done by default.</li>
<li>No events will be triggered.</li>
</ul>
</div></li></ul>
</div>
<div id="outline-container-org8bc0796" class="outline-5">
<h5 id="org8bc0796">Query</h5>
<div class="outline-text-5" id="text-org8bc0796">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">cookies</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">all</span><span style="color: #3a81c3;">()</span>
</pre>
</div>
<p>
fetch method: all, first, one, scalar
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">for</span> cookie <span style="color: #3a81c3; font-weight: bold;">in</span> session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>:
    <span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>cookie<span style="color: #3a81c3;">)</span>
</pre>
</div>
<p>
The iterable version is more memory efficient.
</p>
</div>
<ul class="org-ul"><li><a id="org6798bdf"></a>Choose columns<br /><div class="outline-text-6" id="text-org6798bdf">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>session.query<span style="color: #6c3163;">(</span>Cookie.cookie_name, Cookie.quantity<span style="color: #6c3163;">)</span>.first<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div></li>
<li><a id="org6f1f98f"></a>Ordering<br /><div class="outline-text-6" id="text-org6f1f98f">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">for</span> cookie <span style="color: #3a81c3; font-weight: bold;">in</span> session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.order_by<span style="color: #3a81c3;">(</span>desc<span style="color: #6c3163;">(</span>Cookie.quantity<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>:
    <span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span><span style="color: #2d9574;">'{:3} - {}'</span>.<span style="color: #3a81c3;">format</span><span style="color: #6c3163;">(</span>cookie.quantity, cookie.cookie_name<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div></li>
<li><a id="org8ff13d6"></a>Limiting<br /><div class="outline-text-6" id="text-org8ff13d6">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.order_by<span style="color: #3a81c3;">(</span>
    Cookie.quantity<span style="color: #3a81c3;">)[</span>:<span style="color: #4e3163;">2</span><span style="color: #3a81c3;">]</span>  <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">slices the return list. ineffecient.</span>
<span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.order_by<span style="color: #3a81c3;">(</span>Cookie.quantity<span style="color: #3a81c3;">)</span>.limit<span style="color: #3a81c3;">(</span><span style="color: #4e3163;">2</span><span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span><span style="color: #6c3163;">[</span>result.cookie_name <span style="color: #3a81c3; font-weight: bold;">for</span> result <span style="color: #3a81c3; font-weight: bold;">in</span> query<span style="color: #6c3163;">]</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
<p>
This runs the query and slices the returned list. This can
be very ineffecient with a large result set.
</p>
</div></li>
<li><a id="orge85c4a1"></a>Built-in functions<br /><div class="outline-text-6" id="text-orge85c4a1">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> func
<span style="color: #715ab1;">inv_count</span> = session.query<span style="color: #3a81c3;">(</span>func.<span style="color: #3a81c3;">sum</span><span style="color: #6c3163;">(</span>Cookie.quantity<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>.scalar<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">rec_count</span> = session.query<span style="color: #3a81c3;">(</span>
    func.count<span style="color: #6c3163;">(</span>Cookie.cookie_name<span style="color: #6c3163;">)</span>.label<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'inventory_count'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>.first<span style="color: #3a81c3;">()</span>  <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">rename</span>
</pre>
</div>
</div></li>
<li><a id="org3e4fd35"></a>Filtering<br /><div class="outline-text-6" id="text-org3e4fd35">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">record</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>
    Cookie.cookie_name == <span style="color: #2d9574;">'chocolate chip'</span><span style="color: #3a81c3;">)</span>.first<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">record</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.filter_by<span style="color: #3a81c3;">(</span>cookie_name=<span style="color: #2d9574;">'chocolate chip'</span><span style="color: #3a81c3;">)</span>.first<span style="color: #3a81c3;">()</span>
<span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>Cookie.cookie_name.like<span style="color: #6c3163;">(</span><span style="color: #2d9574;">'%chocolate%'</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div></li>
<li><a id="org2b45060"></a>Conjunctions<br /><div class="outline-text-6" id="text-org2b45060">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>
    Cookie.quantity &gt; <span style="color: #4e3163;">23</span>, Cookie.unit_cost &lt; <span style="color: #4e3163;">0</span>.<span style="color: #4e3163;">40</span><span style="color: #3a81c3;">)</span>  <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">default and conjunctions</span>
<span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy <span style="color: #3a81c3; font-weight: bold;">import</span> and_, or_, not_
<span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>
    or_<span style="color: #6c3163;">(</span>Cookie.quantity.between<span style="color: #2d9574;">(</span><span style="color: #4e3163;">10</span>, <span style="color: #4e3163;">50</span><span style="color: #2d9574;">)</span>, Cookie.cookie_name.contains<span style="color: #2d9574;">(</span><span style="color: #2d9574;">'chip'</span><span style="color: #2d9574;">)</span><span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
</pre>
</div>
</div></li></ul>
</div>
<div id="outline-container-orga0ae2c7" class="outline-5">
<h5 id="orga0ae2c7">Update</h5>
<div class="outline-text-5" id="text-orga0ae2c7">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">cc_cookie</span> = query.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>Cookie.cookie_name == <span style="color: #2d9574;">"chocolate chip"</span><span style="color: #3a81c3;">)</span>.first<span style="color: #3a81c3;">()</span>

<span style="color: #715ab1;">cc_cookie.quantity</span> = cc_cookie.quantity + <span style="color: #4e3163;">120</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">or</span>
query.update<span style="color: #3a81c3;">(</span><span style="color: #6c3163;">{</span>Cookie.quantity: Cookie.quantity - <span style="color: #4e3163;">20</span><span style="color: #6c3163;">}</span><span style="color: #3a81c3;">)</span>

session.commit<span style="color: #3a81c3;">()</span>
<span style="color: #3a81c3; font-weight: bold;">print</span><span style="color: #3a81c3;">(</span>cc_cookie.quantity<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge6f4319" class="outline-5">
<h5 id="orge6f4319">Delete</h5>
<div class="outline-text-5" id="text-orge6f4319">
</div><ul class="org-ul"><li><a id="org6af716c"></a>session.delete<br /><div class="outline-text-6" id="text-org6af716c">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">query</span> = query.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>Cookie.cookie_name == <span style="color: #2d9574;">"dark chocolate chip"</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">dcc_cookie</span> = query.one<span style="color: #3a81c3;">()</span>
session.delete<span style="color: #3a81c3;">(</span>dcc_cookie<span style="color: #3a81c3;">)</span>
session.commit<span style="color: #3a81c3;">()</span>
</pre>
</div>
</div></li>
<li><a id="org6e7e56b"></a>query.delete<br /><div class="outline-text-6" id="text-org6e7e56b">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">query</span> = query.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>Cookie.cookie_name == <span style="color: #2d9574;">"molasses"</span><span style="color: #3a81c3;">)</span>
query.delete<span style="color: #3a81c3;">()</span>
</pre>
</div>
</div></li></ul>
</div>
<div id="outline-container-org00dbb36" class="outline-5">
<h5 id="org00dbb36">Join</h5>
<div class="outline-text-5" id="text-org00dbb36">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>Order.order_id, User.username, User.phone,
Cookie.cookie_name, LineItem.quantity,
LineItem.extended_cost<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">query</span> = query.join<span style="color: #3a81c3;">(</span>User<span style="color: #3a81c3;">)</span>.join<span style="color: #3a81c3;">(</span>LineItem<span style="color: #3a81c3;">)</span>.join<span style="color: #3a81c3;">(</span>Cookie<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">results</span> = query.<span style="color: #3a81c3;">filter</span><span style="color: #3a81c3;">(</span>User.username == <span style="color: #2d9574;">'cookiemon'</span><span style="color: #3a81c3;">)</span>.<span style="color: #3a81c3;">all</span><span style="color: #3a81c3;">()</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8b0dfc7" class="outline-5">
<h5 id="org8b0dfc7">GroupBy</h5>
<div class="outline-text-5" id="text-org8b0dfc7">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #715ab1;">query</span> = session.query<span style="color: #3a81c3;">(</span>User.username, func.count<span style="color: #6c3163;">(</span>Order.order_id<span style="color: #6c3163;">)</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">query</span> = query.outerjoin<span style="color: #3a81c3;">(</span>Order<span style="color: #3a81c3;">)</span>.group_by<span style="color: #3a81c3;">(</span>User.username<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga333995" class="outline-4">
<h4 id="orga333995"><span class="section-number-4">8.2.3</span> Exceptions</h4>
<div class="outline-text-4" id="text-8-2-3">
</div><div id="outline-container-org67ff525" class="outline-5">
<h5 id="org67ff525">MultipleResultsFound</h5>
<div class="outline-text-5" id="text-org67ff525">
<p>
This exception occurs when we use the .one() query method, but get more than one result back.
</p>
</div>
</div>
<div id="outline-container-org129ecbf" class="outline-5">
<h5 id="org129ecbf">DetachedInstanceError</h5>
<div class="outline-text-5" id="text-org129ecbf">
<p>
This exception occurs when we attempt to access an attribute on an instance that
needs to be loaded from the database, but the instance we are using is not currently
attached to the database.
</p>
</div>
</div>
</div>
<div id="outline-container-org72ed357" class="outline-4">
<h4 id="org72ed357"><span class="section-number-4">8.2.4</span> Reflection</h4>
<div class="outline-text-4" id="text-8-2-4">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sqlalchemy.ext.automap <span style="color: #3a81c3; font-weight: bold;">import</span> automap_base
<span style="color: #715ab1;">Base</span> = automap_base<span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">use automap_base instead of declarative_base</span>
Base.prepare<span style="color: #3a81c3;">(</span>engine, reflect=<span style="color: #4e3163;">True</span><span style="color: #3a81c3;">)</span>

Base.classes.keys<span style="color: #3a81c3;">()</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">show ORM classes</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org357e21f" class="outline-3">
<h3 id="org357e21f"><span class="section-number-3">8.3</span> Debug Tools</h3>
<div class="outline-text-3" id="text-8-3">
</div><div id="outline-container-orge18895e" class="outline-4">
<h4 id="orge18895e"><span class="section-number-4">8.3.1</span> create_engine(&#x2026;, echo=True)</h4>
</div>
<div id="outline-container-org6d2af40" class="outline-4">
<h4 id="org6d2af40"><span class="section-number-4">8.3.2</span> from sqlalchemy import inspect</h4>
<div class="outline-text-4" id="text-8-3-2">
<p>
Four state for objects
</p>
<ol class="org-ol">
<li>Transient: The instance is not in session, and is not in the database.</li>
<li>Pending: The instance has been added to the session with add() , but hasn’t been flushed or committed.</li>
<li>Persistent: The object in session has a corresponding record in the database.</li>
<li>Detached: The instance is no longer connected to the session, but has a record in the database.</li>
</ol>
</div>
<div id="outline-container-org6c60926" class="outline-5">
<h5 id="org6c60926">expunge()</h5>
<div class="outline-text-5" id="text-org6c60926">
<p>
Use <i>expunge()</i> when you are moving data from one session to another
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb58082d" class="outline-3">
<h3 id="orgb58082d"><span class="section-number-3">8.4</span> <span class="todo TODO">TODO</span> Alembic</h3>
</div>
</div>
</div>
</body>
</html>

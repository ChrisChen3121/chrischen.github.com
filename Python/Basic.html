<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Python参考手册</title>
<!-- 2016-05-01 Sun 12:03 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="ChrisChen" />
<meta  name="keywords" content="python" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "left",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Python参考手册</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 入门知识</a>
<ul>
<li><a href="#sec-1-1">1.1. 关于整除</a></li>
<li><a href="#sec-1-2">1.2. 幂运算注意</a></li>
<li><a href="#sec-1-3">1.3. 常用运算函数</a></li>
<li><a href="#sec-1-4">1.4. 导入模块</a></li>
<li><a href="#sec-1-5">1.5. 垃圾回收机制</a></li>
</ul>
</li>
<li><a href="#sec-2">2. 数据结构</a>
<ul>
<li><a href="#sec-2-1">2.1. 序列</a></li>
<li><a href="#sec-2-2">2.2. 列表</a></li>
<li><a href="#sec-2-3">2.3. 元组</a></li>
<li><a href="#sec-2-4">2.4. 字符串</a></li>
<li><a href="#sec-2-5">2.5. 字典</a></li>
<li><a href="#sec-2-6">2.6. 其他</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 语句</a>
<ul>
<li><a href="#sec-3-1">3.1. 赋值语句</a></li>
<li><a href="#sec-3-2">3.2. if语句</a></li>
<li><a href="#sec-3-3">3.3. 断言语句</a></li>
<li><a href="#sec-3-4">3.4. while语句</a></li>
<li><a href="#sec-3-5">3.5. for语句</a></li>
<li><a href="#sec-3-6">3.6. 拓展</a></li>
</ul>
</li>
<li><a href="#sec-4">4. 函数</a>
<ul>
<li><a href="#sec-4-1">4.1. 定义函数</a></li>
<li><a href="#sec-4-2">4.2. 参数</a></li>
<li><a href="#sec-4-3">4.3. 查看函数说明</a></li>
<li><a href="#sec-4-4">4.4. 空返回值</a></li>
<li><a href="#sec-4-5">4.5. 闭包</a></li>
<li><a href="#sec-4-6">4.6. 函数柯里化</a></li>
<li><a href="#sec-4-7">4.7. 拓展</a></li>
</ul>
</li>
<li><a href="#sec-5">5. 类</a>
<ul>
<li><a href="#sec-5-1">5.1. 定义类</a></li>
<li><a href="#sec-5-2">5.2. 类成员变量(非实例成员)</a></li>
<li><a href="#sec-5-3">5.3. 类静态方法和类方法</a></li>
<li><a href="#sec-5-4">5.4. 属性</a></li>
<li><a href="#sec-5-5">5.5. 继承</a></li>
<li><a href="#sec-5-6">5.6. 多重继承</a></li>
<li><a href="#sec-5-7">5.7. 接口和内省</a></li>
<li><a href="#sec-5-8">5.8. 类的特殊特性总结</a></li>
</ul>
</li>
<li><a href="#sec-6">6. 异常</a>
<ul>
<li><a href="#sec-6-1">6.1. 抛出异常</a></li>
<li><a href="#sec-6-2">6.2. 内建异常类</a></li>
<li><a href="#sec-6-3">6.3. 自定义异常类</a></li>
<li><a href="#sec-6-4">6.4. 捕捉异常</a></li>
<li><a href="#sec-6-5">6.5. 常用异常类列表</a></li>
<li><a href="#sec-6-6">6.6. DB相关异常列表</a></li>
</ul>
</li>
<li><a href="#sec-7">7. 高级特性和隐藏特性</a>
<ul>
<li><a href="#sec-7-1">7.1. <span class="underline"><span class="underline">init__、__del</span></span></a></li>
<li><a href="#sec-7-2">7.2. 集合相关__len__、__getitem__等</a></li>
<li><a href="#sec-7-3">7.3. 迭代器__iter__</a></li>
<li><a href="#sec-7-4">7.4. 生成器yield语句</a></li>
</ul>
</li>
<li><a href="#sec-8">8. 模块</a>
<ul>
<li><a href="#sec-8-1">8.1. 导入自定义模块</a></li>
<li><a href="#sec-8-2">8.2. 仅导入定义，不运行模块内程序</a></li>
<li><a href="#sec-8-3">8.3. 包</a></li>
<li><a href="#sec-8-4">8.4. 查看模块说明</a></li>
<li><a href="#sec-8-5">8.5. 核心模块</a></li>
<li><a href="#sec-8-6">8.6. 其他常用模块</a></li>
<li><a href="#sec-8-7">8.7. 集成其他语言模块</a></li>
<li><a href="#sec-8-8">8.8. 可在PyPI上寻找python的最新的拓展包</a></li>
</ul>
</li>
<li><a href="#sec-9">9. 文件</a>
<ul>
<li><a href="#sec-9-1">9.1. Open</a></li>
<li><a href="#sec-9-2">9.2. 文件对象的基本方法</a></li>
<li><a href="#sec-9-3">9.3. 迭代处理读取内容</a></li>
</ul>
</li>
<li><a href="#sec-10">10. 多线程</a></li>
<li><a href="#sec-11">11. GUI</a>
<ul>
<li><a href="#sec-11-1">11.1. GUI库比较</a></li>
<li><a href="#sec-11-2">11.2. wxPython</a></li>
<li><a href="#sec-11-3">11.3. Qt</a></li>
</ul>
</li>
<li><a href="#sec-12">12. 数据库</a>
<ul>
<li><a href="#sec-12-1">12.1. 连接</a></li>
<li><a href="#sec-12-2">12.2. 查询</a></li>
<li><a href="#sec-12-3">12.3. 数据类型</a></li>
<li><a href="#sec-12-4">12.4. 示例</a></li>
</ul>
</li>
<li><a href="#sec-13">13. 网络</a>
<ul>
<li><a href="#sec-13-1">13.1. socket</a></li>
<li><a href="#sec-13-2">13.2. urllib, urllib2</a></li>
<li><a href="#sec-13-3">13.3. webservice</a></li>
<li><a href="#sec-13-4">13.4. 其他网络模块</a></li>
</ul>
</li>
<li><a href="#sec-14">14. 测试</a>
<ul>
<li><a href="#sec-14-1">14.1. 调试</a></li>
<li><a href="#sec-14-2">14.2. doctest</a></li>
<li><a href="#sec-14-3">14.3. unittest</a></li>
<li><a href="#sec-14-4">14.4. 代码检查</a></li>
<li><a href="#sec-14-5">14.5. 性能测试</a></li>
<li><a href="#sec-14-6">14.6. 其他可选工具</a></li>
</ul>
</li>
<li><a href="#sec-15">15. 发布程序</a>
<ul>
<li><a href="#sec-15-1">15.1. 制作安装脚本</a></li>
<li><a href="#sec-15-2">15.2. 制作安装包</a></li>
<li><a href="#sec-15-3">15.3. py2exe</a></li>
</ul>
</li>
<li><a href="#sec-16">16. 实用的内建函数</a>
<ul>
<li><a href="#sec-16-1">16.1. pass</a></li>
<li><a href="#sec-16-2">16.2. del</a></li>
<li><a href="#sec-16-3">16.3. exec和eval</a></li>
</ul>
</li>
<li><a href="#sec-17">17. ipython magicfunc</a>
<ul>
<li><a href="#sec-17-1">17.1. 常用</a></li>
<li><a href="#sec-17-2">17.2. log</a></li>
<li><a href="#sec-17-3">17.3. system-related</a></li>
<li><a href="#sec-17-4">17.4. debuger</a></li>
<li><a href="#sec-17-5">17.5. %lprun</a></li>
</ul>
</li>
<li><a href="#sec-18">18. 一些提示</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 入门知识</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 关于整除</h3>
<div class="outline-text-3" id="text-1-1">
<p>
3.0以后 "//"为整数除法运算符
</p>
<div class="org-src-container">

<pre class="src src-python">eg:
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">3.0&#20197;&#21069;&#30340;&#24773;&#20917;</span>
1.0/<span style="color: #DFAF8F;">2.0</span> = 0.5    1//<span style="color: #DFAF8F;">2</span> = 0   1/<span style="color: #DFAF8F;">2</span> =0
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">3.0&#20197;&#21518;</span>
1/<span style="color: #DFAF8F;">2</span> = 0.5    1//<span style="color: #DFAF8F;">2</span> = 0
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 幂运算注意</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">

<pre class="src src-python">(-3) ** 2
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;9</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> 常用运算函数</h3>
<div class="outline-text-3" id="text-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">函数名</th>
<th scope="col" class="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">pow</td>
<td class="left">幂运算</td>
</tr>

<tr>
<td class="left">abs</td>
<td class="left">取绝对值</td>
</tr>

<tr>
<td class="left">round</td>
<td class="left">浮点数四舍五入取整</td>
</tr>

<tr>
<td class="left">sqrt</td>
<td class="left">求根运算</td>
</tr>

<tr>
<td class="left"><b>str</b></td>
<td class="left">将值转换成格式合理的字符串</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> 导入模块</h3>
<div class="outline-text-3" id="text-1-4">
</div><ol class="org-ol"><li><a id="sec-1-4-1" name="sec-1-4-1"></a>import 模块名 as 别名<br  /><div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> math
math.floor(32.9)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;32.0</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-1-4-2" name="sec-1-4-2"></a>from 模块名 import 函数名 as 函数别名<br  /><div class="outline-text-4" id="text-1-4-2">
<p>
调用时可省略模块名
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> math <span style="color: #F0DFAF; font-weight: bold;">import</span> sqrt
sqrt(9)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 3.0</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> 垃圾回收机制</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>=1<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">1&#25152;&#22312;&#20869;&#23384;&#22359;&#24341;&#29992;&#35745;&#25968;&#21319;&#20026;1</span>
<span style="color: #DFAF8F;">y</span>=x<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24341;&#29992;&#35745;&#25968;&#21319;&#20026;2</span>
<span style="color: #DFAF8F;">x</span>=<span style="color: #BFEBBF;">None</span><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24341;&#29992;&#35745;&#25968;&#38477;&#20026;1</span>
y
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">y =&gt; 1</span>
<span style="color: #DFAF8F;">y</span>=<span style="color: #BFEBBF;">None</span><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24341;&#29992;&#35745;&#25968;&#38477;&#20026;0</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24341;&#29992;&#35745;&#25968;&#20026;0&#30340;&#20869;&#23384;&#22359;&#65292;python&#22403;&#22334;&#22238;&#25910;&#22120;&#20250;&#21435;&#22788;&#29702;&#23427;</span>
</pre>
</div>
<p class="verse">
也可以显式的del y，将彻底删除y引用，x的值不受影响。<br  />
y=None实际上是指向空，但是y引用仍然存在。<br  />
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 数据结构</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 序列</h3>
<div class="outline-text-3" id="text-2-1">
</div><ol class="org-ol"><li><a id="sec-2-1-1" name="sec-2-1-1"></a>序列包括列表、字符串 、元组<br  /></li>
<li><a id="sec-2-1-2" name="sec-2-1-2"></a>基本操作<br  /><div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">numbers</span> = [1,2,3,4,5,6,7,8,9,10] <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#22768;&#26126;</span>

numbers[3:6] <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">Slice &#20998;&#29255;&#25805;&#20316;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [4,5,6] &#31532;&#20108;&#20010;&#32034;&#24341;&#21495;&#30340;&#20803;&#32032;&#19981;&#21253;&#21547;</span>

numbers[-3:]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [8,9,10]</span>

numbers[0:10:2]
 <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,3,5,7,9]</span>

numbers[10:0:-2]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [10,8,6,4,2]</span>

[1,2,3] + [4,5,6]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,2,3,4,5,6]</span>

[42] *6
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [42,42,42,42,42,42]</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-1-3" name="sec-2-1-3"></a>in运算符<br  /><div class="outline-text-4" id="text-2-1-3">
<div class="org-src-container">

<pre class="src src-python">5 <span style="color: #F0DFAF; font-weight: bold;">in</span> numbers
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; True or False</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-1-4" name="sec-2-1-4"></a>长度、最大值、最小值(len, max, min)<br  /><div class="outline-text-4" id="text-2-1-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">len</span>(numbers)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 10</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 列表</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">helloList</span> = <span style="color: #DCDCCC; font-weight: bold;">list</span>(<span style="color: #CC9393;">'Hello'</span>)  <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23383;&#31526;&#20018;&#36716;&#25442;&#25104;&#23383;&#31526;&#21015;&#34920;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;['H','e','l','l','o']</span>
<span style="color: #CC9393;">''</span>.join(helloList)  <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23558;&#23383;&#31526;&#21015;&#34920;&#36716;&#25442;&#25104;&#23383;&#31526;&#20018;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'Hello'</span>
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-2-2-1" name="sec-2-2-1"></a>列表可以修改<br  /><div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">delete element</span>
<span style="color: #DFAF8F;">numbers</span>[5] = 64
<span style="color: #F0DFAF; font-weight: bold;">del</span> numbers[5]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#20998;&#29255;&#25554;&#20837;&#20803;&#32032;</span>
<span style="color: #DFAF8F;">numbers</span>[5:5] = [6,6]

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#20998;&#29255;&#21024;&#38500;&#20803;&#32032;</span>
<span style="color: #DFAF8F;">numbers</span>[2:8] = []
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">name</span> = <span style="color: #DCDCCC; font-weight: bold;">list</span>(<span style="color: #CC9393;">'perl'</span>)
<span style="color: #DFAF8F;">name</span>[2:] = <span style="color: #DCDCCC; font-weight: bold;">list</span>(<span style="color: #CC9393;">'ar'</span>)
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">name =&gt; ['p', 'e', 'a', 'r']</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2" name="sec-2-2-2"></a>列表方法<br  /><ul class="org-ul"><li><a id="sec-2-2-2-1" name="sec-2-2-2-1"></a>append<br  /><div class="outline-text-5" id="text-2-2-2-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">lst</span>= [1,2,3]
lst.append(4)
lst
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,2,3,4]</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2-2" name="sec-2-2-2-2"></a>count<br  /><div class="outline-text-5" id="text-2-2-2-2">
<p>
某个元素出现的次数
</p>
<div class="org-src-container">

<pre class="src src-python">[1,5,6,7,53,1,5].count(1)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 2</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2-3" name="sec-2-2-2-3"></a>extend<br  /><div class="outline-text-5" id="text-2-2-2-3">
<p>
比lst1=lst1+lst2效率高
</p>
<div class="org-src-container">

<pre class="src src-python">lst1.extend(lst2)
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2-4" name="sec-2-2-2-4"></a>index<br  /><div class="outline-text-5" id="text-2-2-2-4">
<div class="org-src-container">

<pre class="src src-python">[<span style="color: #CC9393;">'who'</span>,<span style="color: #CC9393;">'where'</span>].index(<span style="color: #CC9393;">'who'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 0</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2-5" name="sec-2-2-2-5"></a>insert<br  /><div class="outline-text-5" id="text-2-2-2-5">
<div class="org-src-container">

<pre class="src src-python">[1,2,3,4,5].insert(2, <span style="color: #CC9393;">'e'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,2,'e',3,4,5]</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2-6" name="sec-2-2-2-6"></a>pop<br  /><div class="outline-text-5" id="text-2-2-2-6">
<p>
移除列表中的一个元素(默认最后一个)，并返回该元素的值
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>=[1,2,3]
x.pop()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 3</span>
x
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,2]</span>
</pre>
</div>
<p>
注：使用pop可以实现数据结构——栈
</p>
</div>
</li>
<li><a id="sec-2-2-2-7" name="sec-2-2-2-7"></a>remove<br  /><div class="outline-text-5" id="text-2-2-2-7">
<p>
移除第一个匹配项
</p>
<div class="org-src-container">

<pre class="src src-python">[1,2,3,4,5,6,7,8].remove(5)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,2,3,4,6,7,8]</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-2-2-8" name="sec-2-2-2-8"></a>reverse<br  /></li>
<li><a id="sec-2-2-2-9" name="sec-2-2-2-9"></a>sort<br  /><div class="outline-text-5" id="text-2-2-2-9">
<div class="org-src-container">

<pre class="src src-python">x.sort()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">x&#39034;&#24207;&#24050;&#25913;&#21464;</span>
<span style="color: #DFAF8F;">y</span> = <span style="color: #DCDCCC; font-weight: bold;">sorted</span>(x)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">y&#20026;x&#25490;&#24207;&#21518;&#30340;&#21015;&#34920;</span>
</pre>
</div>

<p class="verse">
sort 可选参数(也适用于sorted)：<br  />
一、比较函数（见下一节）<br  />
二、key<br  />
x.sort(key=len)<br  />
三、reverse<br  />
x.sort(reverse=True)<br  />
</p>
</div>
</li>
<li><a id="sec-2-2-2-10" name="sec-2-2-2-10"></a>自定义排序(比较函数)<br  /><div class="outline-text-5" id="text-2-2-2-10">
<p class="verse">
自定义compare(x, y)<br  />
x&lt;y时返回负数，x&gt;y时返回正数，x=y时返回0<br  />
内建cmp函数例子：<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">cmp</span>(42, 32)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 1</span>
<span style="color: #DCDCCC; font-weight: bold;">cmp</span>(99, 100)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; -1</span>
<span style="color: #DCDCCC; font-weight: bold;">cmp</span>(5,5)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 0</span>
numbers.sort(<span style="color: #DCDCCC; font-weight: bold;">cmp</span>)
</pre>
</div>
</div>
</li></ul>
</li>
<li><a id="sec-2-2-3" name="sec-2-2-3"></a>空列表 []<br  /></li>
<li><a id="sec-2-2-4" name="sec-2-2-4"></a>空元素列表 [None]<br  /></li></ol>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 元组</h3>
<div class="outline-text-3" id="text-2-3">
<p>
元组不能被修改
</p>
</div>
<ol class="org-ol"><li><a id="sec-2-3-1" name="sec-2-3-1"></a>声明<br  /><div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">

<pre class="src src-python">1,2,3 <span style="color: #F0DFAF; font-weight: bold;">or</span> (1,2,3)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; (1,2,3)</span>
() <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#31354;&#20803;&#32452;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; ()</span>
(1,) <span style="color: #F0DFAF; font-weight: bold;">or</span> 1,
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; (1,)</span>
3*(40+2,)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;(42,42,42)</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-3-2" name="sec-2-3-2"></a>tuple函数<br  /><div class="outline-text-4" id="text-2-3-2">
<p>
传入序列，返回元组
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">tuple</span>([1,2,3])
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; (1,2,3)</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-3-3" name="sec-2-3-3"></a>使用元组的场合<br  /><div class="outline-text-4" id="text-2-3-3">
<ul class="org-ul">
<li>元组可以在映射中当作键使用，列表不行(详见第四章)
</li>
<li>元组是很多内建方法的返回值。必须处理他们。
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> 字符串</h3>
<div class="outline-text-3" id="text-2-4">
</div><ol class="org-ol"><li><a id="sec-2-4-1" name="sec-2-4-1"></a>基本操作<br  /><div class="outline-text-4" id="text-2-4-1">
<p>
所有标准的序列操作对字符串同样适用，唯一需要记住，字符串是不可变的。
</p>
</div>
</li>
<li><a id="sec-2-4-2" name="sec-2-4-2"></a>格式化操作符<br  /><div class="outline-text-4" id="text-2-4-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">format</span> = <span style="color: #CC9393;">"Hello, %s. %s enough for ya?"</span>
<span style="color: #DFAF8F;">values</span> = (<span style="color: #CC9393;">'world'</span>, <span style="color: #CC9393;">'Hot'</span>)
<span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #DCDCCC; font-weight: bold;">format</span> % values
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Hello, world. Hot enough for ya?</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-4-3" name="sec-2-4-3"></a>常用方法<br  /><ul class="org-ul"><li><a id="sec-2-4-3-1" name="sec-2-4-3-1"></a>list, tuple<br  /><div class="outline-text-5" id="text-2-4-3-1">
<p>
list将字符串转为列表，tuple转为元组
</p>
</div>
</li>
<li><a id="sec-2-4-3-2" name="sec-2-4-3-2"></a>find<br  /><div class="outline-text-5" id="text-2-4-3-2">
<div class="org-src-container">

<pre class="src src-python">x.find(<span style="color: #CC9393;">"abc"</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&#36820;&#22238;index</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-2-4-3-3" name="sec-2-4-3-3"></a>join<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup><br  /><div class="outline-text-5" id="text-2-4-3-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">seq</span> = [<span style="color: #CC9393;">'1'</span>,<span style="color: #CC9393;">'2'</span>,<span style="color: #CC9393;">'3'</span>]
<span style="color: #DFAF8F;">sep</span> = <span style="color: #CC9393;">'+'</span>
sep.join(seq)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; '1+2+3'</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-2-4-3-4" name="sec-2-4-3-4"></a>lower,upper,title<br  /><div class="outline-text-5" id="text-2-4-3-4">
<p>
title功能： 单词首字母大写
</p>
</div>
</li>

<li><a id="sec-2-4-3-5" name="sec-2-4-3-5"></a>replace<br  /><div class="outline-text-5" id="text-2-4-3-5">
<div class="org-src-container">

<pre class="src src-python">x.replace(<span style="color: #CC9393;">'123'</span>, <span style="color: #CC9393;">'456'</span>)
</pre>
</div>
</div>
</li>

<li><a id="sec-2-4-3-6" name="sec-2-4-3-6"></a>split是join的逆方法<br  /><div class="outline-text-5" id="text-2-4-3-6">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #CC9393;">'/usr/bin/env'</span>.split(<span style="color: #CC9393;">'/'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;['','usr','bin','env']</span>
</pre>
</div>
<p>
split不提供参数时，默认根据空白字符分割，包括tab、换行符等。
</p>
</div>
</li>

<li><a id="sec-2-4-3-7" name="sec-2-4-3-7"></a>strip<br  /><div class="outline-text-5" id="text-2-4-3-7">
<p>
去除两侧空格，也可传参数，去除指定的头尾字符
</p>
</div>
</li>

<li><a id="sec-2-4-3-8" name="sec-2-4-3-8"></a>translate<br  /><div class="outline-text-5" id="text-2-4-3-8">
<p class="verse">
同replace 区别在于只处理单个字符。同时进行多个替换。<br  />
有时比replace效率高的多。<br  />
转换之前，需要完成一张转换表。可用string中的maketrans<br  />
</p>
<div class="org-src-container">

<pre class="src src-python">maketrans(<span style="color: #CC9393;">'cs'</span>, <span style="color: #CC9393;">'kz'</span>)
</pre>
</div>
</div>
</li></ul>
</li>

<li><a id="sec-2-4-4" name="sec-2-4-4"></a>原始字符串(raw string)<br  /><div class="outline-text-4" id="text-2-4-4">
<p class="verse">
使字符串中的转义符无效<br  />
r'c:\newtest.txt'<br  />
\n不会被解释为换行符<br  />
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 字典</h3>
<div class="outline-text-3" id="text-2-5">
<p>
当索引不好用时使用
</p>
</div>
<ol class="org-ol"><li><a id="sec-2-5-1" name="sec-2-5-1"></a>创建<br  /><div class="outline-text-4" id="text-2-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">phonebook</span>={<span style="color: #CC9393;">'Alice'</span>: <span style="color: #CC9393;">'2341'</span>, <span style="color: #CC9393;">'Beth'</span>: <span style="color: #CC9393;">'9102'</span>, <span style="color: #CC9393;">'Cecil'</span>: <span style="color: #CC9393;">'3258'</span>}<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#30452;&#25509;&#21019;&#24314;</span>
phonebook[<span style="color: #CC9393;">'Cecil'</span>]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; '3258'</span>

<span style="color: #DFAF8F;">phonebook</span>={}
<span style="color: #DFAF8F;">phonebook</span>[<span style="color: #CC9393;">'Denver'</span>] = <span style="color: #CC9393;">'5345'</span>
phonebook
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; { 'Denver': '5345' }</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-5-2" name="sec-2-5-2"></a>使用dict函数初始化<br  /><div class="outline-text-4" id="text-2-5-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">items</span> = [(<span style="color: #CC9393;">'name'</span>, <span style="color: #CC9393;">'Gumby'</span>), (<span style="color: #CC9393;">'age'</span>, 42)]
<span style="color: #DFAF8F;">d</span> = <span style="color: #DCDCCC; font-weight: bold;">dict</span>(items)
d
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; {'age': 42, 'name': 'Gumby'}</span>

<span style="color: #DFAF8F;">d</span>=<span style="color: #DCDCCC; font-weight: bold;">dict</span>(name=<span style="color: #CC9393;">'Gumby'</span>, age=42) <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21478;&#19968;&#31181;&#22768;&#26126;</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-5-3" name="sec-2-5-3"></a>基本字典操作<br  /><div class="outline-text-4" id="text-2-5-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">len</span>(d)
<span style="color: #F0DFAF; font-weight: bold;">del</span> d[k]
k <span style="color: #F0DFAF; font-weight: bold;">in</span> d<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">(&#26816;&#26597;&#26159;&#21542;&#23384;&#22312;k&#38190;)</span>
</pre>
</div>
<p>
自动添加，对不存在的键复制等于创建了一个新项
</p>
</div>
</li>

<li><a id="sec-2-5-4" name="sec-2-5-4"></a>字典的字符串格式化<br  /><div class="outline-text-4" id="text-2-5-4">
<p>
字符串 % 字典名
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #CC9393;">"Cecil's phone number is %(Cecil)s."</span> % phonebook
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;"Cecil's phone number is 3258."</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-5-5" name="sec-2-5-5"></a>字典方法<br  /><ul class="org-ul"><li><a id="sec-2-5-5-1" name="sec-2-5-5-1"></a>clear<br  /><div class="outline-text-5" id="text-2-5-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>={}
<span style="color: #DFAF8F;">y</span>=x
<span style="color: #DFAF8F;">x</span>[<span style="color: #CC9393;">'key'</span>] = <span style="color: #CC9393;">'value'</span>
y
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; {'key': 'value'}</span>
</pre>
</div>
<p class="verse">
一、x = {} =&gt;y没变<br  />
二、x.clear() =&gt; y {}<br  />
</p>
</div>
</li>

<li><a id="sec-2-5-5-2" name="sec-2-5-5-2"></a>copy &amp; deepcopy<br  /><div class="outline-text-5" id="text-2-5-5-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span> = {<span style="color: #CC9393;">'key1'</span>: <span style="color: #CC9393;">'value1'</span>, <span style="color: #CC9393;">'key2'</span>: <span style="color: #CC9393;">'value2'</span>}
<span style="color: #DFAF8F;">y</span> = x.copy()
</pre>
</div>
<p class="verse">
一、y.remove('key2')<br  />
y和x 均受影响<br  />
<br  />
二、y['key1'] = 'value3'<br  />
y受影响，x不受<br  />
<br  />
deepcopy避免了该问题，无论y怎么处理，x都不会变。<br  />
</p>
</div>
</li>

<li><a id="sec-2-5-5-3" name="sec-2-5-5-3"></a>fromkeys<br  /><div class="outline-text-5" id="text-2-5-5-3">
<p>
使用给定的键建立字典，值默认都为None
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">dict</span>.fromkeys([<span style="color: #CC9393;">'name'</span>, <span style="color: #CC9393;">'age'</span>])
</pre>
</div>
<p>
也可自己提供值的默认值
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">dict</span>.fromkeys([<span style="color: #CC9393;">'name'</span>, <span style="color: #CC9393;">'age'</span>], <span style="color: #CC9393;">'unknown'</span>)
</pre>
</div>
</div>
</li>

<li><a id="sec-2-5-5-4" name="sec-2-5-5-4"></a>get<br  /><div class="outline-text-5" id="text-2-5-5-4">
<p>
更宽松的访问字典项方法
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">d</span>={}
d[<span style="color: #CC9393;">'name'</span>]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; &#20986;&#38169;</span>
d.get(<span style="color: #CC9393;">'name'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; None</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-2-5-5-5" name="sec-2-5-5-5"></a>has_key<br  /><div class="outline-text-5" id="text-2-5-5-5">
<pre class="example">
has_key相当于 k in d。python3.0不包含该方法。
</pre>
</div>
</li>

<li><a id="sec-2-5-5-6" name="sec-2-5-5-6"></a>items &amp; iteritems<br  /><div class="outline-text-5" id="text-2-5-5-6">
<p>
字典项以列表形式返回
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">d</span> = {<span style="color: #CC9393;">'key1'</span>: <span style="color: #CC9393;">'value1'</span>, <span style="color: #CC9393;">'key2'</span>: <span style="color: #CC9393;">'value2'</span>}
d.items()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [('key1', 'value1'), ('key2', 'value2')]</span>
<span style="color: #DFAF8F;">it</span> = d.iteritems()
<span style="color: #DCDCCC; font-weight: bold;">list</span>(it)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [('key1', 'value1'), ('key2', 'value2')]</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-2-5-5-7" name="sec-2-5-5-7"></a>keys &amp; iterkeys<br  /><div class="outline-text-5" id="text-2-5-5-7">
<p>
键以列表形式返回
</p>
</div>
</li>

<li><a id="sec-2-5-5-8" name="sec-2-5-5-8"></a>values &amp; itervalues<br  /><div class="outline-text-5" id="text-2-5-5-8">
<p>
值以列表形式返回
</p>
</div>
</li>

<li><a id="sec-2-5-5-9" name="sec-2-5-5-9"></a>pop<br  /><div class="outline-text-5" id="text-2-5-5-9">
<p>
pop用来获得对应于给定键的值，然后删除该项。
</p>
<div class="org-src-container">

<pre class="src src-python">d.pop(<span style="color: #CC9393;">'key1'</span>)
</pre>
</div>
</div>
</li>

<li><a id="sec-2-5-5-10" name="sec-2-5-5-10"></a>popitem<br  /><div class="outline-text-5" id="text-2-5-5-10">
<p class="verse">
类似于list.pop<br  />
因为字典没有顺序的概念，pop出一个随机项。<br  />
用处：若想一个接一个地处理并移除项，用该方法。<br  />
</p>
</div>
</li>

<li><a id="sec-2-5-5-11" name="sec-2-5-5-11"></a>setdefault<br  /><div class="outline-text-5" id="text-2-5-5-11">
<div class="org-src-container">

<pre class="src src-python">d.setdefault(<span style="color: #CC9393;">'name'</span>, <span style="color: #CC9393;">'N/A'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23383;&#20856;&#20013;&#26080;&#35813;&#38190;&#36820;&#22238;&#22914;&#19979;&#65306;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 'N/A'</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23383;&#20856;&#20013;&#26377;{'name': 'Gumby'}</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 'Gumby'</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-2-5-5-12" name="sec-2-5-5-12"></a>update<br  /><div class="outline-text-5" id="text-2-5-5-12">
<p>
利用一个字典项更新另外一个字典
</p>
<div class="org-src-container">

<pre class="src src-python">d.update(x) <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#26356;&#26032;&#28304;d</span>
</pre>
</div>
</div>
</li></ul>
</li></ol>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> 其他</h3>
<div class="outline-text-3" id="text-2-6">
</div><ol class="org-ol"><li><a id="sec-2-6-1" name="sec-2-6-1"></a>set<br  /><div class="outline-text-4" id="text-2-6-1">
<p class="verse">
set位于sets模块中。python2.3以前需用import sets。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">set</span>([0,1,2,3,0,1,2,3,4,5])<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">set&#26159;&#30001;&#24207;&#21015;(&#25110;&#20854;&#20182;&#21487;&#36845;&#20195;&#23545;&#35937;)&#26500;&#24314;&#30340;&#12290;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([0,1,2,3,4,5])#&#30456;&#21516;&#30340;&#25104;&#21592;&#20250;&#34987;&#24573;&#30053;&#12290;</span>
<span style="color: #DCDCCC; font-weight: bold;">set</span>([<span style="color: #CC9393;">'fee'</span>, <span style="color: #CC9393;">'fie'</span>, <span style="color: #CC9393;">'foe'</span>])
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set(['foe', 'fee', 'fie'])#&#19982;&#23383;&#20856;&#19968;&#26679;&#65292;&#39034;&#24207;&#26159;&#26410;&#30693;&#30340;</span>
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="sec-2-6-1-1" name="sec-2-6-1-1"></a>集合操作<br  /><div class="outline-text-5" id="text-2-6-1-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">a</span> = <span style="color: #DCDCCC; font-weight: bold;">set</span>([1,2,3])
<span style="color: #DFAF8F;">b</span> = <span style="color: #DCDCCC; font-weight: bold;">set</span>([2,3,4])
a | b
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([1,2,3,4])</span>
<span style="color: #DFAF8F;">c</span> = a &amp; b
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([2,3])</span>
c.issubset(a)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;True</span>
c &gt;= a
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;False</span>
a.intersection(b)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([2,3])</span>
a.difference(b)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([1])</span>
a-b
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([1])</span>
a.symmetric_difference(b)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;set([1,4])</span>
a.copy() <span style="color: #F0DFAF; font-weight: bold;">is</span> a
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;False</span>
</pre>
</div>
</div>
</li></ul>
</li>
<li><a id="sec-2-6-2" name="sec-2-6-2"></a>heap<br  /><div class="outline-text-4" id="text-2-6-2">
<p class="verse">
优先序列的一种，以任意顺序追加元素。使用pop方法获取最小元素。<br  />
效率要比列表的min方法高。<br  />
堆算法：i位置处的元素总是比2*i以及2*i+1位置处的元素小。<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">heappush(heap, x)</td>
<td class="left">将x加入堆</td>
</tr>

<tr>
<td class="left">heappop(heap)</td>
<td class="left">将堆中最小元素返回</td>
</tr>

<tr>
<td class="left">heapify(list)</td>
<td class="left">将列表转为堆</td>
</tr>

<tr>
<td class="left">heapreplace(heap, x)</td>
<td class="left">pop出最小元素，加入x</td>
</tr>

<tr>
<td class="left">nlargest(n, iter)</td>
<td class="left">返回iter中第n大的元素</td>
</tr>

<tr>
<td class="left">nsmallest(n, iter)</td>
<td class="left">返回iter中第n小的元素</td>
</tr>
</tbody>
</table>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> heapq <span style="color: #F0DFAF; font-weight: bold;">import</span> *
<span style="color: #F0DFAF; font-weight: bold;">from</span> random <span style="color: #F0DFAF; font-weight: bold;">import</span> shuffle
<span style="color: #DFAF8F;">data</span>=<span style="color: #DCDCCC; font-weight: bold;">range</span>(10)
shuffle(data)
heapify(data)
heappush(data, 0.4)
heap
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[0, 0.4, 4, 5, 1, 8, 9, 6, 7, 3, 2]</span>
heappop(data)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;0</span>
</pre>
</div>
<p>
heapq中的nlargest和nsmallest 使用堆算法从可迭代对象中获取最大最小值
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">data</span>=<span style="color: #DCDCCC; font-weight: bold;">range</span>(10)
shuffle(data)
nlargest(1, data)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;9</span>
nsmallest(1,data)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;0</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-2-6-3" name="sec-2-6-3"></a>deque<br  /><div class="outline-text-4" id="text-2-6-3">
<p class="verse">
Double-ended queue双端队列<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> collections <span style="color: #F0DFAF; font-weight: bold;">import</span> deque
<span style="color: #DFAF8F;">q</span> = deque(<span style="color: #DCDCCC; font-weight: bold;">range</span>(5))
q.append(5)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#40664;&#35748;&#22312;&#38431;&#21015;&#21491;&#31471;&#36861;&#21152;</span>
q.appendleft(6)
q
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;deque([6,0,1,2,3,4,5])</span>
q.pop()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#40664;&#35748;&#20174;&#38431;&#20237;&#21491;&#31471;pop&#20986;&#20803;&#32032;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;5</span>
q.popleft()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;6</span>
q.rotate(3)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21491;&#31227;&#19977;&#20010;&#20803;&#32032;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;deque([2,3,4,0,1])</span>
q.rotate(-1)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24038;&#31227;&#19968;&#20010;&#20803;&#32032;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;deque([3,4,0,1,2])</span>
</pre>
</div>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 语句</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> 赋值语句</h3>
<div class="outline-text-3" id="text-3-1">
</div><ol class="org-ol"><li><a id="sec-3-1-1" name="sec-3-1-1"></a>多个变量赋值<br  /><div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>, <span style="color: #DFAF8F;">y</span>, <span style="color: #DFAF8F;">z</span> = 1, 2, 3
</pre>
</div>
</div>
</li>

<li><a id="sec-3-1-2" name="sec-3-1-2"></a>交换变量<br  /><div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>, <span style="color: #DFAF8F;">y</span> = y, x
</pre>
</div>
</div>
</li>
<li><a id="sec-3-1-3" name="sec-3-1-3"></a>序列解包(sequence unpacking)<br  /><div class="outline-text-4" id="text-3-1-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">values</span> = 1, 2, 3
values
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; (1, 2, 3)</span>
<span style="color: #DFAF8F;">x</span>, <span style="color: #DFAF8F;">y</span>, <span style="color: #DFAF8F;">z</span> = values
x
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 1</span>
</pre>
</div>

<p>
常用于函数方法返回元组时
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">key</span>, <span style="color: #DFAF8F;">value</span> = scoundrel.popitem()
</pre>
</div>

<p>
python 3.0 特殊解包
</p>
<div class="org-src-container">

<pre class="src src-python">a, b, rest* = [1, 2, 3, 4]
rest
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [3, 4]</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-3-1-4" name="sec-3-1-4"></a>链式赋值<br  /><div class="outline-text-4" id="text-3-1-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span> = <span style="color: #DFAF8F;">y</span> = somefunction()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#31561;&#21516;&#20110;</span>
<span style="color: #DFAF8F;">y</span> = somefunction()
<span style="color: #DFAF8F;">x</span> = y
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#19981;&#19968;&#23450;&#31561;&#20215;&#20110;</span>
<span style="color: #DFAF8F;">x</span> = somefunction()
<span style="color: #DFAF8F;">y</span> = somefunction()
</pre>
</div>
</div>
</li>

<li><a id="sec-3-1-5" name="sec-3-1-5"></a>增量赋值<br  /><div class="outline-text-4" id="text-3-1-5">
<p>
与其他语言差不多+=、*=等
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> if语句</h3>
<div class="outline-text-3" id="text-3-2">
<p class="verse">
如下会被视为False:<br  />
False None 0 "" () [] {}<br  />
其他非空值被视为True<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #BFEBBF;">True</span> == 1 <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; True</span>
<span style="color: #BFEBBF;">False</span> == 0 <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; True</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="sec-3-2-0-1" name="sec-3-2-0-1"></a>if 语句写法<br  /><div class="outline-text-5" id="text-3-2-0-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">if</span> true:
.....
<span style="color: #F0DFAF; font-weight: bold;">if</span> &#26465;&#20214;1 <span style="color: #F0DFAF; font-weight: bold;">and</span> &#26465;&#20214;2:
<span style="color: #F0DFAF; font-weight: bold;">and</span>, <span style="color: #F0DFAF; font-weight: bold;">or</span>, <span style="color: #F0DFAF; font-weight: bold;">not</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-3-2-0-2" name="sec-3-2-0-2"></a>更多比较运算符<br  /><div class="outline-text-5" id="text-3-2-0-2">
<div class="org-src-container">

<pre class="src src-python">x <span style="color: #F0DFAF; font-weight: bold;">is</span> y  <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">x&#12289;y&#26159;&#21516;&#19968;&#20010;&#23545;&#35937;</span>
x <span style="color: #F0DFAF; font-weight: bold;">is</span> <span style="color: #F0DFAF; font-weight: bold;">not</span> y
x <span style="color: #F0DFAF; font-weight: bold;">in</span> y
x <span style="color: #F0DFAF; font-weight: bold;">not</span> <span style="color: #F0DFAF; font-weight: bold;">in</span> y
</pre>
</div>

<p>
注：0 &lt; age &lt; 100 的形式也是可以的
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23383;&#31526;&#20018;&#21487;&#20197;&#26681;&#25454;&#23383;&#27597;&#39034;&#24207;&#36827;&#34892;&#27604;&#36739;</span>
<span style="color: #CC9393;">"a"</span>&lt;<span style="color: #CC9393;">"b"</span> =&gt; <span style="color: #BFEBBF;">True</span>
[1,2] &lt; [2,1] <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#27604;&#36739;&#31532;&#19968;&#20010;&#20540;</span>
[2, [1, 4]] &lt; [2, [1, 5]]
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> 断言语句</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">age</span> = -1
<span style="color: #F0DFAF; font-weight: bold;">assert</span> 0&lt;age&lt;100, <span style="color: #CC9393;">'message'</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;breakdown</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> while语句</h3>
<div class="outline-text-3" id="text-3-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>=1
<span style="color: #F0DFAF; font-weight: bold;">while</span> x&lt;=100:
    <span style="color: #F0DFAF; font-weight: bold;">print</span> x
    <span style="color: #DFAF8F;">x</span> += 1
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> for语句</h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">for</span> number <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(1, 100):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> number
</pre>
</div>
<p>
range包含下限1，不包含上限100<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup>
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24490;&#29615;&#36941;&#21382;&#23383;&#20856;</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> key <span style="color: #F0DFAF; font-weight: bold;">in</span> d:
    <span style="color: #F0DFAF; font-weight: bold;">print</span> key, d[key]
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> 拓展</h3>
<div class="outline-text-3" id="text-3-6">
</div><ol class="org-ol"><li><a id="sec-3-6-1" name="sec-3-6-1"></a>列表推导式(轻量级循环)<br  /><div class="outline-text-4" id="text-3-6-1">
<div class="org-src-container">

<pre class="src src-python">[x*x <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(10)]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [0, 1, 4, 9, 25, 36, 49, 64, 81]</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21487;&#21152;&#26465;&#20214;&#65306;</span>
[x*x <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(10) <span style="color: #F0DFAF; font-weight: bold;">if</span> x % 3 ==0]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[0, 9, 36, 81]</span>

[(x, y) <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(3) <span style="color: #F0DFAF; font-weight: bold;">for</span> y <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(3)]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#31561;&#21516;&#20110;</span>
<span style="color: #DFAF8F;">result</span> = []
<span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(3):
    <span style="color: #F0DFAF; font-weight: bold;">for</span> y <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(3):
result.append((x, y))
</pre>
</div>
</div>
</li>
<li><a id="sec-3-6-2" name="sec-3-6-2"></a>序列合并迭代(zip)<br  /><div class="outline-text-4" id="text-3-6-2">
<p>
合并两个序列为一个元组列表
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">names</span> = [<span style="color: #CC9393;">'name1'</span>, <span style="color: #CC9393;">'name2'</span>]
<span style="color: #DFAF8F;">ages</span> = [12, 45]
<span style="color: #DCDCCC; font-weight: bold;">zip</span>(names, ages)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [('name1', 12), ('name2', 45)]</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#35299;&#21253;&#20803;&#32452;&#65292;&#36941;&#21382;</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> name, age <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">zip</span>(names, ages):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> name, <span style="color: #CC9393;">'is'</span>, age, <span style="color: #CC9393;">'years old'</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-3-6-3" name="sec-3-6-3"></a>编号迭代(enumerate)<br  /><div class="outline-text-4" id="text-3-6-3">
<p>
enumerate函数可以在提供索引功能的序列中，迭代返回键值对。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">for</span> index, string <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">enumerate</span>(strings):
    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #CC9393;">'xxx'</span> <span style="color: #F0DFAF; font-weight: bold;">in</span> string:
<span style="color: #DFAF8F;">strings</span>[index] = <span style="color: #CC9393;">'[censored]'</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-3-6-4" name="sec-3-6-4"></a>翻转和排序迭代(reversed, sorted)<br  /><div class="outline-text-4" id="text-3-6-4">
<p class="verse">
reversed, sorted与序列方法reverse, sort差不多，区别在于reverse和sort改变原调用对象<br  />
sorted函数返回列表<br  />
reversed函数返回一个可迭代对象<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">list</span>(<span style="color: #DCDCCC; font-weight: bold;">reversed</span>(<span style="color: #CC9393;">'Hello,World!'</span>))
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'!dlroW,olleH'</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-3-6-5" name="sec-3-6-5"></a>for&#x2026;else语句<br  /><div class="outline-text-4" id="text-3-6-5">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">for</span> n <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(99, 81, -1):
    <span style="color: #DFAF8F;">root</span> = sqrt(n)
    <span style="color: #F0DFAF; font-weight: bold;">if</span> root == <span style="color: #DCDCCC; font-weight: bold;">int</span>(root):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> n
        <span style="color: #F0DFAF; font-weight: bold;">break</span>
<span style="color: #F0DFAF; font-weight: bold;">else</span>:
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"Didn't find it!"</span>
</pre>
</div>
<p>
break直接进入else语句块
</p>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 函数</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 定义函数</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">fibs</span>(num):
    <span style="color: #CC9393;">'generate fib sequence'</span>
    <span style="color: #DFAF8F;">result</span> = [0, 1]
    <span style="color: #F0DFAF; font-weight: bold;">for</span> i <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(num-2):
        result.append(result[-2] + result[-1])
    <span style="color: #F0DFAF; font-weight: bold;">return</span> result
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 参数</h3>
<div class="outline-text-3" id="text-4-2">
</div><ol class="org-ol"><li><a id="sec-4-2-1" name="sec-4-2-1"></a>基本<br  /><div class="outline-text-4" id="text-4-2-1">
<p class="verse">
函数内改变参数变量的值，不会改变外部传入变量的值。即值传递方式。<br  />
可变的数据结构，如列表。即引用传递方式。<br  />
</p>
</div>
</li>
<li><a id="sec-4-2-2" name="sec-4-2-2"></a>不可变的数据结构，改变传入值的方法<br  /><div class="outline-text-4" id="text-4-2-2">
<ul class="org-ul">
<li>使用返回值
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">inc</span>(x): <span style="color: #F0DFAF; font-weight: bold;">return</span> x+1
</pre>
</div>
</li>

<li>包在列表中传递
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">inc</span>([x]): <span style="color: #DFAF8F;">x</span>[0] = x[0] + 1
<span style="color: #DFAF8F;">foo</span> = [10]
inc(foo)
foo
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; 11</span>
</pre>
</div>
</li>
</ul>
</div>
</li>
<li><a id="sec-4-2-3" name="sec-4-2-3"></a>参数过多，顺序难记<br  /><div class="outline-text-4" id="text-4-2-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">hello</span>(greeting, name):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'%s, %s'</span> % (greeting, name)

hello(<span style="color: #CC9393;">'Hello'</span>, <span style="color: #CC9393;">'world'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21442;&#25968;&#39034;&#24207;&#38590;&#35760;&#26102;&#65292;&#20351;&#29992; &#21442;&#25968;&#21517;=&#20256;&#20837;&#20540; &#30340;&#24418;&#24335;</span>
hello(greeting=<span style="color: #CC9393;">'Hello'</span>, name=<span style="color: #CC9393;">'world'</span>)
</pre>
</div>
</div>
</li>
<li><a id="sec-4-2-4" name="sec-4-2-4"></a>参数默认值<br  /><div class="outline-text-4" id="text-4-2-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">hello2</span>(greeting=<span style="color: #CC9393;">'Hello'</span>, name=<span style="color: #CC9393;">'world'</span>): <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#25552;&#20379;&#40664;&#35748;&#20540;</span>
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'%s, %s!'</span> % (greeting, name)
hello2()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Hello, world!</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-4-2-5" name="sec-4-2-5"></a>任意数量的参数<br  /><ul class="org-ul"><li><a id="sec-4-2-5-1" name="sec-4-2-5-1"></a>参数定义时加上'*'<br  /><div class="outline-text-5" id="text-4-2-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">print_params</span>(title, *params):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> title, params<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#20256;&#20837;&#30340;params&#21442;&#25968;&#20250;&#20316;&#20026;&#20803;&#32452;&#20351;&#29992;</span>
print_params(<span style="color: #CC9393;">'Print params'</span>, <span style="color: #CC9393;">'param1'</span>, <span style="color: #CC9393;">'param2'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Print params</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Print params ('param1', 'param2')</span>

print_params(<span style="color: #CC9393;">'Nothing'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Nothing ()</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-4-2-5-2" name="sec-4-2-5-2"></a>参数定义时加上'**'<br  /><div class="outline-text-5" id="text-4-2-5-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">print_params2</span>(**params):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> params<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#20256;&#20837;&#30340;params&#21442;&#25968;&#20250;&#20316;&#20026;&#23383;&#20856;&#20351;&#29992;</span>
print_params2(x=1, y=2, z=3)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;( 'x' : 1, 'y' : 2, 'z' : 3)</span>
</pre>
</div>
</div>
</li></ul>
</li>
<li><a id="sec-4-2-6" name="sec-4-2-6"></a>将元组和字典作为参数(以上逆过程)<br  /><div class="outline-text-4" id="text-4-2-6">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24207;&#21015;&#29992;&#27861;</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span>  <span style="color: #93E0E3;">add</span>(x, y): <span style="color: #F0DFAF; font-weight: bold;">return</span> x + y
<span style="color: #DFAF8F;">params</span> = (1, 2)
add(*params)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21152;&#19978;*</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;3</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23383;&#20856;&#29992;&#27861;</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">hello3</span>(greeting=<span style="color: #CC9393;">'Hello'</span>, name=<span style="color: #CC9393;">'world'</span>):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'%s, %s!'</span> % (greeting, name)
<span style="color: #DFAF8F;">params</span> = {<span style="color: #CC9393;">'name'</span>: <span style="color: #CC9393;">'Sir Robin'</span>, <span style="color: #CC9393;">'greeting'</span>: <span style="color: #CC9393;">'Well met'</span>}
hello3(**params)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21152;&#19978;**</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Well met, Sir Robin!</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-4-2-7" name="sec-4-2-7"></a>变量作用域<br  /><div class="outline-text-4" id="text-4-2-7">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">scope</span> = <span style="color: #DCDCCC; font-weight: bold;">vars</span>()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">vars()&#36820;&#22238;&#20840;&#23616;&#21464;&#37327;&#30340;&#23383;&#20856;</span>
<span style="color: #DFAF8F;">x</span>=1
scope[<span style="color: #CC9393;">'x'</span>]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;1</span>
<span style="color: #DFAF8F;">scope</span>[<span style="color: #CC9393;">'x'</span>] += 1
x
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>
</pre>
</div>
<p class="verse">
以上代码说明：<br  />
赋值语句实际上是在一个全局变量字典中建立了一个键值对，<br  />
只不过这个字典是对外隐藏的。这个“不可见”字典就是变量的作用域。<br  />
能够创建变量作用域的代码段有def、class、lamda。<br  />
</p>
</div>
<ul class="org-ul"><li><a id="sec-4-2-7-1" name="sec-4-2-7-1"></a>函数内访问全局变量<br  /><div class="outline-text-5" id="text-4-2-7-1">
<p>
在函数作用域内调用同名全局变量，需使用globals()['globalName']
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">combine</span>(param):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> param + <span style="color: #DCDCCC; font-weight: bold;">globals</span>()[<span style="color: #CC9393;">'param'</span>]
<span style="color: #DFAF8F;">param</span> = <span style="color: #CC9393;">'berry'</span>
combine(<span style="color: #CC9393;">'Shrub'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Shrubberry</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-7-2" name="sec-4-2-7-2"></a>函数内改变全局变量<br  /><div class="outline-text-5" id="text-4-2-7-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>=1
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">change_global</span>():
    <span style="color: #F0DFAF; font-weight: bold;">global</span> x
    <span style="color: #DFAF8F;">x</span> = x + 1
change_global()
x
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>
</pre>
</div>
</div>
</li></ul>
</li>

<li><a id="sec-4-2-8" name="sec-4-2-8"></a>递归<br  /><div class="outline-text-4" id="text-4-2-8">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">power</span>(x, n):
    <span style="color: #F0DFAF; font-weight: bold;">if</span> n == 0:
<span style="color: #F0DFAF; font-weight: bold;">return</span> 1
    <span style="color: #F0DFAF; font-weight: bold;">else</span>:
<span style="color: #F0DFAF; font-weight: bold;">return</span> x * power(x, n-1)
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> 查看函数说明</h3>
<div class="outline-text-3" id="text-4-3">
<p>
fibs.__doc__ 可访问函数说明、help(fibs) 更好用
</p>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> 空返回值</h3>
<div class="outline-text-3" id="text-4-4">
<p>
函数如果无返回值，返回None
</p>
</div>
</div>
<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> 闭包</h3>
<div class="outline-text-3" id="text-4-5">
</div><ol class="org-ol"><li><a id="sec-4-5-1" name="sec-4-5-1"></a>快速预览<br  /><div class="outline-text-4" id="text-4-5-1">
<p>
以下是一段简单的闭包代码示例：
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">foo</span>():
    <span style="color: #DFAF8F;">m</span>=3
    <span style="color: #DFAF8F;">n</span>=5
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">bar</span>():
        <span style="color: #DFAF8F;">a</span>=4
        <span style="color: #F0DFAF; font-weight: bold;">return</span> m+n+a
    <span style="color: #F0DFAF; font-weight: bold;">return</span> bar

&gt;&gt;&gt;<span style="color: #DFAF8F;">bar</span> =  foo()
&gt;&gt;&gt;bar()
12
</pre>
</div>
<p class="verse">
说明：<br  />
bar在foo函数的代码块中定义。我们称bar是foo的内部函数。<br  />
<br  />
在bar的局部作用域中可以直接访问foo局部作用域中定义的m、n变量。<br  />
简单的说，这种内部函数可以使用外部函数变量的行为，就叫闭包。<br  />
<br  />
那么闭包内部是如何来实现的呢？<br  />
我们一步步来，先看两个python内置的object: &lt;code&gt;和&lt;cell&gt;<br  />
</p>
</div>
</li>
<li><a id="sec-4-5-2" name="sec-4-5-2"></a>code object<br  /><div class="outline-text-4" id="text-4-5-2">
<p class="verse">
code object是python代码经过编译后的对象。<br  />
它用来存储一些与代码有关的信息以及bytecode。<br  />
<br  />
以下代码示例，演示了如何通过编译产生code object<br  />
以及使用exec运行该代码，和使用dis方便地查看字节码。<br  />
<br  />
code object还有很多的特性可以访问。详细请看官方文档。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> dis
<span style="color: #DFAF8F;">code_obj</span> = <span style="color: #DCDCCC; font-weight: bold;">compile</span>(<span style="color: #CC9393;">'sum([1,2,3])'</span>,  <span style="color: #CC9393;">''</span>, <span style="color: #CC9393;">'single'</span>)

&gt;&gt;&gt;<span style="color: #F0DFAF; font-weight: bold;">exec</span>(code_obj)
6

&gt;&gt;&gt; dis.dis(code_obj)
  1           0 LOAD_NAME                0 (<span style="color: #DCDCCC; font-weight: bold;">sum</span>)
              3 LOAD_CONST               0 (1)
              6 LOAD_CONST               1 (2)
              9 LOAD_CONST               2 (3)
             12 BUILD_LIST                   3
             15 CALL_FUNCTION          1
             18 PRINT_EXPR
             19 LOAD_CONST               3 (<span style="color: #BFEBBF;">None</span>)
             22 RETURN_VALUE
</pre>
</div>
<p class="verse">
那么，这跟我们的例子有什么关系？<br  />
</p>
<pre class="example">
&gt;&gt;&gt; foo.func_code
&lt;code object foo at 01FE92F0, file "&lt;pyshell#50&gt;", line 1&gt;
</pre>
<p class="verse">
我们可以看到，函数定义好之后，就可以通过[函数名.func_code]<br  />
访问该函数的code object，之后我们会用到它的一些特性。<br  />
</p>
</div>
</li>
<li><a id="sec-4-5-3" name="sec-4-5-3"></a>cell object<br  /><div class="outline-text-4" id="text-4-5-3">
<p class="verse">
cell对象的引入，是为了实现被多个作用域引用的变量。<br  />
对每一个这样的变量，都用一个cell对象来保存 <b>其值</b> 。<br  />
<br  />
拿之前的示例来说，m和n既在foo函数的作用域中被引用，又在bar<br  />
函数的作用域中被引用，所以m, n引用的值，都会在一个cell对象中。<br  />
<br  />
可以通过内部函数的__closure__或者func_closure特性查看cell对象：<br  />
</p>
<pre class="example">
&gt;&gt;&gt; bar = foo()
&gt;&gt;&gt; bar.__closure__
(&lt;cell at 0x01FE8DF0: int object at 0x0186D888&gt;, &lt;cell at 0x01F694B0: int object at 0x0186D870&gt;)
</pre>
<p class="verse">
这两个int型的cell分别存储了m和n的值。<br  />
无论是在外部函数中定义，还是在内部函数中调用，引用的指向都是cell对象中的值。<br  />
<br  />
注：内部函数无法修改cell对象中的值，如果尝试修改m的值，编译器会认为m是函数<br  />
bar的局部变量，同时foo代码块中的m也会被认为是函数foo的局部变量，就会再把m<br  />
认作闭包变量，两个m分别在各自的作用域下起作用。<br  />
</p>
</div>
</li>
<li><a id="sec-4-5-4" name="sec-4-5-4"></a>闭包分析<br  /><div class="outline-text-4" id="text-4-5-4">
<ul class="org-ul">
<li>使用dis<sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup>模块分析foo的bytecode。
</li>
</ul>
<pre class="example">
2          0 LOAD_CONST              1 (3)
            3 STORE_DEREF               0 (m)

3          6 LOAD_CONST              2 (5)
            9 STORE_DEREF               1 (n)

4          12 LOAD_CLOSURE         0 (m)
            15 LOAD_CLOSURE         1 (n)
            18 BUILD_TUPLE              2
            21 LOAD_CONST             3 (&lt;code object bar at 018D9848, file "&lt;pyshell#1&gt;", line 4&gt;)
            24 MAKE_CLOSURE         0
            27 STORE_FAST               0 (bar)

7          30 LOAD_FAST                 0 (bar)
            33 RETURN_VALUE
</pre>
<p class="verse">
进行逐行分析：<br  />
<br  />
<b>LOAD_CONST  1 (3)</b> ：<br  />
将foo.func_code.co_consts <code>[1]</code> 的值"3"push进栈。<br  />
<br  />
<b>STORE_DEREF  0 (m)</b> ：<br  />
从栈顶Pop出"3"包装成cell对象存入cell与自由变量的存储区的第0槽。<br  />
将cell对象的地址信息赋给变量m(闭包变量名记录在func_code.cellvars)。<br  />
func_code.cellvars的内容为('m', 'n')<br  />
<br  />
<b>LOAD_CLOSURE  0 (m)</b> ：<br  />
将变量m的值push进栈，类似如下信息：<br  />
&lt;cell at 0x01D572B0: int object at 0x0180D6F8&gt;<br  />
<br  />
<b>LOAD_CLOSURE  1 (n)</b> ：<br  />
类似变量m的处理，不在累述。<br  />
<br  />
当前栈区状态：<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="right">1</td>
<td class="left">&lt;cell at 0x01D572B0: int object at 0x0180D6F8&gt;</td>
</tr>

<tr>
<td class="right">2</td>
<td class="left">&lt;cell at 0x01D86510: int object at 0x0180D6E0&gt;</td>
</tr>

<tr>
<td class="right">3</td>
<td class="left">&#x2026;</td>
</tr>
</tbody>
</table>
<p class="verse">
<br  />
<b>BUILD_TUPLE  2</b> ：<br  />
将栈顶的两项取出，创建元组，并将该元组push进栈。<br  />
<br  />
<b>LOAD_CONST  3</b> ：<br  />
从foo.func_code.co_consts <code>[3]</code> 取出，该项为内部函数bar的code object的地址，将其push进栈<br  />
&lt;code object bar at 018D9848, file "&lt;pyshell#1&gt;", line 4&gt;<br  />
<br  />
栈区状态：<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="right">1</td>
<td class="left">&lt;code object bar at 018D9848, file "&lt;pyshell#1&gt;", line 4&gt;</td>
</tr>

<tr>
<td class="right">2</td>
<td class="left">(&lt;cell at 0x01D572B0: int object at 0x0180D6F8&gt;, &lt;cell at 0x01D86510: int object at 0x0180D6E0&gt;)</td>
</tr>

<tr>
<td class="right">3</td>
<td class="left">&#x2026;</td>
</tr>
</tbody>
</table>
<p class="verse">
<br  />
<b>MAKE_CLOSURE  0</b> ：<br  />
创建一个函数对象，将位于栈顶的code object(bar函数的code)地址信息赋<br  />
给该函数对象的func_code特性；<br  />
将栈顶第二项(包含cell对象地址的元组)赋给该函数对象的func_closure特性；<br  />
最后将该函数对象地址信息push进栈。<br  />
<br  />
<b>STORE_FAST  0 (bar)</b> ：<br  />
从栈顶取出之前创建的函数对象的地址信息赋给局部变量bar(局部变量名记录在func_code.co_varnames中)<br  />
func_code.co_varnames的内容为('bar',)<br  />
将变量bar(记录在func_code.cellvars <code>[0]</code> )绑定栈顶的函数对象地址。<br  />
<b>LOAD_FAST  0 (bar)</b> ：<br  />
将变量bar的值push进栈。<br  />
<br  />
<b>RETURN_VALUE</b><br  />
返回栈顶项，print bar可以看到&lt;function bar at 0x01D899F0&gt;<br  />
<br  />
</p>
<ul class="org-ul">
<li>再分析bar函数就简单了
</li>
</ul>
<pre class="example">
5           0 LOAD_CONST            1 (4)
             3 STORE_FAST               0 (a)

6           6 LOAD_DEREF               0 (m)
             9 LOAD_DEREF               1 (n)
             12 BINARY_ADD
             13 LOAD_FAST               0 (a)
             16 BINARY_ADD
             17 RETURN_VALUE
</pre>
<p class="verse">
重点是LOAD_DEREF，该方法主要是将cell对象中的object内容push进栈。大致过程如下：<br  />
<br  />
根据变量m的值找到包装在cell内的int object的地址信息<br  />
m的值：&lt;cell at 0x01D572B0: int object at 0x0180D6F8&gt;<br  />
<br  />
根据地址取出int值，push进栈。<br  />
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> 函数柯里化</h3>
<div class="outline-text-3" id="text-4-6">
</div><ol class="org-ol"><li><a id="sec-4-6-1" name="sec-4-6-1"></a>柯里化(Currying)<br  /><div class="outline-text-4" id="text-4-6-1">
<p>
一个函数有多个参数，我们希望能固定其中几个参数的值。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> functools <span style="color: #F0DFAF; font-weight: bold;">import</span> partial
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">foo</span>(a,b,c):
    <span style="color: #F0DFAF; font-weight: bold;">return</span> a+b+c

<span style="color: #DFAF8F;">foo2</span> = partial(foo, b=2)
foo2(a=1, c=3)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;6</span>
</pre>
</div>
<p class="verse">
看上去这跟提供参数默认值的情况类似。但默认值只能固定<br  />
为单个值，而柯里化能通过泛化出很多个函数，每个函数用<br  />
不同的固定值，来看一下 <b>应用场景</b> ：<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> functools <span style="color: #F0DFAF; font-weight: bold;">import</span> partial
<span style="color: #DFAF8F;">bin2dec</span> = partial(<span style="color: #DCDCCC; font-weight: bold;">int</span>, base=2)
<span style="color: #DFAF8F;">hex2dec</span> = partial(<span style="color: #DCDCCC; font-weight: bold;">int</span>, base=16)
</pre>
</div>
<p class="verse">
原int方法的定义为：int( x[, base])，base参数的默认为10<br  />
经过柯里化之后，可以用如下方式调用：<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">int</span>(<span style="color: #CC9393;">'15'</span>) <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;15  using default base 10</span>
bin2dec(<span style="color: #CC9393;">'01011'</span>) <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;11</span>
hex2dec(<span style="color: #CC9393;">'67'</span>) <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;103</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-4-6-2" name="sec-4-6-2"></a>反柯里化(Uncurrying)<br  /><div class="outline-text-4" id="text-4-6-2">
<p class="verse">
顾名思义，柯里化的逆过程。<br  />
将多个只含单个参数的函数模拟成一个多参数函数。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">foo</span>(a):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">bar</span>(b):
        <span style="color: #F0DFAF; font-weight: bold;">return</span> a+b
    <span style="color: #F0DFAF; font-weight: bold;">return</span> bar
</pre>
</div>
<p>
你可以像这样调用：foo(1)(4)或(foo(1))(4)，都能得到正确的结果5。
</p>
<ul class="org-ul">
<li>那么反柯里化有什么用？
</li>
</ul>
<p class="verse">
一些函数式编程语言，就是利用反柯里化来实现多参数函数。<br  />
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> 拓展</h3>
<div class="outline-text-3" id="text-4-7">
</div><ol class="org-ol"><li><a id="sec-4-7-1" name="sec-4-7-1"></a>斐波那契数列<br  /><div class="outline-text-4" id="text-4-7-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">fibs</span> = [0, 1]
<span style="color: #F0DFAF; font-weight: bold;">for</span> i <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(8):
    fibs.append(fibs[-2] + fibs[-1])
fibs
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [0, 1, 1, 2, 3, 5, 8, 13, 21, 34]</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#25277;&#35937;&#25104;</span>
fibs(num)
</pre>
</div>
</div>
</li>
<li><a id="sec-4-7-2" name="sec-4-7-2"></a>map/reduce/filter<br  /><ul class="org-ul"><li><a id="sec-4-7-2-1" name="sec-4-7-2-1"></a>map<br  /><div class="outline-text-5" id="text-4-7-2-1">
<p>
map(func, seq1, seq2, &#x2026;])
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">map</span>(<span style="color: #F0DFAF; font-weight: bold;">lambda</span> x,y: x+y, [1,2,3,4,5], [6,7,8,9,10])<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">seq1&#23545;&#24212;arg1, seq2&#23545;&#24212;arg2</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[7, 9, 11, 13, 15]</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-4-7-2-2" name="sec-4-7-2-2"></a>reduce<br  /><div class="outline-text-5" id="text-4-7-2-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">reduce</span>(func, seq)
&#31561;&#21516;&#20110;func(func(func(seq[0], seq[1]), seq[2])...)
eg:
<span style="color: #DCDCCC; font-weight: bold;">reduce</span>(<span style="color: #F0DFAF; font-weight: bold;">lambda</span> x, y: x+y, [1, 2, 3, 4, 5])
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;15</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-4-7-2-3" name="sec-4-7-2-3"></a>filter<br  /><div class="outline-text-5" id="text-4-7-2-3">
<p class="verse">
filter(func, seq)<br  />
func需返回布尔值<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">filter</span>(<span style="color: #F0DFAF; font-weight: bold;">lambda</span> x: x&gt;3 <span style="color: #F0DFAF; font-weight: bold;">and</span> <span style="color: #BFEBBF;">True</span> <span style="color: #F0DFAF; font-weight: bold;">or</span> <span style="color: #BFEBBF;">False</span>, [1,2,3,4,5])
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[4,5]</span>
<span style="color: #DCDCCC; font-weight: bold;">filter</span>(<span style="color: #F0DFAF; font-weight: bold;">lambda</span> x: <span style="color: #BFEBBF;">True</span> <span style="color: #F0DFAF; font-weight: bold;">if</span> x&gt;3 <span style="color: #F0DFAF; font-weight: bold;">else</span> <span style="color: #BFEBBF;">False</span>, [1,2,3,4,5])
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[4,5]</span>
</pre>
</div>
</div>
</li></ul>
</li></ol>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 类</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 定义类</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Person</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">setName</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>, name):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.name = name

    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">getName</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>.name

    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">greet</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"Hello, world! I'm %s"</span> % <span style="color: #F0DFAF; font-weight: bold;">self</span>.name
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-5-1-1" name="sec-5-1-1"></a>self参数<br  /><div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">A</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">a</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'Hello'</span>

<span style="color: #DFAF8F;">i</span> = A()
i.a
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;bound method A.a of &lt;__main__.A instance at 0x01E26648&gt;&gt;</span>
i.a()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Hello</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#31561;&#21516;&#20110;</span>
A.a(i)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Hello</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-5-1-2" name="sec-5-1-2"></a>函数的变量绑定<br  /><div class="outline-text-4" id="text-5-1-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">A</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">a</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'Hello'</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">b</span>():
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'World'</span>

<span style="color: #DFAF8F;">i</span>=A()
<span style="color: #DFAF8F;">i.a</span>=b<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">i.a&#26159;&#19968;&#20010;&#29305;&#24615;&#65292;&#21487;&#20197;&#32465;&#23450;&#20219;&#20309;&#26041;&#27861;</span>
i.a
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;function b at 0x01E279B0&gt;</span>
i.a()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;World</span>
A.a(i)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Hello</span>

<span style="color: #DFAF8F;">i2</span>=A()
<span style="color: #DFAF8F;">c</span>=i2.a<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">c&#26159;&#26041;&#27861;&#21464;&#37327;</span>
c
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;bound method A.b of &lt;__main__.A instance at 0x01E2F8A0&gt;&gt;</span>
c()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Hello</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-5-1-3" name="sec-5-1-3"></a>私有成员<br  /><div class="outline-text-4" id="text-5-1-3">
<p class="verse">
python不直接支持私有成员。<br  />
需要程序员自己把握从外部调用实例成员的时机<br  />
小技巧：加上双下划线__，使方法变为对外不可见<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Secretive</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__inaccessible</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"You can't find me"</span>
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">accessible</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"You can find me"</span>
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.__inaccessible()
<span style="color: #DFAF8F;">i</span>=Secretive()
i.__inaccessible()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Error</span>
i.accessible()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;You can find me</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;You can't find me</span>
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="sec-5-1-3-1" name="sec-5-1-3-1"></a>内幕<br  /><div class="outline-text-5" id="text-5-1-3-1">
<p>
所有的以双下划线开头的成员方法"__方法名"，都被转成"_类名__方法名"
</p>
<div class="org-src-container">

<pre class="src src-python">Secretive._Secretive__inaccessible
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;unbound method Secretive.__inaccessible&gt;</span>
i._Secretive__inaccessible()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;You can't find me</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-5-1-3-2" name="sec-5-1-3-2"></a>使用单下划线<br  /><div class="outline-text-5" id="text-5-1-3-2">
<p class="verse">
这更像是一种习惯或者约定，程序员看到'_'开头的方法时，就不应该再从外部访问该方法。<br  />
在使用import导入的时候，这些成员也不会被列出。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">_privateMethod</span>():
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"You should not invoke this from outside"</span>
</pre>
</div>
</div>
</li></ul>
</li></ol>
</div>
<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> 类成员变量(非实例成员)</h3>
<div class="outline-text-3" id="text-5-2">
<p>
定义一个Class时，类空间域中的代码都会执行。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">C</span>:
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"Class C"</span><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#20250;&#34987;&#25191;&#34892;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Class C</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">A</span>:
    <span style="color: #DFAF8F;">count</span> = 0<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23450;&#20041;&#20102;&#19968;&#20010;&#31867;&#25104;&#21592;number&#24182;&#21021;&#22987;&#21270;&#20026;0&#65292;&#26377;&#28857;&#31867;&#20284;&#20110;&#20854;&#20182;&#35821;&#35328;&#30340;&#38745;&#24577;&#25104;&#21592;</span>
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">init</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #DFAF8F;">A.count</span> += 1

<span style="color: #DFAF8F;">m1</span>=A()
m1.init()
A.count
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;1</span>

<span style="color: #DFAF8F;">m2</span>=A()
m2.init()
A.count
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23454;&#20363;&#20316;&#29992;&#22495;&#21516;&#26679;&#36866;&#29992;</span>
m1.count
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>
m2.count
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23454;&#20363;&#20316;&#29992;&#22495;&#24050;&#20998;&#24320;</span>
<span style="color: #DFAF8F;">m1.count</span> = 5<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21019;&#24314;&#20102;m1&#30340;&#25104;&#21592;&#21464;&#37327;count&#65292;m1.count&#19981;&#20877;&#32465;&#23450;&#31867;&#21464;&#37327;A.count</span>
m1.count
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;5</span>
m2.count
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>
m1.__dict__
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;{'count': 5}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> 类静态方法和类方法</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">StaticMethodTest</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">staticMeth</span>():
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'calling static method'</span>
    <span style="color: #DFAF8F;">staticMeth</span>=<span style="color: #DCDCCC; font-weight: bold;">staticmethod</span>(staticMeth)
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">classMeth</span>(cls):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'calling class method'</span>
    <span style="color: #DFAF8F;">classMeth</span>=<span style="color: #DCDCCC; font-weight: bold;">classmethod</span>(classMeth)
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">instanceMeth</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'calling instance method'</span>

<span style="color: #DFAF8F;">s</span> = StaticMethodTest()
s.staticMeth()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;calling static method</span>
s.classMeth()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;calling class method</span>
s.instanceMeth()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;calling instance method</span>
StaticMethodTest.staticMeth()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;calling static method</span>
StaticMethodTest.classMeth()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;calling class method</span>
StaticMethodTest.instanceMeth()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; unbounded method error</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">decorators&#26032;&#35821;&#27861;</span>
<span style="color: #DFAF8F;">__metaclass__</span>=<span style="color: #DCDCCC; font-weight: bold;">type</span>
  <span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">StaticMethodTest</span>:
      <span style="color: #7CB8BB;">@staticmethod</span>
      <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">staticMeth</span>():
          <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'calling static method'</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> 属性</h3>
<div class="outline-text-3" id="text-5-4">
</div><ol class="org-ol"><li><a id="sec-5-4-1" name="sec-5-4-1"></a>适用新式类<br  /><div class="outline-text-4" id="text-5-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">__metaclass__</span>=<span style="color: #DCDCCC; font-weight: bold;">type</span>
<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Retangle</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__init__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.width=0
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.height=0
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">setSize</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>, size):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.width, <span style="color: #F0DFAF; font-weight: bold;">self</span>.height=size
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">getSize</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>.width, <span style="color: #F0DFAF; font-weight: bold;">self</span>.height
    <span style="color: #DFAF8F;">size</span> = <span style="color: #DCDCCC; font-weight: bold;">property</span>(getSize, setSize)

<span style="color: #DFAF8F;">r</span> = Retangle()
<span style="color: #DFAF8F;">r.width</span>=10
<span style="color: #DFAF8F;">r.height</span>=5
r.size
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;(10, 5)</span>
<span style="color: #DFAF8F;">r.size</span> = 150, 100
r.width
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;150</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-5-4-2" name="sec-5-4-2"></a>适用旧式类<br  /><div class="outline-text-4" id="text-5-4-2">
<ul class="org-ul">
<li>__getattr__(self,name)
</li>
<li>__setattr__(self,name,value)
</li>
<li>__delattr__(self,name)
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Retangle</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__setattr__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>, name, value):
        <span style="color: #F0DFAF; font-weight: bold;">if</span> name ==<span style="color: #CC9393;">'size'</span>:
            <span style="color: #F0DFAF; font-weight: bold;">self</span>.width, <span style="color: #F0DFAF; font-weight: bold;">self</span>.height = value
        <span style="color: #F0DFAF; font-weight: bold;">else</span>:
            <span style="color: #F0DFAF; font-weight: bold;">self</span>.__dict__[name] = value
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__getattr__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>,name):
        <span style="color: #F0DFAF; font-weight: bold;">if</span> name == <span style="color: #CC9393;">'size'</span>:
            <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>.width, <span style="color: #F0DFAF; font-weight: bold;">self</span>.height
        <span style="color: #F0DFAF; font-weight: bold;">else</span>:
            <span style="color: #F0DFAF; font-weight: bold;">raise</span> <span style="color: #7CB8BB;">AttributeError</span>
</pre>
</div>
<p class="verse">
注：只有特性不存在时，才会调用__getattr__。<br  />
本例中self.size特性不存在，__getattr__会被调用。<br  />
如果访问width特性，则不会调用__getattr__。<br  />
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> 继承</h3>
<div class="outline-text-3" id="text-5-5">
</div><ol class="org-ol"><li><a id="sec-5-5-1" name="sec-5-5-1"></a>定义子类<br  /><div class="outline-text-4" id="text-5-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Parent</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">init</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"Init Parent done"</span>

<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">ChildA</span>(Parent):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">init</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#37325;&#20889;&#29238;&#31867;&#30340;init&#26041;&#27861;</span>
        <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"Init Child done"</span>

<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">ChildB</span>(Parent):
    <span style="color: #F0DFAF; font-weight: bold;">pass</span>

<span style="color: #DFAF8F;">p</span> = Parent()
p.init()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Init Parent done</span>
<span style="color: #DFAF8F;">a</span> = ChildA()
a.init()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Init Chile done</span>
<span style="color: #DFAF8F;">b</span> = ChildB()
b.init()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Init Parent done</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-5-5-2" name="sec-5-5-2"></a>查询类继承关系<br  /><div class="outline-text-4" id="text-5-5-2">
<ul class="org-ul">
<li>issubclass(sub, parent) 判断两个类是否为父子关系
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">issubclass</span>(ChildA, Parent)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;True</span>
</pre>
</div>
<ul class="org-ul">
<li>sub.__bases__ 查找一个类的父类
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python">ChildA
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;class __main__.ChildB at 0x01E44EA0&gt;</span>
ChildA.__bases__<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#26597;&#25214;&#29238;&#31867;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;(&lt;class __main__.Parent at 0x01E1F340&gt;,)</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-5-5-3" name="sec-5-5-3"></a>查询对象的类别<br  /><div class="outline-text-4" id="text-5-5-3">
<ul class="org-ul">
<li>isinstance(instance, class) 判断对象是否属于某类
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">isinstance</span>(a, ChildA)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;True</span>
<span style="color: #DCDCCC; font-weight: bold;">isinstance</span>(a, Parent)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;True</span>
</pre>
</div>
<ul class="org-ul">
<li>instance or instance.__class__ 查询对象属于哪个类
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python">a
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;__main__.ChildA instance at 0x01E181C0&gt;</span>
a.__class__
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;class __main__.ChildA at 0x01E32030&gt;</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> 多重继承</h3>
<div class="outline-text-3" id="text-5-6">
<p class="verse">
经典类指的是没有继承任何基类直接定义的类。<br  />
新式类指的是基类为"object"的类。<br  />
- 特性搜寻算法(MRO)<br  />
[旧]深度优先，从左到右进行搜索。<br  />
[新]广度优先，从继承层次下层从左到右开始搜索。<br  />
</p>
<p>
<img src="../resources/python/MultipleInheritance.png" alt="MultipleInheritance.png" />
经典类算法：
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">gc</span>=GC()
gc.foo() <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">GC==&gt;C1==&gt;P1</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;called P1-foo()</span>
gc.bar() <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">GC==&gt;C1==&gt;P1==&gt;P2</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;called P2-bar()</span>
C2.bar(gc)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#25165;&#20250;&#35843;&#29992;C2&#20013;&#30340;bar</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;called C2-bar()</span>
</pre>
</div>
<p class="verse">
问题在于C2在继承树上与GC更亲近，一般的思维习惯是调用C2<br  />
<br  />
新式类算法：<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">gc</span>=GC()
gc.foo() <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">GC==&gt;C1==&gt;C2==&gt;P1</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;called P1-foo()</span>
gc.bar() <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">GC==&gt;C1==&gt;C2</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;called C2-bar()</span>
</pre>
</div>
<p>
新式类可使用__mro__特性查看mro顺序
</p>
<div class="org-src-container">

<pre class="src src-python">GC.__mro__
(&lt;<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #CC9393;">'__main__.GC'</span>&gt;, &lt;<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #CC9393;">'__main__.C1'</span>&gt;, &lt;<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #CC9393;">'__main__.C2'</span>&gt;, &lt;<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #CC9393;">'__main__.P1'</span>&gt;, &lt;<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #CC9393;">'__main__.P2'</span>&gt;, &lt;<span style="color: #DCDCCC; font-weight: bold;">type</span> <span style="color: #CC9393;">'object'</span>&gt;)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> 接口和内省</h3>
<div class="outline-text-3" id="text-5-7">
<p class="verse">
<b>Python不需要单独定义接口或抽象类</b><br  />
Python变量a，无所谓它是什么类型。调用a.func时，<br  />
只要保证对象a中存在特性func就能正常调用。<br  />
这就是Python强大的内省机制(即在运行时，获取对象的全部信息)。<br  />
</p>
<ul class="org-ul">
<li>hasattr 检查特性是否存在
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python">  <span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">A</span>:
      <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">printNote</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
          <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"A"</span>
<span style="color: #DFAF8F;">a</span> = A()
<span style="color: #DCDCCC; font-weight: bold;">hasattr</span>(a, <span style="color: #CC9393;">'printNote'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;True</span>
<span style="color: #DCDCCC; font-weight: bold;">hasattr</span>(a,<span style="color: #CC9393;">'print'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;False</span>
</pre>
</div>
<ul class="org-ul">
<li>getattr(obj, 'attr', None) 获取特性信息。第三个参数表示找不到该属性时，返回的值 。
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#29978;&#33267;&#21487;&#20197;&#26816;&#26597;&#26159;&#21542;&#21487;&#35843;&#29992;</span>
<span style="color: #DCDCCC; font-weight: bold;">getattr</span>(a,<span style="color: #CC9393;">'printNote'</span>,<span style="color: #BFEBBF;">None</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">3.0&#20013;&#24050;&#19981;&#20877;&#20351;&#29992;, getattr&#21487;&#20197;&#20351;&#29992;&#40664;&#35748;&#20540;&#65292;&#27492;&#22788;&#26159;None</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;bound method A.printNote of &lt;__main__.A instance at 0x01DA4C88&gt;&gt;</span>

<span style="color: #DCDCCC; font-weight: bold;">setattr</span>(a,<span style="color: #CC9393;">'name'</span>,<span style="color: #CC9393;">'Mr.Gumby'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#30456;&#23545;&#24212;&#30340;&#26041;&#27861;Setattr</span>
&gt;&gt;&gt;a.name
<span style="color: #CC9393;">'Mr.Gumby'</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="section-number-3">5.8</span> 类的特殊特性总结</h3>
<div class="outline-text-3" id="text-5-8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">特性</th>
<th scope="col" class="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><span class="underline"><span class="underline">dict</span></span></td>
<td class="left">类名字空间的特性字典</td>
</tr>

<tr>
<td class="left"><span class="underline"><span class="underline">doc</span></span></td>
<td class="left">类的文档说明字符串</td>
</tr>

<tr>
<td class="left"><span class="underline"><span class="underline">name</span></span></td>
<td class="left">类的名称</td>
</tr>

<tr>
<td class="left"><span class="underline"><span class="underline">module</span></span></td>
<td class="left">类的模块名</td>
</tr>

<tr>
<td class="left"><span class="underline"><span class="underline">bases</span></span></td>
<td class="left">该类所有父类组成的元组</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 异常</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> 抛出异常</h3>
<div class="outline-text-3" id="text-6-1">
<p>
使用raise语句抛出异常
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">raise</span> <span style="color: #7CB8BB;">Exception</span>(<span style="color: #CC9393;">'Error occured'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Traceback (most recent call last):</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;  File "&lt;pyshell#96&gt;", line 1, in &lt;module&gt;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;    raise Exception('Error occured')</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Exception: Error occured</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> 内建异常类</h3>
<div class="outline-text-3" id="text-6-2">
<p class="verse">
参考手册“Built-in Exceptions”一节。<br  />
内建异常都在exceptions模块<br  />
</p>
</div>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> 自定义异常类</h3>
<div class="outline-text-3" id="text-6-3">
<p>
只需创建类时，继承Exception基类即可。
</p>
</div>
</div>
<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> 捕捉异常</h3>
<div class="outline-text-3" id="text-6-4">
<ul class="org-ul">
<li>try/except语句
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> exceptions
<span style="color: #F0DFAF; font-weight: bold;">try</span>:
    <span style="color: #F0DFAF; font-weight: bold;">print</span> 5/0
<span style="color: #F0DFAF; font-weight: bold;">except</span> <span style="color: #7CB8BB;">ZeroDivisionError</span>:
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">"Error: modulo by zero"</span>
<span style="color: #F0DFAF; font-weight: bold;">except</span> (<span style="color: #7CB8BB;">TypeError</span>, <span style="color: #7CB8BB;">NameError</span>), e:<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#22810;&#20010;&#24322;&#24120;&#65292;&#25918;&#20837;&#20803;&#32452;&#20013;&#25429;&#25417;&#65292;e&#26159;&#24322;&#24120;&#23454;&#20363;</span>
    <span style="color: #F0DFAF; font-weight: bold;">print</span> e
</pre>
</div>
<p>
注：3.0中改为except(TypeError, NameError) as e
</p>
<ul class="org-ul">
<li>try/except/else语句
</li>
</ul>
<p class="verse">
当未捕捉到异常时，执行else语句块<br  />
</p>
<ul class="org-ul">
<li>try/except/finally
</li>
</ul>
<p>
finally语句块无论是否捕捉到异常都会被执行，多用于清理资源。
</p>
</div>
</div>
<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> 常用异常类列表</h3>
<div class="outline-text-3" id="text-6-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">类名</th>
<th scope="col" class="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Excepition</td>
<td class="left">异常基类</td>
</tr>

<tr>
<td class="left">AttributeError</td>
<td class="left">特性引用或赋值失败</td>
</tr>

<tr>
<td class="left">IOError</td>
<td class="left">文件IO异常</td>
</tr>

<tr>
<td class="left">IndexError</td>
<td class="left">使用序列中不存在的索引</td>
</tr>

<tr>
<td class="left">KeyError</td>
<td class="left">使用映射中不存在的键</td>
</tr>

<tr>
<td class="left">NameError</td>
<td class="left">找不到特性(变量)名</td>
</tr>

<tr>
<td class="left">SyntaxError</td>
<td class="left">代码语法错误</td>
</tr>

<tr>
<td class="left">TypeError</td>
<td class="left">方法传入参数类型错误</td>
</tr>

<tr>
<td class="left">ValueError</td>
<td class="left">方法传入不合适的值，类型正确</td>
</tr>

<tr>
<td class="left">ZeroDivisionError</td>
<td class="left">除数为0</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> DB相关异常列表</h3>
<div class="outline-text-3" id="text-6-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">异常</th>
<th scope="col" class="left">基类</th>
<th scope="col" class="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">StandardError</td>
<td class="left">&#xa0;</td>
<td class="left">所有异常的基类</td>
</tr>

<tr>
<td class="left">Warning</td>
<td class="left">StandardError</td>
<td class="left">非致命错误时引发</td>
</tr>

<tr>
<td class="left">Error</td>
<td class="left">StandardError</td>
<td class="left">所有错误类型的基类</td>
</tr>

<tr>
<td class="left">InterfaceError</td>
<td class="left">Error</td>
<td class="left">接口错误</td>
</tr>

<tr>
<td class="left">DatabaseError</td>
<td class="left">Error</td>
<td class="left">与数据库相关的错误基类</td>
</tr>

<tr>
<td class="left">DataError</td>
<td class="left">DatabaseError</td>
<td class="left">与数据相关的问题，值超出范围</td>
</tr>

<tr>
<td class="left">OperationalError</td>
<td class="left">DatabaseError</td>
<td class="left">数据库内部操作错误</td>
</tr>

<tr>
<td class="left">IntegrityError</td>
<td class="left">DatabaseError</td>
<td class="left">关系完整性错误，如键检查失败</td>
</tr>

<tr>
<td class="left">InternalError</td>
<td class="left">DatabaseError</td>
<td class="left">数据库内部错误</td>
</tr>

<tr>
<td class="left">ProgrammingError</td>
<td class="left">DatabaseError</td>
<td class="left">用户编程错误，如未找到表</td>
</tr>

<tr>
<td class="left">NotSupportError</td>
<td class="left">DatabaseError</td>
<td class="left">请求不支持的特性，如回滚</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 高级特性和隐藏特性</h2>
<div class="outline-text-2" id="text-7">
<p class="verse">
大多数隐藏特性，只对新式类起作用。可将赋值语句__metaclass__=type放在模块<br  />
的最开始，或者定义类时继承自object类，来定义新式类。3.0起没有“旧式“类了。<br  />
</p>
</div>
<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> <span class="underline"><span class="underline">init__、__del</span></span></h3>
<div class="outline-text-3" id="text-7-1">
<p class="verse">
分别对应构造和析构方法，构造函数是被使用的最多的隐藏方法。<br  />
析构函数由于其内存释放的不确定性，调用时机未知，一般不建议使用。<br  />
</p>
</div>
<ol class="org-ol"><li><a id="sec-7-1-1" name="sec-7-1-1"></a>继承体系中的__init__<br  /><div class="outline-text-4" id="text-7-1-1">
<p class="verse">
__init__和一般的方法一样，子类会重写父类的构造。<br  />
为了调用父类的构造，一般有两种方法：<br  />
</p>
<ul class="org-ul">
<li>调用未绑定的父类构造方法
</li>
</ul>
<p class="verse">
该方法是3.0以前的老方法，属于历史遗留问题。<br  />
使用super函数简单明了。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Drived</span>(Base):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__init__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        Base.__init__(<span style="color: #F0DFAF; font-weight: bold;">self</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#35843;&#29992;&#22522;&#31867;&#26500;&#36896;</span>
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.var1=5<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#33258;&#36523;&#29305;&#24615;&#36171;&#20540;</span>
</pre>
</div>
<ul class="org-ul">
<li>使用super函数
</li>
</ul>
<p class="verse">
只适用于新式类。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Drived</span>(Base):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__init__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #DCDCCC; font-weight: bold;">super</span>(Drived, <span style="color: #F0DFAF; font-weight: bold;">self</span>).__init__()
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> 集合相关__len__、__getitem__等</h3>
<div class="outline-text-3" id="text-7-2">
<p>
需要自行实现的隐藏方法有：
</p>
<ol class="org-ol">
<li>__len__(self)
</li>
<li>__getitem__(self,key)
</li>
<li>__setitem__(self,key,value)
</li>
<li>__delitem__(self,key)
</li>
</ol>

<p>
注意点：
</p>
<ul class="org-ul">
<li>键允许是负整数
</li>
</ul>

<p class="verse">
完全自己实现，代价太大，而且不一定实现的很好。<br  />
一般的做法：继承UserList, UserString, UserDict<br  />
最新版本的python中，可以继承内建类了。可以直接继承内建list类。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">CounterList</span>(<span style="color: #DCDCCC; font-weight: bold;">list</span>):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__init__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>, *args):
        <span style="color: #DCDCCC; font-weight: bold;">super</span>(CounterList, <span style="color: #F0DFAF; font-weight: bold;">self</span>).__init__(*args)
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.counter = 0
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__getitem__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>, index):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.counter += 1
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #DCDCCC; font-weight: bold;">super</span>(CounterList, <span style="color: #F0DFAF; font-weight: bold;">self</span>).__getitem__(index)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> 迭代器__iter__</h3>
<div class="outline-text-3" id="text-7-3">
<p class="verse">
迭代器需要实现next方法，如果实现了__iter__方法，说明其是可迭代的。<br  />
因为__iter__方法定义，需要返回一个迭代器。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">Fibs</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__init__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.a = 0
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.b = 1
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">next</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.a, <span style="color: #F0DFAF; font-weight: bold;">self</span>.b = <span style="color: #F0DFAF; font-weight: bold;">self</span>.b, <span style="color: #F0DFAF; font-weight: bold;">self</span>.a+<span style="color: #F0DFAF; font-weight: bold;">self</span>.b
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>.a
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__iter__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>
<span style="color: #DFAF8F;">fibs</span> = Fibs()
<span style="color: #F0DFAF; font-weight: bold;">for</span> f <span style="color: #F0DFAF; font-weight: bold;">in</span> fibs:<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">in&#20851;&#38190;&#23383;&#21518;&#38754;&#24212;&#36319;&#26377;&#21487;&#36845;&#20195;&#23545;&#35937;</span>
    <span style="color: #F0DFAF; font-weight: bold;">if</span> f &gt;100:
        <span style="color: #F0DFAF; font-weight: bold;">print</span> f
        <span style="color: #F0DFAF; font-weight: bold;">break</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;144</span>
<span style="color: #DFAF8F;">it</span>=<span style="color: #DCDCCC; font-weight: bold;">iter</span>(fibs)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">iter&#26041;&#27861;&#36820;&#22238;&#36845;&#20195;&#22120;</span>
it.<span style="color: #DCDCCC; font-weight: bold;">next</span>()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;233</span>
fibs.<span style="color: #DCDCCC; font-weight: bold;">next</span>()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;377</span>
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-7-3-1" name="sec-7-3-1"></a>从迭代器得到序列<br  /><div class="outline-text-4" id="text-7-3-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">TestIterator</span>:
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__init__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.value=0
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">next</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">self</span>.value += 1
        <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>.value &gt; 10: <span style="color: #F0DFAF; font-weight: bold;">raise</span> <span style="color: #7CB8BB;">StopIteration</span> <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#27809;&#26377;&#36825;&#34892;&#65292;list&#20250;&#26080;&#38480;&#24490;&#29615;&#19979;&#21435;</span>
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>.value
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">__iter__</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #F0DFAF; font-weight: bold;">self</span>
<span style="color: #DFAF8F;">ti</span> = TestIterator()
<span style="color: #DCDCCC; font-weight: bold;">list</span>(ti)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; [1,2,3,4,5,6,7,8,9,10]</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> 生成器yield语句</h3>
<div class="outline-text-3" id="text-7-4">
<p class="verse">
生成器为了帮助程序员写出非常优雅的代码而出现的。<br  />
编写任何程序时不用生成器也是可以的。<br  />
生成器是一个包含yield语句的函数，当函数被调用时，函数体中的代码不会被执行，<br  />
而返回一个生成器(类似于有next()方法的迭代器)。每次调用next()请求，会执行到<br  />
yield语句并返回一个值。return语句意味着生成器要停止执行。<br  />
多用于递归。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">simpleGen</span>():
    <span style="color: #F0DFAF; font-weight: bold;">yield</span> 1
    <span style="color: #F0DFAF; font-weight: bold;">yield</span> 2
    <span style="color: #F0DFAF; font-weight: bold;">return</span>
    <span style="color: #F0DFAF; font-weight: bold;">yield</span> 3

<span style="color: #DFAF8F;">myG</span>=simpleGen()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">myG&#20026;&#29983;&#25104;&#22120;</span>
myG.<span style="color: #DCDCCC; font-weight: bold;">next</span>()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">next&#35843;&#29992;&#21040;yield&#35821;&#21477;&#24471;&#21040;&#36820;&#22238;&#20540;&#65292;&#24182;&#19988;&#20013;&#27490;&#20989;&#25968;&#36816;&#34892;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;1</span>
myG.<span style="color: #DCDCCC; font-weight: bold;">next</span>()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#32487;&#32493;&#20989;&#25968;&#36816;&#34892;&#65292;&#30693;&#36947;&#19979;&#19968;&#20010;yield&#35821;&#21477;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>
myG.<span style="color: #DCDCCC; font-weight: bold;">next</span>()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24050;&#26080;&#26410;&#25191;&#34892;&#30340;yield&#35821;&#21477;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;StopIteration exception</span>
</pre>
</div>
<p class="verse">
for循环会自动调用next()<br  />
for循环捕捉到StopIteration异常时停止。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">for</span> each <span style="color: #F0DFAF; font-weight: bold;">in</span> simpleGen():
    <span style="color: #F0DFAF; font-weight: bold;">print</span> each
1
2
</pre>
</div>
<ul class="org-ul">
<li>通过生成器直接生成列表
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">list</span>(simpleGen())
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[1,2]</span>
</pre>
</div>
<ul class="org-ul">
<li>列表推导式和生成推导式
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">g</span> = (x*x <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(2,5))<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">g&#26159;&#19968;&#20010;&#29983;&#25104;&#22120;</span>
g.<span style="color: #DCDCCC; font-weight: bold;">next</span>()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;4</span>
[x*x <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(2,5)]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[4,9,16]</span>
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-7-4-1" name="sec-7-4-1"></a>send方法<br  /><div class="outline-text-4" id="text-7-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">repeater</span>(value):
    <span style="color: #F0DFAF; font-weight: bold;">while</span> <span style="color: #BFEBBF;">True</span>:
        <span style="color: #DFAF8F;">new</span> = (<span style="color: #F0DFAF; font-weight: bold;">yield</span> value)
        <span style="color: #F0DFAF; font-weight: bold;">if</span> new <span style="color: #F0DFAF; font-weight: bold;">is</span> <span style="color: #F0DFAF; font-weight: bold;">not</span> <span style="color: #BFEBBF;">None</span>: <span style="color: #DFAF8F;">value</span> = new

<span style="color: #DFAF8F;">r</span> = repeater(42)
r.<span style="color: #DCDCCC; font-weight: bold;">next</span>()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;42</span>
r.send(<span style="color: #CC9393;">"hello world"</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">yield &#35821;&#21477;&#21518;&#30340;&#21464;&#37327;&#34987;&#36171;&#20540;&#20026;'hello world'</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'hello world'</span>
r.<span style="color: #DCDCCC; font-weight: bold;">next</span>()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'hello world'</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-7-4-2" name="sec-7-4-2"></a>throw、close方法<br  /><div class="outline-text-4" id="text-7-4-2">
<p class="verse">
throw用于在生成器内(yield)引发一个异常。<br  />
close用于关闭生成器，关闭之后执行next会接收到StopIteration异常。<br  />
</p>
</div>
</li>
<li><a id="sec-7-4-3" name="sec-7-4-3"></a>旧版的对应方法<br  /><div class="outline-text-4" id="text-7-4-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">flatten</span>(nested):
    <span style="color: #DFAF8F;">result</span>=[]
    <span style="color: #F0DFAF; font-weight: bold;">try</span>:
        <span style="color: #F0DFAF; font-weight: bold;">for</span> sublist <span style="color: #F0DFAF; font-weight: bold;">in</span> nested:
            <span style="color: #F0DFAF; font-weight: bold;">for</span> element <span style="color: #F0DFAF; font-weight: bold;">in</span> flatten(sublist):
                result.append(element)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#23545;&#24212;yield element</span>
    <span style="color: #F0DFAF; font-weight: bold;">except</span> <span style="color: #7CB8BB;">TypeError</span>:
        result.append(nested)
    <span style="color: #F0DFAF; font-weight: bold;">return</span> result
</pre>
</div>
</div>
</li>
<li><a id="sec-7-4-4" name="sec-7-4-4"></a>借助生成器解决八皇后问题<br  /><div class="outline-text-4" id="text-7-4-4">
<p>
判断最后一行，指定列号位置放入皇后后是否与之前的皇后位产生冲突
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">state[0]=3 &#34920;&#31034;&#31532;&#19968;&#34892;&#31532;&#22235;&#21015;</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">conflict</span>(state, nextX):
    <span style="color: #CC9393;">'state&#26159;&#24050;&#25918;&#32622;&#22909;&#30340;&#30343;&#21518;&#30340;&#20301;&#32622;&#20449;&#24687;&#65292;nextX&#20026;&#26032;&#22686;&#30343;&#21518;&#30340;&#34892;&#20301;&#32622;(&#23545;&#20110;&#31354;state&#20063;&#33021;&#27491;&#24120;&#36816;&#20316;)'</span>
    <span style="color: #DFAF8F;">nextY</span> = <span style="color: #DCDCCC; font-weight: bold;">len</span>(state)
    <span style="color: #F0DFAF; font-weight: bold;">for</span> i <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(0, nextY):
        <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #DCDCCC; font-weight: bold;">abs</span>(nextX-state[i]) <span style="color: #F0DFAF; font-weight: bold;">in</span> (0, nextY-i):
            <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #BFEBBF;">True</span>
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #BFEBBF;">False</span>
</pre>
</div>
<p>
递归从第一行开始逐行放入皇后，并判断是否与之前摆放完成的皇后们产生冲突
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">queens</span>(n, state=()):
    <span style="color: #F0DFAF; font-weight: bold;">for</span> pos <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">range</span>(n):
        <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #F0DFAF; font-weight: bold;">not</span> conflict(state, pos):
            <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #DCDCCC; font-weight: bold;">len</span>(state) == n-1:<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#34920;&#31034;&#20165;&#26368;&#21518;&#19968;&#20010;&#20301;&#32622;&#26410;&#25918;&#32622;&#30343;&#21518;&#65292;&#36882;&#24402;&#30340;&#26368;&#32456;&#23618;</span>
                <span style="color: #F0DFAF; font-weight: bold;">yield</span> (pos,)
            <span style="color: #F0DFAF; font-weight: bold;">else</span>:
                <span style="color: #F0DFAF; font-weight: bold;">for</span> result <span style="color: #F0DFAF; font-weight: bold;">in</span> queens(n, state + (pos,)):<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24403;&#26368;&#21518;&#19968;&#23618;yield&#20986;&#20869;&#23481;&#21518;&#65292;&#27492;&#22788;result&#25165;&#20250;&#26377;&#32467;&#26524;&#12290;</span>
                    <span style="color: #F0DFAF; font-weight: bold;">yield</span> (pos,) + result

<span style="color: #DCDCCC; font-weight: bold;">list</span>(queens(4, (1,)))
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[(3,0,2)]</span>
<span style="color: #DCDCCC; font-weight: bold;">list</span>(queens(4))
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[(1,3,0,2), (2,0,3,1)]</span>
</pre>
</div>
<p>
让输出变的漂亮一些
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">prettyprint</span>(state):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">line</span>(x, length):
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">'. '</span>*x + <span style="color: #CC9393;">'X '</span> + <span style="color: #CC9393;">'. '</span>*(length-x-1)
    <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> state:
        <span style="color: #F0DFAF; font-weight: bold;">print</span> line(x, <span style="color: #DCDCCC; font-weight: bold;">len</span>(state))

<span style="color: #F0DFAF; font-weight: bold;">import</span> random
prettyprint(random.choice(<span style="color: #DCDCCC; font-weight: bold;">list</span>(queens(4))))
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;</span>
. X . .
. . . X
X . . .
. . X .
</pre>
</div>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 模块</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> 导入自定义模块</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li>向sys.path中追加(不常用)
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> sys
sys.path.append(<span style="color: #CC9393;">'/Home/python'</span>)
</pre>
</div>
<ul class="org-ul">
<li>或者直接将模块放置在python的查找目录
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">print</span>(sys.path)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21487;&#26597;&#30475;&#24403;&#21069;python&#26597;&#35810;&#30446;&#24405;</span>
pprint.pprint(sys.path)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">pprint&#25552;&#20379;&#26356;&#21152;&#26234;&#33021;&#30340;&#25171;&#21360;&#36755;&#20986;</span>
</pre>
</div>
<p>
推荐放置在site-packages目录下
</p>
<ul class="org-ul">
<li>使用系统环境变量PYTHONPATH
</li>
</ul>
<p class="verse">
Windows用户变量中加入PYTHONPATH项<br  />
Linux下在.bashrc中追加：<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #DCDCCC; font-weight: bold;">export</span> <span style="color: #DFAF8F;">PYTHONPATH</span>=$<span style="color: #DFAF8F;">PYTHONPATH</span>:~/Home/python
</pre>
</div>

<ul class="org-ul">
<li>模块更新后，重载，使用reload()方法
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> 仅导入定义，不运行模块内程序</h3>
<div class="outline-text-3" id="text-8-2">
<p>
可在模块可执行代码前加上判断：
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #DCDCCC; font-weight: bold;">__name__</span> ==<span style="color: #CC9393;">'__main__'</span>: test()
</pre>
</div>
<p>
导入的模块的__name__值为模块名。
</p>
<div class="org-src-container">

<pre class="src src-python">hello3.<span style="color: #DCDCCC; font-weight: bold;">__name__</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'hello3'</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> 包</h3>
<div class="outline-text-3" id="text-8-3">
<p class="verse">
包就是包含模块的文件夹，要将普通的文件夹变为python包，<br  />
需要在文件夹下新建一个__init__.py的文件。<br  />
导入包中模块的方式如下：<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> package
<span style="color: #F0DFAF; font-weight: bold;">import</span> package.module1
<span style="color: #F0DFAF; font-weight: bold;">from</span> package <span style="color: #F0DFAF; font-weight: bold;">import</span> module2
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> 查看模块说明</h3>
<div class="outline-text-3" id="text-8-4">
<p>
首先，需要import对应模块，以内建copy模块为例
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> copy
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-8-4-1" name="sec-8-4-1"></a>dir查看<br  /><div class="outline-text-4" id="text-8-4-1">
<p>
dir列出模块中的类、函数和变量。
</p>
<div class="org-src-container">

<pre class="src src-python">[n <span style="color: #F0DFAF; font-weight: bold;">for</span> n <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">dir</span>(copy) <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #F0DFAF; font-weight: bold;">not</span> n.startswith(<span style="color: #CC9393;">'_'</span>)]<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#27492;&#22788;&#29992;&#21015;&#34920;&#25512;&#23548;&#24335;&#36807;&#28388;&#25481;&#20102;&#31995;&#32479;&#29992;&#30340;__&#24320;&#22836;&#30340;&#20989;&#25968;</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;['Error', 'PyStringMap', 'copy', 'deepcopy', 'dispatch_table', 'error', 'name', 't', 'weakref']</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-8-4-2" name="sec-8-4-2"></a>__all__变量<br  /><div class="outline-text-4" id="text-8-4-2">
<div class="org-src-container">

<pre class="src src-python">copy.<span style="color: #DCDCCC; font-weight: bold;">__all__</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;['Error', 'copy', 'deepcopy']</span>
</pre>
</div>
<p class="verse">
__all__是在源代码copy.py中被设置成'Error', 'copy', 'deepcopy'<br  />
__all__用来定义public interface<br  />
<br  />
如果使用from copy import *的话，只能直接使用__all__中的函数。<br  />
如要使用PyStringMap，有两种方式：<br  />
1) copy.PyStringMap<br  />
2) from copy import PyStringMap 之后调用PyStringMap即可<br  />
<br  />
编写自己的模块时，最好要指定__all__，如果未指定，import *会导入所有<br  />
非下划线开头的特性。<br  />
</p>
</div>
</li>
<li><a id="sec-8-4-3" name="sec-8-4-3"></a>help和__doc__<br  /><div class="outline-text-4" id="text-8-4-3">
<p>
help更详细一些，会有函数签名。
</p>
</div>
</li>
<li><a id="sec-8-4-4" name="sec-8-4-4"></a>查看源代码<br  /><div class="outline-text-4" id="text-8-4-4">
<p class="verse">
__file__变量存放着源代码的路径<br  />
一些模块没有__file__变量，可能是用C语言写的。<br  />
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> 核心模块</h3>
<div class="outline-text-3" id="text-8-5">
</div><ol class="org-ol"><li><a id="sec-8-5-1" name="sec-8-5-1"></a>sys<br  /><div class="outline-text-4" id="text-8-5-1">
<p class="verse">
sys.argv 获取执行程序所输入的参数列表<br  />
sys.exit(0) 退出程序，返回程序运行正常的返回值0<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">sys.path</td>
<td class="left">sys.platform</td>
<td class="left">sys.stdin/stdout/stderr</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="sec-8-5-2" name="sec-8-5-2"></a>os<br  /><div class="outline-text-4" id="text-8-5-2">
<p class="verse">
os.path子模块，负责当前操作系统的路径操作。常用os.path.split、os.path.join。<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">environ</td>
<td class="left">返回系统环境变量字典</td>
</tr>

<tr>
<td class="left">system(cmd)</td>
<td class="left">新建一个子shell，执行系统命令行</td>
</tr>

<tr>
<td class="left">sep</td>
<td class="left">路径中目录间分隔符</td>
</tr>

<tr>
<td class="left">pathsep</td>
<td class="left">各路径之间的分隔符</td>
</tr>

<tr>
<td class="left">linesep</td>
<td class="left">行分隔符</td>
</tr>
</tbody>
</table>
<p class="verse">
system(r'c:/"test app.exe"')需要将带空格的目录或文件名用引号包起来，系统才能正常识别<br  />
解决方案startfile(path)，例：os.startfile(r'c:/test app.exe')<br  />
另外， system函数根据操作系统不同执行方式也不同：<br  />
</p>
<ul class="org-ul">
<li>windows 启动外部程序后，当前python程序仍会继续执行
</li>
<li>linux 启动外部程序后，当前python程序中断，外部程序执行完后，继续执行。
</li>
</ul>
</div>
</li>

<li><a id="sec-8-5-3" name="sec-8-5-3"></a>fileinput<br  /><div class="outline-text-4" id="text-8-5-3">
<div class="org-src-container">

<pre class="src src-python">&#32473;py&#25991;&#20214;&#34892;&#26411;&#36861;&#21152;&#34892;&#21495;&#30340;&#20363;&#23376;&#65306;
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">numberlines.py</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> fileinput
<span style="color: #F0DFAF; font-weight: bold;">for</span> line <span style="color: #F0DFAF; font-weight: bold;">in</span> fileinput.<span style="color: #DCDCCC; font-weight: bold;">input</span>(inplace=<span style="color: #BFEBBF;">True</span>):
    <span style="color: #DFAF8F;">line</span> = line.rstrip()
    <span style="color: #DFAF8F;">num</span> = fileinput.lineno()
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'%-50s # %2i'</span> % (line, num)
</pre>
</div>
<p>
对自身进行编辑：
</p>
<div class="org-src-container">

<pre class="src src-sh">python  numberlines.py numberlines.py
</pre>
</div>
<p class="verse">
fileinput.input用于遍历多个输入流中的行，返回可迭代的对象。<br  />
可以用for循环，迭代对列表中的每一行进行处理。<br  />
</p>
<p>
常用方法列表：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">filename</td>
<td class="left">返回当前文件名</td>
</tr>

<tr>
<td class="left">lineno</td>
<td class="left">累积总行数</td>
</tr>

<tr>
<td class="left">filelineno</td>
<td class="left">返回当前文件行数</td>
</tr>

<tr>
<td class="left">isfirstline</td>
<td class="left">检查是否是文件第一行</td>
</tr>

<tr>
<td class="left">isstdin</td>
<td class="left">当前文件为sys.stdin时返回true</td>
</tr>

<tr>
<td class="left">nextfile</td>
<td class="left">关闭当前文件，移动到下一个文件</td>
</tr>

<tr>
<td class="left">close</td>
<td class="left">关闭序列，结束迭代</td>
</tr>
</tbody>
</table>
</div>
</li>

<li><a id="sec-8-5-4" name="sec-8-5-4"></a>time<br  /><div class="outline-text-4" id="text-8-5-4">
<p class="verse">
包含9个整数的元组表示一个时间。<br  />
(年, 月, 日, 时, 分, 秒, 周(0~6), 一年中的第几天(366), 夏令时(0,1,-1))<br  />
重要的函数列表：<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">asctime([tuple])</td>
<td class="left">将时间元组转换为字符串</td>
</tr>

<tr>
<td class="left">strptime(string[, format]</td>
<td class="left">将字符串解析成时间元组</td>
</tr>

<tr>
<td class="left">localtime([secs])</td>
<td class="left">将1970年起(具体与平台有关)秒数转换为日期元组</td>
</tr>

<tr>
<td class="left">mktime(tuple)</td>
<td class="left">将时间元组转换为秒数</td>
</tr>

<tr>
<td class="left">sleep(secs)</td>
<td class="left">休眠secs秒</td>
</tr>

<tr>
<td class="left">time()</td>
<td class="left">当前时间(1970年起的秒数，平台相关</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="sec-8-5-5" name="sec-8-5-5"></a>random<br  /><div class="outline-text-4" id="text-8-5-5">
<p class="verse">
random生成的是伪随机数。要获取真正的随机性，需调用os模块的urandom函数<br  />
random模块常用函数列表：<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">random()</td>
<td class="left">返回[0,1)之间的随机实数n</td>
</tr>

<tr>
<td class="left">getrandbits(n)</td>
<td class="left">以长整型的方式返回一个随机二进制数(位数为n)</td>
</tr>

<tr>
<td class="left">uniform(a, b)</td>
<td class="left">返回[a,b)之间的随机实数n</td>
</tr>

<tr>
<td class="left">randrange([start,]  stop [,step] )</td>
<td class="left">返回range[start, stop)中的随机整数，step必须为整数</td>
</tr>

<tr>
<td class="left">choice(seq)</td>
<td class="left">随机返回序列中的一个元素</td>
</tr>

<tr>
<td class="left">shuffle(seq[, random])</td>
<td class="left">将序列进行随机排列</td>
</tr>

<tr>
<td class="left">sample(seq, n)</td>
<td class="left">从序列中选出n个随机元素，同时保证不会选出同一个元素</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="sec-8-5-6" name="sec-8-5-6"></a>shelve<br  /><div class="outline-text-4" id="text-8-5-6">
<p>
简单的文件数据库方案。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> shelve
<span style="color: #DFAF8F;">s</span> = shelve.<span style="color: #DCDCCC; font-weight: bold;">open</span>(<span style="color: #CC9393;">'D:\\test.dat'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#21019;&#24314;&#31616;&#21333;DB&#25991;&#20214;</span>
<span style="color: #DFAF8F;">s</span>[<span style="color: #CC9393;">'x'</span>] = [<span style="color: #CC9393;">'a'</span>, <span style="color: #CC9393;">'b'</span>, <span style="color: #CC9393;">'c'</span>]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">s['x'].append('d')&#26080;&#25928;</span>

<span style="color: #DFAF8F;">temp</span> = s[<span style="color: #CC9393;">'x'</span>]
temp.append(<span style="color: #CC9393;">'d'</span>)
<span style="color: #DFAF8F;">s</span>[<span style="color: #CC9393;">'x'</span>] = temp<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24517;&#39035;&#32473;s['x']&#29305;&#24615;&#37325;&#26032;&#36171;&#20540;&#20462;&#25913;&#25165;&#33021;&#20889;&#20837;DB&#25991;&#20214;</span>
s.close()

<span style="color: #DFAF8F;">s</span> = shelve.<span style="color: #DCDCCC; font-weight: bold;">open</span>(<span style="color: #CC9393;">'D:\\test.dat'</span>)
s
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;{'x' : ['a', 'b', 'c', 'd']}</span>
</pre>
</div>
<p>
pickle模块与shelve密切相关(自动序列化相关)。
</p>
</div>
</li>
<li><a id="sec-8-5-7" name="sec-8-5-7"></a>re(regular expression)<br  /><div class="outline-text-4" id="text-8-5-7">
<p>
重要函数列表：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">compile(pattern[, flags])</td>
<td class="left">根据正则表达式字符串创建模式对象</td>
</tr>

<tr>
<td class="left">search(pattern, string[, flags])</td>
<td class="left">在字符串中寻找与模式匹配的第一个子字符串</td>
</tr>

<tr>
<td class="left">findall(pattern, string</td>
<td class="left">列出匹配的所有子字符串</td>
</tr>

<tr>
<td class="left">match(pattern, string[, flags])</td>
<td class="left">从给定字符串的开头开始匹配正则表达式</td>
</tr>

<tr>
<td class="left">split(pattern, string[, maxsplits=0]</td>
<td class="left">根据模式的匹配项分割字符串</td>
</tr>

<tr>
<td class="left">sub(pat, repl, string[, count=0])</td>
<td class="left">将所有pat模式匹配的项用repl替换</td>
</tr>

<tr>
<td class="left">escape(string)</td>
<td class="left">将正则表达式特殊字符转义</td>
</tr>
</tbody>
</table>
<p class="verse">
complie可以实现一次性创建模式对象，其余方法不必在单独创建模式对象<br  />
如pat.search(string)、pat.match(string)<br  />
</p>
</div>
<ul class="org-ul"><li><a id="sec-8-5-7-1" name="sec-8-5-7-1"></a>组的运用<br  /><div class="outline-text-5" id="text-8-5-7-1">
<p class="verse">
r'www\.(.+)\.com$'<br  />
组0表示整个字符串，组1表示(.+)的部分。<br  />
关于组的重要函数：<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">group([group1, &#x2026;])</td>
<td class="left">获取给定子模式的匹配项</td>
</tr>

<tr>
<td class="left">start([group])</td>
<td class="left">返回给定组的匹配项的开始位置</td>
</tr>

<tr>
<td class="left">end([group])</td>
<td class="left">返回结束位置</td>
</tr>

<tr>
<td class="left">span([group])</td>
<td class="left">返回给定组的开始和结束位置</td>
</tr>
</tbody>
</table>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">m</span> = match(r<span style="color: #CC9393;">'www\.(.*)\..{3}'</span>, <span style="color: #CC9393;">'www.python.org'</span>)
m.group(1)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'python'</span>
m.start(1)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;4</span>
m.end(1)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;10</span>
m.span(1)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;(4, 10)</span>
</pre>
</div>
<ul class="org-ul">
<li>运用组进行字符串替换(有用)
</li>
</ul>
<pre class="example">
考虑将'*something*'替换成'&lt;em&gt;something&lt;/em&gt;'
</pre>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">emphasis_pattern</span> = r<span style="color: #CC9393;">'\*([^\*]+)\*'</span>
re.sub(emphasis_pattern, r<span style="color: #CC9393;">'&lt;em&gt;\1&lt;/em&gt;'</span>, <span style="color: #CC9393;">'Hello, *world*!'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">\1&#20195;&#34920;&#32452;1</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'Hello, &lt;em&gt;world&lt;/em&gt;!'</span>
</pre>
</div>
<ul class="org-ul">
<li>陷阱
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">emphasis_pattern</span> = r<span style="color: #CC9393;">'\*([.+])\*'</span>
re.sub(emphasis_pattern, r<span style="color: #CC9393;">'&lt;em&gt;\1&lt;/em&gt;'</span>, <span style="color: #CC9393;">'*This* is a *test*'</span>)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'&lt;em&gt;This* is a *test&lt;/em&gt;'</span>

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#20462;&#25913;&#29256;&#27491;&#21017;&#34920;&#36798;&#24335;&#22914;&#19979;&#65306;</span>
<span style="color: #DFAF8F;">emphasis_pattern</span> = r<span style="color: #CC9393;">'\*([.+?])\*'</span><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#32452;&#20013;&#21152;&#19978;&#19968;&#20010;? &#34920;&#31034;&#23613;&#21487;&#33021;&#23569;&#30340;&#21305;&#37197;</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-8-5-7-2" name="sec-8-5-7-2"></a>Amazing Template System<br  /><div class="outline-text-5" id="text-8-5-7-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">template.py</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> fileinput, re
<span style="color: #DFAF8F;">field_pat</span> = re.<span style="color: #DCDCCC; font-weight: bold;">compile</span>(r<span style="color: #CC9393;">'\[(.+?)\]'</span>)
<span style="color: #DFAF8F;">scope</span> = {}
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">replacement</span>(match):
    <span style="color: #DFAF8F;">code</span>=match.group(1)
    <span style="color: #F0DFAF; font-weight: bold;">try</span>:
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #DCDCCC; font-weight: bold;">str</span>(<span style="color: #DCDCCC; font-weight: bold;">eval</span>(code, scope))
    <span style="color: #F0DFAF; font-weight: bold;">except</span> <span style="color: #7CB8BB;">SyntaxError</span>:
        <span style="color: #F0DFAF; font-weight: bold;">exec</span> code <span style="color: #F0DFAF; font-weight: bold;">in</span> scope
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">''</span>

<span style="color: #DFAF8F;">lines</span> = []
<span style="color: #F0DFAF; font-weight: bold;">for</span> line <span style="color: #F0DFAF; font-weight: bold;">in</span> fileinput.<span style="color: #DCDCCC; font-weight: bold;">input</span>():
    lines.append(line)
<span style="color: #DFAF8F;">text</span> = <span style="color: #CC9393;">' '</span>.join(lines)
<span style="color: #F0DFAF; font-weight: bold;">print</span> field_pat.sub(replacement, text)
</pre>
</div>
<pre class="example">
#test.txt
[x=2]
[y=3]
The sum of [x] and [y] is [x+y].
</pre>
<div class="org-src-container">

<pre class="src src-python">python template.py test.txt
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;The sum of 2 and 3 is 5</span>
</pre>
</div>
<ul class="org-ul">
<li>execfile()可直接执行含python语法定义的文本文件
</li>
<li>string模块中的Template类提供了非常完美的模板系统
</li>
</ul>
</div>
</li>
<li><a id="sec-8-5-7-3" name="sec-8-5-7-3"></a>一些提示<br  /><div class="outline-text-5" id="text-8-5-7-3">
<ul class="org-ul">
<li>pattern选项(规定出现次数)
</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">(pattern)?</td>
<td class="left">pattern为可选项</td>
</tr>

<tr>
<td class="left">(pattern)*</td>
<td class="left">允许重复0次或者多次</td>
</tr>

<tr>
<td class="left">(pattern)+</td>
<td class="left">允许重复1次或者多次</td>
</tr>

<tr>
<td class="left">(pattern){m,n}</td>
<td class="left">允许重复m~n次</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>字符串开头和结尾
</li>
</ul>
<p class="verse">
^和$分别表示匹配开头和结尾。<br  />
'^http'只匹配http开头的字符串<br  />
</p>
<ul class="org-ul">
<li>关于正则表达式的可读性(VERBOSE flag)
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">emphasis_pattern</span> = re.<span style="color: #DCDCCC; font-weight: bold;">compile</span>(r<span style="color: #CC9393;">'''</span>
<span style="color: #CC9393;">    \*    #Beginning emphasis tag -- an asterisk</span>
<span style="color: #CC9393;">    (      #Begin group for capturing phrase</span>
<span style="color: #CC9393;">    [^\*]+    #Capture anything except asterisks</span>
<span style="color: #CC9393;">    )      #End group</span>
<span style="color: #CC9393;">    \*    #Ending emphasis tag</span>
<span style="color: #CC9393;">    '''</span>, re.VERBOSE)
</pre>
</div>
<p>
VERBOSE标记会忽略空白字符、tab、注释等等
</p>
</div>
</li></ul>
</li>
<li><a id="sec-8-5-8" name="sec-8-5-8"></a>ConfigParser<br  /><div class="outline-text-4" id="text-8-5-8">
<p>
配置文件：
</p>
<pre class="example">
[numbers]
pi: 3.1415926535897931
[messages]
greeting: Welcome
</pre>
<p>
读取配置文件：
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> ConfigParser <span style="color: #F0DFAF; font-weight: bold;">import</span> ConfigParser
<span style="color: #DFAF8F;">CONFIGFILE</span> = <span style="color: #CC9393;">"testconfig.txt"</span>
<span style="color: #DFAF8F;">config</span> = ConfigParser()
config.read(CONFIGFILE)
<span style="color: #F0DFAF; font-weight: bold;">print</span> config.get(<span style="color: #CC9393;">'messages'</span>, <span style="color: #CC9393;">'greeting'</span>)
<span style="color: #F0DFAF; font-weight: bold;">print</span> config.getfloat(<span style="color: #CC9393;">'numbers'</span>, <span style="color: #CC9393;">'pi'</span>) * (4**2)
</pre>
</div>
</div>
</li>
<li><a id="sec-8-5-9" name="sec-8-5-9"></a>Logging<br  /><div class="outline-text-4" id="text-8-5-9">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> logging
logging.basicConfig(level=logging.INFO, filename=<span style="color: #CC9393;">'Mylog.log'</span>)
logging.info(<span style="color: #CC9393;">'Starting program'</span>)
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6"><span class="section-number-3">8.6</span> 其他常用模块</h3>
<div class="outline-text-3" id="text-8-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">模块名</th>
<th scope="col" class="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">cmath</td>
<td class="left">复数运算</td>
</tr>

<tr>
<td class="left">webbrowser</td>
<td class="left">可指定URL打开网页浏览器</td>
</tr>

<tr>
<td class="left">logging</td>
<td class="left">记录日志用</td>
</tr>

<tr>
<td class="left">itertools</td>
<td class="left">迭代工具</td>
</tr>

<tr>
<td class="left">bisect</td>
<td class="left">实现了二元查找</td>
</tr>

<tr>
<td class="left">functools</td>
<td class="left">包含map, filter, reduce</td>
</tr>

<tr>
<td class="left">operator</td>
<td class="left">内建的基本运算方法都在此模块</td>
</tr>

<tr>
<td class="left">inspect</td>
<td class="left">对象查看器</td>
</tr>

<tr>
<td class="left">exceptions</td>
<td class="left">异常处理</td>
</tr>

<tr>
<td class="left">webbrowser</td>
<td class="left">网络浏览器相关</td>
</tr>

<tr>
<td class="left">difflib</td>
<td class="left">序列间的比较</td>
</tr>

<tr>
<td class="left">hashlib</td>
<td class="left">根据字符串计算'签名'，多用在加密和安全性</td>
</tr>

<tr>
<td class="left">csv</td>
<td class="left">处理csv文件</td>
</tr>

<tr>
<td class="left">datetime</td>
<td class="left">time不能满足要求时使用，接口更直观</td>
</tr>

<tr>
<td class="left">cmd</td>
<td class="left">用它编写命令行解释器，可以自定义命令</td>
</tr>
</tbody>
</table>
<p>
测试分析模块
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">timeit</td>
<td class="left">衡量代码片段运行时间的工具，用于性能测试</td>
</tr>

<tr>
<td class="left">profile</td>
<td class="left">用于代码片段效率的全面分析</td>
</tr>

<tr>
<td class="left">trace</td>
<td class="left">判断哪些代码执行了，哪些未执行</td>
</tr>

<tr>
<td class="left">dis</td>
<td class="left">反汇编模块，查看对应的汇编代码</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7"><span class="section-number-3">8.7</span> 集成其他语言模块</h3>
<div class="outline-text-3" id="text-8-7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">语言</th>
<th scope="col" class="left">解决方案</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C/C++</td>
<td class="left">SWIG</td>
</tr>

<tr>
<td class="left">.Net</td>
<td class="left">IronPython</td>
</tr>

<tr>
<td class="left">Java</td>
<td class="left">JPython</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8"><span class="section-number-3">8.8</span> 可在PyPI上寻找python的最新的拓展包</h3>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 文件</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> Open</h3>
<div class="outline-text-3" id="text-9-1">
<p>
open(name[, module[, buffering]]) 返回一个文件对象
</p>
<ul class="org-ul">
<li>name 文件名
</li>
<li>module 文件模式(可选)
</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">'r'</td>
<td class="left">读模式</td>
</tr>

<tr>
<td class="left">'w'</td>
<td class="left">写模式</td>
</tr>

<tr>
<td class="left">'a'</td>
<td class="left">追加模式</td>
</tr>

<tr>
<td class="left">'b'</td>
<td class="left">二进制模式(可添加到其他模式中使用)</td>
</tr>

<tr>
<td class="left">'+'</td>
<td class="left">读写模式(可添加到其他模式中使用)</td>
</tr>
</tbody>
</table>
<p>
默认为读模式
</p>
<ul class="org-ul">
<li>buffering 缓冲(可选)
</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">0</td>
<td class="left">不使用内存缓冲，直接读写硬盘</td>
</tr>

<tr>
<td class="left">1或者任何负数</td>
<td class="left">使用内存缓冲，并且使用默认缓冲区大小</td>
</tr>

<tr>
<td class="left">大于1的数</td>
<td class="left">缓冲区大小(单位：字节)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> 文件对象的基本方法</h3>
<div class="outline-text-3" id="text-9-2">
</div><ol class="org-ol"><li><a id="sec-9-2-1" name="sec-9-2-1"></a>读和写<br  /><div class="outline-text-4" id="text-9-2-1">
<p>
在一次open-close的区块内，使用Write会重写文件内容。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">f</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(<span style="color: #CC9393;">'test.txt'</span>, <span style="color: #CC9393;">'w'</span>)
f.write(<span style="color: #CC9393;">'Append text.'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#37325;&#20889;&#25991;&#20214;&#20869;&#23481;</span>
f.write(<span style="color: #CC9393;">'Append text2.'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#36861;&#21152;&#20869;&#23481;</span>
f.close
</pre>
</div>
<p class="verse">
读取操作read，不带参数时读取全文，带数字参数时，<br  />
读取指定的字符数，并且记录当前位置，下次调用read时，<br  />
从该位置继续读取。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">f</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(<span style="color: #CC9393;">'test.txt'</span>, <span style="color: #CC9393;">'r'</span>)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">r&#20063;&#21487;&#19981;&#21152;&#65292;&#40664;&#35748;&#26159;&#35835;&#21462;&#27169;&#24335;&#25171;&#24320;</span>
f.read(4)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'Appe'</span>
f.read()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;'nd text.'</span>
f.close()
</pre>
</div>
</div>
</li>
<li><a id="sec-9-2-2" name="sec-9-2-2"></a>Pipe<br  /><div class="outline-text-4" id="text-9-2-2">
<p>
管道符号的意义：将前一个命令的stdout作为下一个命令的stdin执行
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">somescript.py</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> sys
<span style="color: #DFAF8F;">text</span> = sys.stdin.read()
<span style="color: #DFAF8F;">words</span> = text.split()
<span style="color: #DFAF8F;">wordcount</span> = <span style="color: #DCDCCC; font-weight: bold;">len</span>(words)
<span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'Wordcount:'</span>, wordcount
</pre>
</div>
<pre class="example">
# somefile.txt
abc def
ghi
</pre>
<div class="org-src-container">

<pre class="src src-sh">cat somefile.txt | python somescript.py
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;Wordcount:3</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-9-2-3" name="sec-9-2-3"></a>随机访问(seek和tell)<br  /><div class="outline-text-4" id="text-9-2-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">seek(offset[, whenrc])</td>
<td class="left">当前位置移动到offset处, whenrc:默认0从文件开头计算偏移，1从前次的位置，2从文件结尾</td>
</tr>

<tr>
<td class="left">tell()</td>
<td class="left">返回当前文件的位置(返回值类型：长整型)</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="sec-9-2-4" name="sec-9-2-4"></a>按行读写<br  /><div class="outline-text-4" id="text-9-2-4">
<ul class="org-ul">
<li>file.readline() 从当前位置开始直到一个换行符出现(换行符也会被读取)
</li>
</ul>
<p class="verse">
可选非负整数作为参数，指定可以读取的最大字符数。<br  />
readlines 返回包含所有行的列表<br  />
</p>
<ul class="org-ul">
<li>file.writelines() 参数可以是字符串序列或者None。没有writeline方法， 因为可以使用write。
</li>
</ul>
</div>
</li>
<li><a id="sec-9-2-5" name="sec-9-2-5"></a>总是关闭文件<br  /><div class="outline-text-4" id="text-9-2-5">
<ul class="org-ul">
<li>可在finally关闭文件
</li>
<li>Python 2.5中引入的with语句
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">with</span> <span style="color: #DCDCCC; font-weight: bold;">open</span>(<span style="color: #CC9393;">"somefile.txt"</span>) <span style="color: #F0DFAF; font-weight: bold;">as</span> somefile:
    do_something(somefile)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">with&#35821;&#21477;&#22359;&#32467;&#26463;&#26102;&#65292;&#20851;&#38381;somefile&#65292;&#31561;&#21516;&#20110;finally&#25928;&#26524;</span>
</pre>
</div>
<p>
事实上，支持__enter__和__exit__方法的对象，都能使用with语句。
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> 迭代处理读取内容</h3>
<div class="outline-text-3" id="text-9-3">
<p>
先定义一个处理字符串的方法，后面都会用到：
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">process</span>(string):
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'Processing: '</span>, string
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-9-3-1" name="sec-9-3-1"></a>while循环处理每个字符<br  /><div class="outline-text-4" id="text-9-3-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">f</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename)
<span style="color: #F0DFAF; font-weight: bold;">while</span> <span style="color: #BFEBBF;">True</span>:
    <span style="color: #DFAF8F;">char</span> = f.read(1)
    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #F0DFAF; font-weight: bold;">not</span> char: <span style="color: #F0DFAF; font-weight: bold;">break</span>
    process(char)
f.close()
</pre>
</div>
</div>
</li>
<li><a id="sec-9-3-2" name="sec-9-3-2"></a>while循环处理每一行<br  /><div class="outline-text-4" id="text-9-3-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">f</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename)
<span style="color: #F0DFAF; font-weight: bold;">while</span> <span style="color: #BFEBBF;">True</span>:
    <span style="color: #DFAF8F;">line</span> = f.readline()
    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #F0DFAF; font-weight: bold;">not</span> line: <span style="color: #F0DFAF; font-weight: bold;">break</span>
    process(line)
f.close()
</pre>
</div>
</div>
</li>
<li><a id="sec-9-3-3" name="sec-9-3-3"></a>一次性读取所有内容<br  /><div class="outline-text-4" id="text-9-3-3">
<p>
文件不大时使用，非常方便。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">f</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename)
<span style="color: #F0DFAF; font-weight: bold;">for</span> char <span style="color: #F0DFAF; font-weight: bold;">in</span> f.read():
    process(char)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">or</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> line <span style="color: #F0DFAF; font-weight: bold;">in</span> f.readlines():
    process(line)
f.close
</pre>
</div>
</div>
</li>
<li><a id="sec-9-3-4" name="sec-9-3-4"></a>fileinput<br  /><div class="outline-text-4" id="text-9-3-4">
<p>
fileinput是既方便又没有一次性读取的内存占用问题的解决方案。
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> fileinput
<span style="color: #F0DFAF; font-weight: bold;">for</span> line <span style="color: #F0DFAF; font-weight: bold;">in</span> fileinput.<span style="color: #DCDCCC; font-weight: bold;">input</span>(filename):
    process(line)
</pre>
</div>
</div>
</li>
<li><a id="sec-9-3-5" name="sec-9-3-5"></a>2.2版起可迭代的文件对象<br  /><div class="outline-text-4" id="text-9-3-5">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">f</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename)
<span style="color: #F0DFAF; font-weight: bold;">for</span> line <span style="color: #F0DFAF; font-weight: bold;">in</span> f:
    process(line)
f.close
</pre>
</div>
<p>
可以更懒，只要open文件是只读模式， <b>关闭文件不是必须的！</b>
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">for</span> line <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename):
    process(line)
</pre>
</div>
<p>
关闭文件交给python去完成了。
</p>
<ul class="org-ul">
<li>stdin也是可迭代的类文件对象
</li>
<li>list(open(filename)与readlines达到的效果一样
</li>
<li>firstline, secondline = open(filename) 直接解包放入变量中
</li>
</ul>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> 多线程</h2>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> GUI</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> GUI库比较</h3>
<div class="outline-text-3" id="text-11-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Tkinter</td>
<td class="left">老牌GUI库，半标准。跨平台</td>
</tr>

<tr>
<td class="left">wxPython</td>
<td class="left">易用，代码清晰。跨平台。Tkinter的替代方案</td>
</tr>

<tr>
<td class="left">PythonWin</td>
<td class="left">只支持windows平台</td>
</tr>

<tr>
<td class="left">Java Swing</td>
<td class="left">只能用于Jython</td>
</tr>

<tr>
<td class="left">PyGTK</td>
<td class="left">使用GTK平台。</td>
</tr>

<tr>
<td class="left">PyQt</td>
<td class="left">使用QT平台。跨平台</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2"><span class="section-number-3">11.2</span> wxPython</h3>
<div class="outline-text-3" id="text-11-2">
</div><ol class="org-ol"><li><a id="sec-11-2-1" name="sec-11-2-1"></a>安装<br  /><div class="outline-text-4" id="text-11-2-1">
<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install python-wxgtk2.8 python-wxtools wx2.8-i18n
sudo apt-get install libwxgtk2.8-dev libgtk2.0-dev (optional)

<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">ln -s /usr/lib/python2.7/dist-packages/wx.pth ./virtualenv/.../wx.pth</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">ln -s /usr/lib/python2.7/dist-packages/wxversion.py ./virtualenv/.../wxversion.py</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">ln -s /usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode ./virtualenv/.../wx-2.8-gtk2-unicode</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-11-2-2" name="sec-11-2-2"></a>控件布局图<br  /><div class="outline-text-4" id="text-11-2-2">

<div class="figure">
<p><img src="../resources/python/HierarchyOfElements.png" alt="HierarchyOfElements.png" />
</p>
</div>
</div>
</li>
<li><a id="sec-11-2-3" name="sec-11-2-3"></a>自适应控件布局<br  /><div class="outline-text-4" id="text-11-2-3">

<div class="figure">
<p><img src="../resources/python/SizersExample.png" alt="SizersExample.png" />
</p>
</div>
</div>
</li>
<li><a id="sec-11-2-4" name="sec-11-2-4"></a>简单文本编辑器示例<br  /><div class="outline-text-4" id="text-11-2-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> wx
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">load button event handler</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">load</span>(event):
    <span style="color: #DCDCCC; font-weight: bold;">file</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename.GetValue())
    contents.SetValue(<span style="color: #DCDCCC; font-weight: bold;">file</span>.read())
    <span style="color: #DCDCCC; font-weight: bold;">file</span>.close()

<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">save button event handler</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">save</span>(event):
    <span style="color: #DCDCCC; font-weight: bold;">file</span> = <span style="color: #DCDCCC; font-weight: bold;">open</span>(filename.GetValue(), <span style="color: #CC9393;">'w'</span>)
    <span style="color: #DCDCCC; font-weight: bold;">file</span>.write(contents.GetValue())
    <span style="color: #DCDCCC; font-weight: bold;">file</span>.close()

<span style="color: #DFAF8F;">app</span> = wx.App()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#27599;&#20010;wxPython&#31243;&#24207;&#37117;&#26159;&#19968;&#20010;wx.App&#30340;&#23454;&#20363;</span>
<span style="color: #DFAF8F;">win</span> = wx.Frame(<span style="color: #BFEBBF;">None</span>, title = <span style="color: #CC9393;">'Simple Editor'</span>, size=(410,335))

<span style="color: #DFAF8F;">bkg</span> = wx.Panel(win)

<span style="color: #DFAF8F;">loadButton</span> = wx.Button(bkg, label=<span style="color: #CC9393;">'Open'</span>)
loadButton.Bind(wx.EVT_BUTTON, load)

<span style="color: #DFAF8F;">saveButton</span> = wx.Button(bkg, label=<span style="color: #CC9393;">'Save'</span>)
saveButton.Bind(wx.EVT_BUTTON, save)

<span style="color: #DFAF8F;">filename</span> = wx.TextCtrl(bkg)
<span style="color: #DFAF8F;">contents</span> = wx.TextCtrl(bkg, style=wx.TE_MULTILINE | wx.HSCROLL)

<span style="color: #DFAF8F;">hbox</span> = wx.BoxSizer()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#33258;&#36866;&#24212;&#27700;&#24179;BoxSizer</span>
hbox.Add(filename, proportion=1, flag=wx.EXPAND)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">proportion&#34920;&#31034;&#25152;&#21344;&#24403;&#21069;BoxSizer&#30340;&#27604;&#20363;</span>
hbox.Add(loadButton, proportion=0, flag=wx.LEFT, border=5)
hbox.Add(saveButton, proportion=0, flag=wx.LEFT, border=5)

<span style="color: #DFAF8F;">vbox</span> = wx.BoxSizer(wx.VERTICAL)<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#33258;&#36866;&#24212;&#22402;&#30452;BoxSizer</span>
vbox.Add(hbox, proportion=0, flag=wx.EXPAND | wx.ALL, border=5)
vbox.Add(contents, proportion=1,
         flag=wx.EXPAND | wx.LEFT | wx.BOTTOM | wx.Right, border=5)

bkg.SetSizer(vbox)
win.Show()

app.MainLoop()<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">&#24320;&#22987;MainLoop&#65292;&#23427;&#30340;&#35282;&#33394;&#26159;&#22788;&#29702;&#20107;&#20214;</span>
</pre>
</div>

<div class="figure">
<p><img src="../resources/python/SampleEditor.png" alt="SampleEditor.png" />
</p>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3"><span class="section-number-3">11.3</span> Qt</h3>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> 数据库</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1"><span class="section-number-3">12.1</span> 连接</h3>
<div class="outline-text-3" id="text-12-1">
<p>
连接参数列表
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">dsn</td>
<td class="left">数据源名称(必填项)</td>
</tr>

<tr>
<td class="left">user</td>
<td class="left">用户名</td>
</tr>

<tr>
<td class="left">password</td>
<td class="left">用户密码</td>
</tr>

<tr>
<td class="left">host</td>
<td class="left">主机名</td>
</tr>

<tr>
<td class="left">database</td>
<td class="left">数据库名</td>
</tr>
</tbody>
</table>
<p>
connect函数返回连接对象，连接对象支持的方法如下：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">close()</td>
<td class="left">关闭连接</td>
</tr>

<tr>
<td class="left">commit()</td>
<td class="left">提交挂起的事务，数据库不支持则什么也不做</td>
</tr>

<tr>
<td class="left">rollback()</td>
<td class="left">回滚挂起的事务(可能数据库不支持)</td>
</tr>

<tr>
<td class="left">cursor()</td>
<td class="left">返回连接的游标对象</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2"><span class="section-number-3">12.2</span> 查询</h3>
<div class="outline-text-3" id="text-12-2">
<p>
查询主要靠游标对象，cursor()返回游标对象，支持方法有：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">callproc(name[, params])</td>
<td class="left">使用给定的名字(参数可选)调用已命名的数据库程序</td>
</tr>

<tr>
<td class="left">close()</td>
<td class="left">关闭游标</td>
</tr>

<tr>
<td class="left">execute(oper[, params])</td>
<td class="left">执行SQL操作</td>
</tr>

<tr>
<td class="left">executemany(oper, pseq)</td>
<td class="left">执行SQL序列</td>
</tr>

<tr>
<td class="left">fetchone()</td>
<td class="left">把查询结果中的下一行保存为序列，或者None</td>
</tr>

<tr>
<td class="left">fetchmany([size])</td>
<td class="left">获取查询结果中的多行，默认尺寸arraysize</td>
</tr>

<tr>
<td class="left">fetchall()</td>
<td class="left">将(剩余)所有的行输出[序列的序列]</td>
</tr>

<tr>
<td class="left">nextset()</td>
<td class="left">跳至下一个可用的结果集</td>
</tr>

<tr>
<td class="left">setinputsizes(sizes)</td>
<td class="left">为参数预先定义内存区域</td>
</tr>

<tr>
<td class="left">setoutputsize(size[, col])</td>
<td class="left">为获取的大数据值设定缓冲区尺寸</td>
</tr>
</tbody>
</table>
<p>
游标对象特性：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">description</td>
<td class="left">结果列描述的序列(只读)</td>
</tr>

<tr>
<td class="left">rowcount</td>
<td class="left">结果中的行数(只读)</td>
</tr>

<tr>
<td class="left">arraysize</td>
<td class="left">fetchmany中返回的行数，默认为1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3"><span class="section-number-3">12.3</span> 数据类型</h3>
<div class="outline-text-3" id="text-12-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">ROWID</td>
<td class="left">行ID列</td>
</tr>

<tr>
<td class="left">NUMBER</td>
<td class="left">数字列</td>
</tr>

<tr>
<td class="left">BINARY</td>
<td class="left">二进制列</td>
</tr>

<tr>
<td class="left">STRING</td>
<td class="left">字符串列</td>
</tr>

<tr>
<td class="left">DATETIME</td>
<td class="left">日期/时间列</td>
</tr>
</tbody>
</table>
<p>
类型构造函数
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Date(year, month, day)</td>
</tr>

<tr>
<td class="left">Time(hour, minute, second)</td>
</tr>

<tr>
<td class="left">Timestamp(y, mon, d, h, min, s)</td>
</tr>

<tr>
<td class="left">DateFromTicks(ticks)</td>
</tr>

<tr>
<td class="left">TimeFromTicks(ticks)</td>
</tr>

<tr>
<td class="left">TimestampFromTicks(ticks)</td>
</tr>

<tr>
<td class="left">Binary(string)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-12-4" class="outline-3">
<h3 id="sec-12-4"><span class="section-number-3">12.4</span> 示例</h3>
<div class="outline-text-3" id="text-12-4">
</div><ol class="org-ol"><li><a id="sec-12-4-1" name="sec-12-4-1"></a>SQLite<br  /><div class="outline-text-4" id="text-12-4-1">
<div class="org-src-container">

<pre class="src src-sh">sqlite3 test.db
sqlite&gt; create table tbl1(one varchar(10), two smallint);
sqlite&gt; insert into tbl1 values(<span style="color: #CC9393;">'hello!'</span>, 10);
sqlite&gt; insert into tbl1 values(<span style="color: #CC9393;">'goodbye'</span>, 20);
sqlite&gt; select * from tbl1;
hello!|10
goodbye|20
</pre>
</div>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> sqlite3
<span style="color: #DFAF8F;">conn</span> = sqlite3.connect(r<span style="color: #CC9393;">'test.db'</span>)
<span style="color: #DFAF8F;">curs</span> = conn.cursor()
curs.execute(<span style="color: #CC9393;">'Select * from tbl1'</span>)
 <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&lt;sqlite3.Cursor object at 0x01D1DA60&gt;</span>
curs.fetchall()
 <span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[(u'hello!', 10), (u'goodbye', 20)]</span>
curs.execute(<span style="color: #CC9393;">'Insert into tbl1 values (\'greeting!\', 40)'</span>)
curs.fetchall()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;[(u'hello!', 10), (u'goodbye', 20), (u'greeting!', 40)]</span>
conn.commit()
conn.close()
</pre>
</div>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> 网络</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1"><span class="section-number-3">13.1</span> socket</h3>
<div class="outline-text-3" id="text-13-1">
</div><ol class="org-ol"><li><a id="sec-13-1-1" name="sec-13-1-1"></a>构造<br  /><div class="outline-text-4" id="text-13-1-1">
<p>
socket对象可选参数列表：
</p>
<ol class="org-ol">
<li>地址族 默认socket.AF_INET
</li>
<li>流  默认socket.SOCK_STREAM(基于TCP) 或者 数据报 socket.SOCK_DGRAM(基于UDP)
</li>
<li>使用的协议 默认0
</li>
</ol>
</div>
</li>
<li><a id="sec-13-1-2" name="sec-13-1-2"></a>Server<br  /><div class="outline-text-4" id="text-13-1-2">
<ul class="org-ul">
<li>bind 绑定地址，参数为(host, port)元组
</li>
<li>listen 只有一个参数，指定允许排队等待的连接数目
</li>
<li>accept
</li>
</ul>
<p class="verse">
该方法会阻塞直到有客户端连接，而后返回一个(client, address)的元组。<br  />
当前accept处理完之后，会调用另一个accept()，即队列方式。<br  />
注意：使用这种方式称为同步网络编程。<br  />
</p>
</div>
</li>
<li><a id="sec-13-1-3" name="sec-13-1-3"></a>send, recv<br  /><div class="outline-text-4" id="text-13-1-3">
<ul class="org-ul">
<li>send 参数传入字符串
</li>
<li>recv 参数传入接收数据的最大字符数，1024是个较好的选择。
</li>
</ul>
</div>
</li>
<li><a id="sec-13-1-4" name="sec-13-1-4"></a>简单示例<br  /><div class="outline-text-4" id="text-13-1-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">socket server test</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> socket
<span style="color: #DFAF8F;">s</span> = socket.socket()
<span style="color: #DFAF8F;">host</span> = socket.gethostname()
<span style="color: #DFAF8F;">port</span> =1234

s.bind((host, port))
s.listen(5)
<span style="color: #F0DFAF; font-weight: bold;">while</span> <span style="color: #BFEBBF;">True</span>:
    <span style="color: #DFAF8F;">c</span>, <span style="color: #DFAF8F;">addr</span> = s.accept()
    <span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'Got connection from'</span>, addr
    c.send(<span style="color: #CC9393;">'Thank you for connectin'</span>)
    c.close()
</pre>
</div>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">socket client test</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> socket
<span style="color: #DFAF8F;">s</span> = socket.socket()
<span style="color: #DFAF8F;">host</span> = socket.gethostname()
<span style="color: #DFAF8F;">port</span> = 1234

s.connect((host, port))
<span style="color: #F0DFAF; font-weight: bold;">print</span> s.recv(1024)
s.close()
</pre>
</div>
<p>
命令行调用结果：
</p>
<ul class="org-ul">
<li>Server端

<div class="figure">
<p><img src="../resources/python/SocketServerResult.png" alt="SocketServerResult.png" />
</p>
</div>
</li>
<li>Client端：

<div class="figure">
<p><img src="../resources/python/SocketClientResult.png" alt="SocketClientResult.png" />
</p>
</div>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-13-2" class="outline-3">
<h3 id="sec-13-2"><span class="section-number-3">13.2</span> urllib, urllib2</h3>
<div class="outline-text-3" id="text-13-2">
<p class="verse">
这两个模块几乎可以把任何URL所指向的东西用做程序的输入。<br  />
urllib2更好一些，需要使用http验证、cookie或者要为自己的协议<br  />
写扩展程序时，使用urllib2。<br  />
</p>
<ul class="org-ul">
<li>urllib.urlopen(url) 返回一个类文件对象
</li>
<li>urllib.urlretrieve(url, filename) 将url获取的内容保存成本地文件
</li>
</ul>
<p class="verse">
注意：filename默认None，不指定的话，文件会临时存放在某位置，<br  />
用open函数可以打开它。清理临时文件，调用urlcleanup函数。<br  />
</p>
<p>
urllib的其他一些功能：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">quote(string[, safe])</td>
<td class="left">负责转移成url字符串</td>
</tr>

<tr>
<td class="left">quote_plus(string[, safe])</td>
<td class="left">在quote的基础上，将空格转为'+'</td>
</tr>

<tr>
<td class="left">unquote(string)</td>
<td class="left">与quote相反</td>
</tr>

<tr>
<td class="left">unquote_plus(string)</td>
<td class="left">与quote_plus相反</td>
</tr>

<tr>
<td class="left">urlencode(query[, doseq]</td>
<td class="left">把映射或者包含两个元素的元组的序列转换成URL格式字符串</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-13-3" class="outline-3">
<h3 id="sec-13-3"><span class="section-number-3">13.3</span> webservice</h3>
</div>
<div id="outline-container-sec-13-4" class="outline-3">
<h3 id="sec-13-4"><span class="section-number-3">13.4</span> 其他网络模块</h3>
<div class="outline-text-3" id="text-13-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">asyncore</td>
<td class="left">异步socket处理程序</td>
</tr>

<tr>
<td class="left">asynchat</td>
<td class="left">asynchat的加强版</td>
</tr>

<tr>
<td class="left">cgi</td>
<td class="left">基本的CGI支持</td>
</tr>

<tr>
<td class="left">Cookie</td>
<td class="left">Cookie对象操作，主要用于服务器</td>
</tr>

<tr>
<td class="left">cookielib</td>
<td class="left">客户端cookie支持</td>
</tr>

<tr>
<td class="left">email</td>
<td class="left">E-mail消息支持</td>
</tr>

<tr>
<td class="left">ftplib</td>
<td class="left">FTP客户端模块</td>
</tr>

<tr>
<td class="left">httplib</td>
<td class="left">HTTP客户端模块</td>
</tr>

<tr>
<td class="left">imaplib</td>
<td class="left">IMAP4客户端模块</td>
</tr>

<tr>
<td class="left">mailbox</td>
<td class="left">读取几种邮箱的格式</td>
</tr>

<tr>
<td class="left">nntplib</td>
<td class="left">NNTP客户端模块</td>
</tr>

<tr>
<td class="left">poplib</td>
<td class="left">POP客户端模块</td>
</tr>

<tr>
<td class="left">robotparser</td>
<td class="left">支持解析Web服务器的robot文件</td>
</tr>

<tr>
<td class="left">SimpleXMLRPCServer</td>
<td class="left">简单的XML-RPC服务器</td>
</tr>

<tr>
<td class="left">smtpd</td>
<td class="left">SMTP服务器模块</td>
</tr>

<tr>
<td class="left">smtplib</td>
<td class="left">SMTP客户端模块</td>
</tr>

<tr>
<td class="left">telnetlib</td>
<td class="left">Telnet客户端模块</td>
</tr>

<tr>
<td class="left">urlparse</td>
<td class="left">支持解析URL</td>
</tr>

<tr>
<td class="left">xmlrpclib</td>
<td class="left">XML-RPC的客户端支持</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> 测试</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1"><span class="section-number-3">14.1</span> 调试</h3>
<div class="outline-text-3" id="text-14-1">
</div><ol class="org-ol"><li><a id="sec-14-1-1" name="sec-14-1-1"></a>命令行方式<br  /><div class="outline-text-4" id="text-14-1-1">
<p>
启动调试器python -m pdb test.py
</p>
</div>
</li>
<li><a id="sec-14-1-2" name="sec-14-1-2"></a>IDLE方式<br  /><div class="outline-text-4" id="text-14-1-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">__DEBUG</span> = <span style="color: #BFEBBF;">True</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">test</span>():
    <span style="color: #DFAF8F;">a</span> = 5
    <span style="color: #F0DFAF; font-weight: bold;">if</span> __DEBUG:
        <span style="color: #F0DFAF; font-weight: bold;">import</span> pdb
        pdb.set_trace()
    <span style="color: #DFAF8F;">b</span> = 4
    <span style="color: #F0DFAF; font-weight: bold;">print</span> a + b
</pre>
</div>
<pre class="example">
pdb.run('mymodule.test()')
&gt; &lt;string&gt;(1)&lt;module&gt;()
(Pdb) c
&gt; d:\home\temp\mymodule.py(7)test()
-&gt; b = 4
(Pdb) l
  2     def test():
  3         a = 5
  4         if __DEBUG:
  5             import pdb
  6             pdb.set_trace()
  7  -&gt;     b = 4
  8         print a + b
  9
[EOF]
</pre>
</div>
</li>
<li><a id="sec-14-1-3" name="sec-14-1-3"></a>常用指令<br  /><div class="outline-text-4" id="text-14-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">命令</td>
<td class="left">用途</td>
</tr>

<tr>
<td class="left">break 或 b</td>
<td class="left">设置断点</td>
</tr>

<tr>
<td class="left">continue   或 c</td>
<td class="left">继续执行程序</td>
</tr>

<tr>
<td class="left">list 或 l</td>
<td class="left">查看当前行的代码段</td>
</tr>

<tr>
<td class="left">step 或 s</td>
<td class="left">进入函数</td>
</tr>

<tr>
<td class="left">return 或 r</td>
<td class="left">执行代码直到从当前函数返回</td>
</tr>

<tr>
<td class="left">exit 或 q</td>
<td class="left">中止并退出</td>
</tr>

<tr>
<td class="left">next 或 n</td>
<td class="left">执行下一行</td>
</tr>

<tr>
<td class="left">pp</td>
<td class="left">打印变量的值</td>
</tr>

<tr>
<td class="left">help</td>
<td class="left">帮助</td>
</tr>
</tbody>
</table>
</div>
</li></ol>
</div>

<div id="outline-container-sec-14-2" class="outline-3">
<h3 id="sec-14-2"><span class="section-number-3">14.2</span> doctest</h3>
<div class="outline-text-3" id="text-14-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">mytest.py</span>
<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">square</span>(x):
    <span style="color: #CC9393;">'''</span>
<span style="color: #CC9393;">    Square a number and returns the result.</span>

<span style="color: #CC9393;">    &gt;&gt;&gt; square(2)</span>
<span style="color: #CC9393;">    4</span>
<span style="color: #CC9393;">    &gt;&gt;&gt; square(3)</span>
<span style="color: #CC9393;">    8</span>
<span style="color: #CC9393;">    '''</span>
    <span style="color: #F0DFAF; font-weight: bold;">return</span> x*x

<span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #DCDCCC; font-weight: bold;">__name__</span>==<span style="color: #CC9393;">'__main__'</span>:
    <span style="color: #F0DFAF; font-weight: bold;">import</span> doctest, mytest
    doctest.testmod(mytest)
</pre>
</div>
<p>
以上例子，doctest.testmod会检查文档中'&gt;&gt;&gt;'，并执行例子进行检查。
</p>
<pre class="example">
$ python mytest.py

**********************************************************************
File "/home/chrischen/temp/mytest.py", line 7, in mytest.square
Failed example:
    square(3)
Expected:
    8
Got:
    9
**********************************************************************
1 items had failures:
   1 of   2 in mytest.square
***Test Failed*** 1 failures.
</pre>
<p>
python mytest.py -v 可以获得更多输出。
</p>
</div>
</div>
<div id="outline-container-sec-14-3" class="outline-3">
<h3 id="sec-14-3"><span class="section-number-3">14.3</span> unittest</h3>
<div class="outline-text-3" id="text-14-3">
<p>
假设要写一个模块，my_math，测试其中计算乘积的函数product。&lt;
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> unittest, my_math
<span style="color: #F0DFAF; font-weight: bold;">class</span> <span style="color: #7CB8BB;">ProductTestCase</span>(unittest.TestCase):
    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">testIntegers</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">xrange</span>(-10, 10):
            <span style="color: #F0DFAF; font-weight: bold;">for</span> y <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">xrange</span>(-10, 10):
                <span style="color: #DFAF8F;">p</span>=my_math.product(x, y)
                <span style="color: #F0DFAF; font-weight: bold;">self</span>.failUnless(p == x*y, <span style="color: #CC9393;">'Integer multiplication failed'</span>)

    <span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #93E0E3;">testFloats</span>(<span style="color: #F0DFAF; font-weight: bold;">self</span>):
        <span style="color: #F0DFAF; font-weight: bold;">for</span> x <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">xrange</span>(-10, 10):
            <span style="color: #F0DFAF; font-weight: bold;">for</span> y <span style="color: #F0DFAF; font-weight: bold;">in</span> <span style="color: #DCDCCC; font-weight: bold;">xrange</span>(-10, 10):
                <span style="color: #DFAF8F;">x</span> = x/10.0
                <span style="color: #DFAF8F;">y</span> = y/10.0
                <span style="color: #DFAF8F;">p</span> = my_math.product(x, y)
                <span style="color: #F0DFAF; font-weight: bold;">self</span>.failUnless(p == x*y, <span style="color: #CC9393;">'Float multiplication failed'</span>)

    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #DCDCCC; font-weight: bold;">__name__</span> == <span style="color: #CC9393;">'__main__'</span>: unittest.main()
</pre>
</div>
<p class="verse">
unittest.main()负责实例化所有unittest.TestCase的子类，运行所有名字以test开头的函数。<br  />
failUnless检查结果给出错误提示。下表列出其他的检查方法：<br  />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">assert_(expr[, msg]), failUnless</td>
<td class="left">如果表达式为假则失败</td>
</tr>

<tr>
<td class="left">failIf(expr[, msg])</td>
<td class="left">与assert相反</td>
</tr>

<tr>
<td class="left">assertEqual(x, y[, msg]), failUnlessEqual</td>
<td class="left">两个值不同则失败</td>
</tr>

<tr>
<td class="left">assertNotEqual(x, y[,msg]), failIfEqual</td>
<td class="left">两个值相同则失败</td>
</tr>

<tr>
<td class="left">assertAlmostEqual(x,y[, places[,msg]]), failUnlessAlmostEqual</td>
<td class="left">类似于assertEqual，处理float的方式上不同</td>
</tr>

<tr>
<td class="left">assertNotAlmostEqual(x,y[, places[,msg]]), failIfAlmostEqual</td>
<td class="left">与assertAlmostEqual相反</td>
</tr>

<tr>
<td class="left">assertRaises(exc, callable, &#x2026;), failUnlessRaises</td>
<td class="left">调用callable，引发exc异常，则成功；否则失败</td>
</tr>

<tr>
<td class="left">fail([msg])</td>
<td class="left">无条件失败</td>
</tr>
</tbody>
</table>
<p>
unittest模块会区分由异常引发的错误和调用failUnless而导致的失败。
</p>
</div>
</div>
<div id="outline-container-sec-14-4" class="outline-3">
<h3 id="sec-14-4"><span class="section-number-3">14.4</span> 代码检查</h3>
<div class="outline-text-3" id="text-14-4">
</div><ol class="org-ol"><li><a id="sec-14-4-1" name="sec-14-4-1"></a>PyLint<br  /><div class="outline-text-4" id="text-14-4-1">
<p class="verse">
需先安装astng和logilab-common<br  />
安装方式都是：python setup.py install<br  />
使用pylint modulename：<br  />
python my_math<br  />
报告包含：Raw metrics、Statistics by type、Duplication、Messages by category、Messages、Global evaluation<br  />
PyLint的更多功能<br  />
</p>
<ul class="org-ul">
<li>pyreverse: an UML diagram generator
</li>
<li>symilar: an independent similarities checker
</li>
<li><b>epylint</b>: Emacs and Flymake compatible Pylint
</li>
<li>pylint-gui: a graphical interface
</li>
</ul>
<p class="verse">
还可以选择PyChecker，更老牌的代码检查工具。<br  />
在Python中使用命令行工具的方式是使用subprocess模块。<br  />
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-14-5" class="outline-3">
<h3 id="sec-14-5"><span class="section-number-3">14.5</span> 性能测试</h3>
<div class="outline-text-3" id="text-14-5">
</div><ol class="org-ol"><li><a id="sec-14-5-1" name="sec-14-5-1"></a>profile模块(标准库)<br  /><div class="outline-text-4" id="text-14-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> profile
<span style="color: #F0DFAF; font-weight: bold;">from</span> my_math <span style="color: #F0DFAF; font-weight: bold;">import</span> product
profile.run(<span style="color: #CC9393;">'product(1, 2)'</span>)
</pre>
</div>
<p>
结果如下：
</p>
<pre class="example">
4 function calls in 0.024 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.024    0.024    0.024    0.024 :0(setprofile)
     1    0.000    0.000    0.000    0.000 &lt;string&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.000    0.000 my_math.py:1(product)
     1    0.000    0.000    0.024    0.024 profile:0(product(1, 2))
     0    0.000             0.000          profile:0(profiler)
</pre>
<ul class="org-ul">
<li>还可以以编程的方式分析结果
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">import</span> pstats
<span style="color: #DFAF8F;">p</span> = pstats.Stats(<span style="color: #CC9393;">'my_math.profile'</span>)
</pre>
</div>
<p>
对p对象进行分析即可。
</p>
<ul class="org-ul">
<li>另一个选择hotshot模块
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-14-6" class="outline-3">
<h3 id="sec-14-6"><span class="section-number-3">14.6</span> 其他可选工具</h3>
<div class="outline-text-3" id="text-14-6">
<p>
py.test, nose, trace.py(覆盖率), PyUnit(GUI单元测试)
</p>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> 发布程序</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1"><span class="section-number-3">15.1</span> 制作安装脚本</h3>
<div class="outline-text-3" id="text-15-1">
<p>
使用distutils模块编写setup.py
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">from</span> distutils.core <span style="color: #F0DFAF; font-weight: bold;">import</span> setup
setup(name=<span style="color: #CC9393;">'my_math'</span>,
      version=<span style="color: #CC9393;">'1.0'</span>,
      description=<span style="color: #CC9393;">'A simple example'</span>,
      author=<span style="color: #CC9393;">'ChrisChen'</span>,
      py_modules=[<span style="color: #CC9393;">'my_math'</span>])
</pre>
</div>
<pre class="example">
python setup.py install
</pre>
<p class="verse">
setuptools项目基于distutils，但提供了更多的功能。<br  />
另外，目前为止，没有标准的Uninstall命令。需要手动卸载。<br  />
</p>
</div>
</div>
<div id="outline-container-sec-15-2" class="outline-3">
<h3 id="sec-15-2"><span class="section-number-3">15.2</span> 制作安装包</h3>
<div class="outline-text-3" id="text-15-2">
<ul class="org-ul">
<li>使用命令制作压缩包：
</li>
</ul>
<pre class="example">
python setup.py sdist
</pre>
<ul class="org-ul">
<li>关于MANIFEST文件
</li>
</ul>
<p class="verse">
在创建发布程序的时候，程序同时自动创建MANIFEST文件，该文件<br  />
包含所有文件的列表。<br  />
在此之前可以提供MANIFEST.in文件作为输入，此文件时MANIFEST 的模板。<br  />
可以用如下命令来指定需要包含的文件。<br  />
</p>
<pre class="example">
include somedir/somefile.txt
include somedir/*
</pre>
<ul class="org-ul">
<li>MANIFEST的更新
</li>
</ul>
<p class="verse">
当需发布的文件目录发生改变时，需要手动删除由发布程序自动生成的MANIFEST<br  />
文件，要不然发布程序会直接读取之前的MANIFEST文件，而不会重新生成。<br  />
</p>
<ul class="org-ul">
<li>Windows发布
</li>
</ul>
<pre class="example">
python setup.py bdist --format=wininst
</pre>
<p>
直接产生一个win32exe文件。注意用此方式发布的安装包非常基础。
</p>
<ul class="org-ul">
<li>Linux RPM发布
</li>
</ul>
<pre class="example">
python setup.py bdist --format=rpm
</pre>
</div>
</div>
<div id="outline-container-sec-15-3" class="outline-3">
<h3 id="sec-15-3"><span class="section-number-3">15.3</span> py2exe</h3>
<div class="outline-text-3" id="text-15-3">
<p class="verse">
py2exe直接将python运行环境打包，用户不必单独安装python解释器。<br  />
配合Inno Setup可完成“真正的安装程序”。<br  />
</p>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> 实用的内建函数</h2>
<div class="outline-text-2" id="text-16">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">函数</th>
<th scope="col" class="left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">dir([obj])</td>
<td class="left">显示对象的属性，参数省略时，显示全局变量名</td>
</tr>

<tr>
<td class="left">help([obj])</td>
<td class="left">显示对象的文档字符串</td>
</tr>

<tr>
<td class="left">int(obj)</td>
<td class="left">将一个对象转换为整形</td>
</tr>

<tr>
<td class="left">len(obj)</td>
<td class="left">返回对象的长度</td>
</tr>

<tr>
<td class="left">open(fn, mode)</td>
<td class="left">以相应的mode方式(r读w写)打开一个文件名为fn的文件</td>
</tr>

<tr>
<td class="left">range([start,] stop [,step]</td>
<td class="left">返回整数列表，起始值start，结束值stop-1，步长step</td>
</tr>

<tr>
<td class="left">raw_input([str])</td>
<td class="left">等待用户输入一个字符串，str为提示信息</td>
</tr>

<tr>
<td class="left">str(obj)</td>
<td class="left">将一个对象转换为字符串</td>
</tr>

<tr>
<td class="left">type(obj)</td>
<td class="left">返回对象的类型(返回值本身是一个type对象)</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-sec-16-1" class="outline-3">
<h3 id="sec-16-1"><span class="section-number-3">16.1</span> pass</h3>
<div class="outline-text-3" id="text-16-1">
<p class="verse">
pass 函数什么事情都不做 用作预留占位符<br  />
python空代码块是非法的。需要如下做：<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">if</span> x==0:
    <span style="color: #F0DFAF; font-weight: bold;">pass</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-16-2" class="outline-3">
<h3 id="sec-16-2"><span class="section-number-3">16.2</span> del</h3>
<div class="outline-text-3" id="text-16-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">x</span>=1
<span style="color: #F0DFAF; font-weight: bold;">del</span> x
x
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&#25253;&#38169;&#65292;del&#19981;&#20294;&#21024;&#38500;&#20869;&#23481;&#65292;&#20063;&#21024;&#38500;&#21464;&#37327;&#21517;</span>
<span style="color: #DFAF8F;">x</span>=1
<span style="color: #DFAF8F;">y</span>=x
<span style="color: #F0DFAF; font-weight: bold;">del</span> x
y
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;1 &#21407;&#22240;&#65306;&#35813;&#24773;&#20917;del&#21482;&#21024;&#38500;&#20102;&#21517;&#31216;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-16-3" class="outline-3">
<h3 id="sec-16-3"><span class="section-number-3">16.3</span> exec和eval</h3>
<div class="outline-text-3" id="text-16-3">
<ul class="org-ul">
<li>exec
</li>
</ul>
<p class="verse">
exec执行字符串中的python语句<br  />
(风险极大，慎重，并且是很严重的安全漏洞)<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">exec</span> <span style="color: #CC9393;">"print 'Hello,world!'"</span>
</pre>
</div>
<p>
字符串代码，单独一个命名空间
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">scope</span>={}
<span style="color: #F0DFAF; font-weight: bold;">exec</span> <span style="color: #CC9393;">'sqrt = 1'</span> <span style="color: #F0DFAF; font-weight: bold;">in</span> scope
scope[<span style="color: #CC9393;">'sqrt'</span>]
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;1</span>
<span style="color: #DCDCCC; font-weight: bold;">len</span>(scope)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;2</span>
scope.keys()
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt; ['sqrt', '__builtins__']</span>
</pre>
</div>
<ul class="org-ul">
<li>eval
</li>
</ul>
<p class="verse">
eval会计算python表达式(字符串形式书写)，返回结果值<br  />
赋值语句不能使用eval(抛出SyntaxError)，只能用exec执行<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">eval</span>(<span style="color: #DCDCCC; font-weight: bold;">raw_input</span>(<span style="color: #CC9393;">'Enter an arithmetic expression: '</span>))
</pre>
</div>

<p>
eval同样也可使用命名空间
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DFAF8F;">scope</span> = {}
<span style="color: #DFAF8F;">scope</span>[<span style="color: #CC9393;">'x'</span>] = 2
<span style="color: #DFAF8F;">scope</span>[<span style="color: #CC9393;">'y'</span>] = 3
<span style="color: #DCDCCC; font-weight: bold;">eval</span>(<span style="color: #CC9393;">'x * y'</span>, scope)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;6</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> ipython magicfunc</h2>
<div class="outline-text-2" id="text-17">
</div><div id="outline-container-sec-17-1" class="outline-3">
<h3 id="sec-17-1"><span class="section-number-3">17.1</span> 常用</h3>
<div class="outline-text-3" id="text-17-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">%quickref</td>
<td class="left">Display the IPython Quick Reference Card</td>
</tr>

<tr>
<td class="left">%magic</td>
<td class="left">Display detailed documentation for all of the available magic commands</td>
</tr>

<tr>
<td class="left">%debug</td>
<td class="left">Enter the interactive debugger at the bottom of the last exception traceback</td>
</tr>

<tr>
<td class="left">%hist</td>
<td class="left">Print command input (and optionally output) history</td>
</tr>

<tr>
<td class="left">%pdb</td>
<td class="left">Automatically enter debugger after any exception</td>
</tr>

<tr>
<td class="left">%paste</td>
<td class="left">Execute pre-formatted Python code from clipboard</td>
</tr>

<tr>
<td class="left">%cpaste</td>
<td class="left">Open a special prompt for manually pasting Python code to be executed</td>
</tr>

<tr>
<td class="left">%reset</td>
<td class="left">Delete all variables / names defined in interactive namespace</td>
</tr>

<tr>
<td class="left">%page</td>
<td class="left">OBJECT Pretty print the object and display it through a pager</td>
</tr>

<tr>
<td class="left">%run</td>
<td class="left">script.py Run a Python script inside IPython</td>
</tr>

<tr>
<td class="left">%prun</td>
<td class="left">statement Execute statement with cProfile and report the profiler output</td>
</tr>

<tr>
<td class="left">%time</td>
<td class="left">statement Report the execution time of single statement</td>
</tr>

<tr>
<td class="left">%timeit</td>
<td class="left">statement Run a statement multiple times to compute an emsemble average execution time.</td>
</tr>

<tr>
<td class="left">%who, %who_ls, %whos</td>
<td class="left">Display variables defined in interactive namespace, with varying levels of information / verbosity</td>
</tr>

<tr>
<td class="left">%xdel</td>
<td class="left">variable Delete a variable and attempt to clear any references to the object in the IPython internals</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-17-2" class="outline-3">
<h3 id="sec-17-2"><span class="section-number-3">17.2</span> log</h3>
<div class="outline-text-3" id="text-17-2">
<p>
%logstart, %logoff, %logon, %logstate, %logstop
</p>
</div>
</div>

<div id="outline-container-sec-17-3" class="outline-3">
<h3 id="sec-17-3"><span class="section-number-3">17.3</span> system-related</h3>
<div class="outline-text-3" id="text-17-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">!cmd</td>
<td class="left">Execute cmd in the system shell</td>
</tr>

<tr>
<td class="left">output = !cmd args</td>
<td class="left">Run cmd and store the stdout in output</td>
</tr>

<tr>
<td class="left">%alias alias_name cmd</td>
<td class="left">Define an alias for a system (shell) command</td>
</tr>

<tr>
<td class="left">%bookmark</td>
<td class="left">Utilize IPython’s directory bookmarking system</td>
</tr>

<tr>
<td class="left">%cd</td>
<td class="left">Change system working directory to passed directory</td>
</tr>

<tr>
<td class="left">%pwd</td>
<td class="left">Return the current system working directory</td>
</tr>

<tr>
<td class="left">%pushd directory</td>
<td class="left">Place current directory on stack and change to target directory</td>
</tr>

<tr>
<td class="left">%popd</td>
<td class="left">Change to directory popped off the top of the stack</td>
</tr>

<tr>
<td class="left">%dirs</td>
<td class="left">Return a list containing the current directory stack</td>
</tr>

<tr>
<td class="left">%dhist</td>
<td class="left">Print the history of visited directories</td>
</tr>

<tr>
<td class="left">%env</td>
<td class="left">Return the system environment variables as a dict</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-17-4" class="outline-3">
<h3 id="sec-17-4"><span class="section-number-3">17.4</span> debuger</h3>
<div class="outline-text-3" id="text-17-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Command</td>
<td class="left">Action</td>
</tr>

<tr>
<td class="left">h(elp)</td>
<td class="left">Display command list</td>
</tr>

<tr>
<td class="left">help command</td>
<td class="left">Show documentation for command</td>
</tr>

<tr>
<td class="left">c(ontinue)</td>
<td class="left">Resume program execution</td>
</tr>

<tr>
<td class="left">q(uit)</td>
<td class="left">Exit debugger without executing any more code</td>
</tr>

<tr>
<td class="left">b(reak)</td>
<td class="left">number Set breakpoint at number in current file</td>
</tr>

<tr>
<td class="left">b path/to/file.py:number</td>
<td class="left">Set breakpoint at line number in specified file</td>
</tr>

<tr>
<td class="left">s(tep)</td>
<td class="left">Step into function call</td>
</tr>

<tr>
<td class="left">n(ext)</td>
<td class="left">Execute current line and advance to next line at current level</td>
</tr>

<tr>
<td class="left">u(p) / d(own)</td>
<td class="left">Move up/down in function call stack</td>
</tr>

<tr>
<td class="left">a(rgs)</td>
<td class="left">Show arguments for current function</td>
</tr>

<tr>
<td class="left">debug statement</td>
<td class="left">Invoke statement statement in new (recursive) debugger</td>
</tr>

<tr>
<td class="left">l(ist) statement</td>
<td class="left">Show current position and context at current level of stack</td>
</tr>

<tr>
<td class="left">w(here)</td>
<td class="left">Print full stack trace with context at current position</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-17-5" class="outline-3">
<h3 id="sec-17-5"><span class="section-number-3">17.5</span> %lprun</h3>
<div class="outline-text-3" id="text-17-5">
<pre class="example">
%lprun -f func1 -f func2 statement_to_profile
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> 一些提示</h2>
<div class="outline-text-2" id="text-18">
</div><ol class="org-ol"><li><a id="sec-18-0-1" name="sec-18-0-1"></a>关于变量作用域<br  /><div class="outline-text-4" id="text-18-0-1">
<p class="verse">
python2.1以前，支持三种作用域，分别为局部、全局、内置作用域<br  />
2.1实现了对闭包的支持，引入了嵌套作用域，<i>查看更多信息</i>。<br  />
变量的查找顺序为LEGB(Local, Enclosing, Global, Built-in)<br  />
</p>
</div>
</li>
<li><a id="sec-18-0-2" name="sec-18-0-2"></a>input与raw_input<br  /><div class="outline-text-4" id="text-18-0-2">
<p class="verse">
input只支持合法的python表达式<br  />
raw_input所有输入以字符串形式作为原始数据 尽可能使用raw_input<br  />
</p>
</div>
</li>
<li><a id="sec-18-0-3" name="sec-18-0-3"></a>长字符串 跨越多行<br  /><div class="outline-text-4" id="text-18-0-3">
<p class="verse">
使用三个单引号或者三个双引号<br  />
''' blablabla<br  />
blablabla&#x2026;'''<br  />
注：三引号内的单引号和双引号，可以不用转义符号<br  />
</p>
</div>
</li>
<li><a id="sec-18-0-4" name="sec-18-0-4"></a>普通字符串忽略代码中的换行符<br  /><div class="outline-text-4" id="text-18-0-4">
<p>
换行处加上\
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #CC9393;">" 1 + 2 + \</span>
<span style="color: #CC9393;">4 + 5"</span>
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;"1 + 2 + 4 + 5"</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-18-0-5" name="sec-18-0-5"></a>关于表示路径的转义<br  /><div class="outline-text-4" id="text-18-0-5">
<div class="org-src-container">

<pre class="src src-python">r<span style="color: #CC9393;">'C:\TestFolder\test.txt'</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-18-0-6" name="sec-18-0-6"></a>Unicode 字符串<br  /><div class="outline-text-4" id="text-18-0-6">
<div class="org-src-container">

<pre class="src src-python">u<span style="color: #CC9393;">'Hello World!'</span>
</pre>
</div>
<p>
在python 3.0以上，所有字符串都为unicode字符串
</p>
</div>
</li>
<li><a id="sec-18-0-7" name="sec-18-0-7"></a>使用逗号打印多个表达式<br  /><div class="outline-text-4" id="text-18-0-7">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">print</span> <span style="color: #CC9393;">'Age'</span>, 42, <span style="color: #CC9393;">'?'</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-18-0-8" name="sec-18-0-8"></a>ASCII码转换<br  /><div class="outline-text-4" id="text-18-0-8">
<p>
chr(n) &amp; ord(c)
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #DCDCCC; font-weight: bold;">chr</span>(number)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&#23545;&#24212;&#30340;char</span>
<span style="color: #DCDCCC; font-weight: bold;">ord</span>(char)
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">=&gt;&#23545;&#24212;&#30340;ASCII&#30721;&#32534;&#21495;</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-18-0-9" name="sec-18-0-9"></a>检查特性是否为字符串<br  /><div class="outline-text-4" id="text-18-0-9">
<p class="verse">
通过和字符串拼接来检查参数类型是否为字符串<br  />
以下代码检查参数如果是字符串，是则抛出异常。<br  />
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #F0DFAF; font-weight: bold;">try</span>: var + <span style="color: #CC9393;">' '</span>
<span style="color: #F0DFAF; font-weight: bold;">except</span> <span style="color: #7CB8BB;">TypeError</span>: <span style="color: #F0DFAF; font-weight: bold;">pass</span>
<span style="color: #F0DFAF; font-weight: bold;">else</span>: <span style="color: #F0DFAF; font-weight: bold;">raise</span> <span style="color: #7CB8BB;">TypeError</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-18-0-10" name="sec-18-0-10"></a>python虚拟环境<br  /><div class="outline-text-4" id="text-18-0-10">
<p>
可使用virtualenv，适用情况：
</p>
<ol class="org-ol">
<li>使用多个python版本进行开发，环境变量只能设一个。
</li>
<li>site-packages在多人共享的开发机上，没有写入权限。
</li>
</ol>
</div>
</li>
<li><a id="sec-18-0-11" name="sec-18-0-11"></a>推荐工具包<br  /><div class="outline-text-4" id="text-18-0-11">
<p>
ipython, pip, virtualenv, pylint(logilab_astng, logilab_common), py2exe, pyQt
</p>
<ul class="org-ul">
<li>pip 常用命令
</li>
</ul>
<p class="verse">
pip install SomePackage==1.0<br  />
pip show &#x2013;files SomePackage<br  />
pip list &#x2013;outdated<br  />
pip install &#x2013;upgrade SomePackage<br  />
pip uninstall SomePackage<br  />
</p>
</div>
</li></ol>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
最常用的例子：'\\'.join(dirs)
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
range(1,100)实际是1~99
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
函数经过编译的bytecode，实际上放在func.func_code.co_code中，dis模块对其做了解析，使其更容易阅读。
</p></div>


</div>
</div></div>
</body>
</html>
